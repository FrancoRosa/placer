(this["webpackJsonppile-placer"]=this["webpackJsonppile-placer"]||[]).push([[0],{118:function(e,t){},221:function(e,t,c){},222:function(e,t,c){},279:function(e,t){},297:function(e,t,c){"use strict";c.r(t);var n,a=c(1),s=c.n(a),i=c(109),r=c.n(i),l=c(90),o=(c(221),c(222),c(37)),d=c(24),u=c(3),j=c(15),b={waypoints:[]},h=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},p={nextPiles:[{distance:null,pile_id:null},{distance:null,pile_id:null}],setNextPiles:Object(d.b)((function(e,t){e.nextPiles=Object(j.a)(t)})),clearPile:Object(d.b)((function(e,t){var c=Object(j.a)(e.nextPiles);c[t]={},e.nextPiles=c})),waypoints:(n="waypoints",JSON.parse(window.localStorage.getItem(n))||b[n]),setWaypoints:Object(d.b)((function(e,t){h("waypoints",t),e.waypoints=Object(j.a)(t)})),placeWaypoint:Object(d.b)((function(e,t){var c=e.waypoints.map((function(e){return e.pile_id==t?Object(u.a)(Object(u.a)({},e),{},{placed:!0}):e}));h("waypoints",c),e.waypoints=c})),unplaceWaypoint:Object(d.b)((function(e,t){var c=e.waypoints.map((function(e){return e.pile_id==t?Object(u.a)(Object(u.a)({},e),{},{placed:!1}):e}));h("waypoints",c),e.waypoints=c})),selectedColor:"",setSelectedColor:Object(d.b)((function(e,t){e.selectedColor=t})),center:{heading:0,lat:0,lng:0,truck:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],distY:[0,0],distX:[0,0],centDist:[{},{}],accuracy:2,rel_distance:5,rel_heading:30,week_timestamp:0},setCenter:Object(d.b)((function(e,t){e.center=t})),beep:!1,setBeep:Object(d.b)((function(e,t){e.beep=t}))},m=c(8),O=c(32),x=c(41),f=c(10),g=c.n(f),v=c(16),w=c(49),N=c.n(w),y=c(197),k=c.n(y),S="http://".concat(window.location.hostname,":9999"),C=k.a.connect("".concat(S)),E=function(){var e=Object(v.a)(g.a.mark((function e(t){var c,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting lat lng"),c="".concat(S,"/api/location"),e.next=4,N.a.post(c,t);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(v.a)(g.a.mark((function e(t){var c,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting heading"),c="".concat(S,"/api/heading"),e.next=4,N.a.post(c,t);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(v.a)(g.a.mark((function e(t){var c,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting config"),c="".concat(S,"/api/config"),e.next=4,N.a.post(c,t);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(v.a)(g.a.mark((function e(t){var c,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting waypoint"),c="".concat(S,"/api/waypoint"),e.next=4,N.a.post(c,t);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(v.a)(g.a.mark((function e(){var t,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... getting laser serial"),t="".concat(S,"/api/laser/serial"),e.next=4,N.a.get(t);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(v.a)(g.a.mark((function e(){var t,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... getting laser serial"),t="".concat(S,"/api/gps/serial"),e.next=4,N.a.get(t);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(v.a)(g.a.mark((function e(t){var c,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting laser config"),c="".concat(S,"/api/laser/config"),e.next=4,N.a.post(c,t);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(v.a)(g.a.mark((function e(t){var c,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting laser on"),c="".concat(S,"/api/laser/on"),e.next=4,N.a.post(c,t);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(v.a)(g.a.mark((function e(t){var c,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting laser blink"),c="".concat(S,"/api/laser/blink"),e.next=4,N.a.post(c,t);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(v.a)(g.a.mark((function e(){var t,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... getting waypoints"),t="".concat(S,"/api/waypoints"),e.next=4,N.a.get(t);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(v.a)(g.a.mark((function e(t,c){var n,a,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... uploading file"),n="".concat(S,"/api/file"),(a=new FormData).append("file",t),a.append("code",c),e.next=7,N.a.post(n,a,{headers:{"Content-Type":"multipart/form-data"}});case 7:return s=e.sent,e.abrupt("return",s.data);case 9:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),X=c(2),Y=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)("Nothing selected yet"),i=Object(m.a)(s,2),r=i[0],l=i[1],j=Object(a.useState)({}),b=Object(m.a)(j,2),h=b[0],p=b[1],f=Object(o.g)(),g=Object(d.d)((function(e){return e.setWaypoints}));Object(a.useEffect)((function(){document.querySelector(".file-input").addEventListener("change",(function(e){var t=e.target.files[0],c=e.target.files[0].name;n(t),l(c)}),!1)}),[]);return Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsx)("div",{className:"column file has-name",children:Object(X.jsxs)("label",{className:"file-label",children:[Object(X.jsx)("input",{className:"file-input",type:"file",accept:".csv, .xlsx"}),Object(X.jsxs)("span",{className:"file-cta",children:[Object(X.jsx)("span",{className:"file-icon",children:Object(X.jsx)(x.a,{icon:O.m})}),Object(X.jsx)("span",{className:"file-label",children:"Choose a file ..."})]}),Object(X.jsx)("span",{className:"file-name",children:r})]})}),Object(X.jsx)("div",{className:"column",children:c?Object(X.jsx)("div",{className:"is-flex is-justify-content-center",children:Object(X.jsx)("button",{className:"button is-outlined is-success",onClick:function(){B(c).then((function(e){p(e),_().then((function(e){g(e.waypoints.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{selected:!0})})))})),setTimeout((function(){f.push("/map")}),1e3)})).catch((function(){return p({message:!1})}))},children:"Upload"})}):""}),Object(X.jsx)("div",{className:"column",children:h.message?Object(X.jsxs)("div",{className:"is-flex is-align-content-center is-flex-direction-column",children:[Object(X.jsx)("p",{className:h.message?"has-text-success":"has-text-fail",children:h.message?"Success":"Fail"}),Object(X.jsxs)("p",{children:["Waypoints: ",h.rows]})]}):""})]})},I=function(e){var t=e.label,c=e.value,n=e.placeholder,a=e.changeHandler,s=e.size,i=void 0===s?"is-normal":s;return Object(X.jsxs)("div",{className:"field column",children:[Object(X.jsx)("label",{className:"label",children:t}),Object(X.jsx)("p",{className:"control",children:Object(X.jsx)("input",{className:"input ".concat(i),type:"number",step:.1,placeholder:n,onChange:function(e){return a(e.target.value)},value:c})})]})},z=function(e,t){var c=Object(a.useState)((function(){try{var c=window.localStorage.getItem(e);return c?JSON.parse(c):t}catch(n){return console.log(n),t}})),n=Object(m.a)(c,2),s=n[0],i=n[1];return[s,function(t){try{var c=t instanceof Function?t(s):t;i(c),window.localStorage.setItem(e,JSON.stringify(c))}catch(n){console.log(n)}}]},D=function(e){var t={};return e.forEach((function(e){var c,n,a;t[null===(c=e.color)||void 0===c?void 0:c.trim()]?t[null===(n=e.color)||void 0===n?void 0:n.trim()]+=1:t[null===(a=e.color)||void 0===a?void 0:a.trim()]=1})),t},R=function(e){var t={};return e.forEach((function(e){var c,n,a;e.placed&&(t[null===(c=e.color)||void 0===c?void 0:c.trim()]?t[null===(n=e.color)||void 0===n?void 0:n.trim()]+=1:t[null===(a=e.color)||void 0===a?void 0:a.trim()]=1)})),t},J={black:[0,0,0],blue:[0,0,255],brown:[165,42,42],darkblue:[0,0,139],green:[0,255,0],lightblue:[135,206,235],lightgreen:[144,238,144],orange:[255,165,0],pink:[255,105,180],purple:[128,0,128],red:[255,0,0],white:[255,255,255],yellow:[255,255,0]},G={black:[0,0,0,128],blue:[0,0,255,128],brown:[165,42,42,128],darkblue:[0,0,139,128],green:[0,255,0,128],lightblue:[135,206,235,128],lightgreen:[144,238,144,128],orange:[255,165,0,128],pink:[255,105,180,128],purple:[128,0,128,128],red:[255,0,0,128],white:[255,255,255,128],yellow:[255,255,0,128]},U=c.p+"static/media/epsg_codes.c38b8103.pdf",Z=c.p+"static/media/marooka-size.51b49781.png",V=c.p+"static/media/marooka-side.6ce15895.png",q=function(){var e=z("config",{}),t=Object(m.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(c.truckLen),i=Object(m.a)(s,2),r=i[0],l=i[1],o=Object(a.useState)(c.truckWid),d=Object(m.a)(o,2),u=d[0],j=d[1],b=Object(a.useState)(c.truckHei),h=Object(m.a)(b,2),p=h[0],f=h[1],g=Object(a.useState)(c.antennaX),v=Object(m.a)(g,2),w=v[0],N=v[1],y=Object(a.useState)(c.antennaY),k=Object(m.a)(y,2),S=k[0],C=k[1],E=Object(a.useState)(c.bay1),A=Object(m.a)(E,2),H=A[0],F=A[1],W=Object(a.useState)(c.bay2),M=Object(m.a)(W,2),T=M[0],L=M[1],_=Object(a.useState)(c.fromCenter),B=Object(m.a)(_,2),D=B[0],R=B[1],J=Object(a.useState)(c.laserX),G=Object(m.a)(J,2),q=G[0],Q=G[1],K=Object(a.useState)(c.laserY),$=Object(m.a)(K,2),ee=$[0],te=$[1],ce=Object(a.useState)(c.laserZ),ne=Object(m.a)(ce,2),ae=ne[0],se=ne[1],ie=Object(a.useState)(c.laserScale),re=Object(m.a)(ie,2),le=re[0],oe=re[1],de=Object(a.useState)(c.reference),ue=Object(m.a)(de,2),je=ue[0],be=ue[1],he=Object(a.useState)(c.epsg),pe=Object(m.a)(he,2),me=pe[0],Oe=pe[1],xe=Object(a.useState)(""),fe=Object(m.a)(xe,2),ge=fe[0],ve=fe[1];return Object(X.jsx)("div",{className:"container",children:Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsxs)("div",{className:"column",children:[Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsx)(I,{label:"Truck length",value:r,placeholder:"E.g: 5",changeHandler:l}),Object(X.jsx)(I,{label:"Truck width",value:u,placeholder:"E.g: 5",changeHandler:j}),Object(X.jsx)(I,{label:"Truck height",value:p,placeholder:"E.g: 5",changeHandler:f})]}),Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsx)(I,{label:"Antenna from left",value:w,placeholder:"E.g: 5",changeHandler:N}),Object(X.jsx)(I,{label:"Antenna from truck head",value:S,placeholder:"E.g: 5",changeHandler:C})]}),Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsx)(I,{label:"Bay 1 from truck head",value:H,placeholder:"E.g: 5",changeHandler:F}),Object(X.jsx)(I,{label:"Bay 2 from truck head",value:T,placeholder:"E.g: 5",changeHandler:L}),Object(X.jsx)(I,{label:"Distance from center",value:D,placeholder:"E.g: 5",changeHandler:R})]}),Object(X.jsx)("hr",{style:{margin:".25em"}}),Object(X.jsxs)("div",{className:"",children:[Object(X.jsx)("h2",{className:"has-text-centered",children:"Laser distances (ft)"}),Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsx)(I,{label:"From left",value:q,placeholder:"E.g: 5",changeHandler:Q}),Object(X.jsx)(I,{label:"From head",value:ee,placeholder:"E.g: 5",changeHandler:te}),Object(X.jsx)(I,{label:"From ground",value:ae,placeholder:"E.g: 5",changeHandler:se}),Object(X.jsxs)("div",{className:"field column",children:[Object(X.jsx)("label",{className:"label",children:"Reference"}),Object(X.jsx)("div",{className:"control",children:Object(X.jsx)("div",{className:"select",children:Object(X.jsxs)("select",{onChange:function(e){return be(e.target.value)},children:[Object(X.jsx)("option",{value:"bay1",children:"Bay 1"}),Object(X.jsx)("option",{value:"bay2",children:"Bay 2"})]})})})]}),Object(X.jsx)(I,{label:"Scale",value:le,placeholder:"E.g: 1",changeHandler:oe})]})]}),Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsx)(I,{label:"EPSG code",value:me,placeholder:"E.g: 6588",changeHandler:Oe}),Object(X.jsxs)("div",{className:"column is-flex-direction-column is-flex is-flex-centered",children:[Object(X.jsx)("p",{className:"heading has-text-link",children:"EPSG Reference"}),Object(X.jsx)("a",{href:U,target:"blank",className:"has-text-white title is-2",children:Object(X.jsx)(x.a,{icon:O.b})})]}),Object(X.jsxs)("div",{className:"column is-flex-direction-column is-flex is-flex-centered",children:[Object(X.jsx)("p",{className:"heading has-text-link",children:"EPSG Browser"}),Object(X.jsx)("a",{href:"https://epsg.io/",target:"blank",className:"has-text-white title is-2",children:Object(X.jsx)(x.a,{icon:O.j})})]}),Object(X.jsxs)("div",{className:"column is-flex is-justify-content-center is-align-content-center",children:[Object(X.jsx)("button",{className:"button ml-2",onClick:function(){var e={truckLen:r,truckWid:u,truckHei:p,antennaX:w,antennaY:S,bay1:H,bay2:T,fromCenter:D,epsg:me,laserX:q,laserY:ee,laserZ:ae,laserScale:le,reference:je};n(e),P(e).then((function(){return ve("Success")})).catch((function(){return ve("Fail")}))},children:"Save"}),Object(X.jsx)("p",{className:"success ml-2 ".concat("Success"==ge?"has-text-success":"has-text-danger"),children:ge})]})]}),Object(X.jsx)("hr",{style:{margin:".5em"}}),Object(X.jsx)(Y,{})]}),Object(X.jsxs)("div",{className:"column is-centered has-text-centered",children:[Object(X.jsx)("img",{src:Z}),Object(X.jsx)("img",{src:V})]})]})})},Q=c(309),K=c(207),$=c(315),ee=c(313),te=c(311),ce=c(316),ne=c(153),ae=c.p+"static/media/1.2999e734.mp3",se=c.p+"static/media/2.c90484f3.mp3",ie=c.p+"static/media/3.451a053d.mp3",re=c.p+"static/media/4.3d33a969.mp3",le=c.p+"static/media/5.0b9156e3.mp3",oe=c.p+"static/media/6.52edbbb5.mp3",de=c.p+"static/media/7.b473eb3a.mp3",ue=c.p+"static/media/8.55fb2017.mp3",je=c.p+"static/media/9.308dc1bf.mp3",be=c.p+"static/media/10.1fbcf1e7.mp3",he=c.p+"static/media/black.67345e6d.mp3",pe=c.p+"static/media/blue.603a17d2.mp3",me=c.p+"static/media/brown.aa74bbbb.mp3",Oe=c.p+"static/media/darkblue.587d78fd.mp3",xe=c.p+"static/media/lightblue.9a9ee83a.mp3",fe=c.p+"static/media/lightgreen.d7c408fe.mp3",ge=c.p+"static/media/orange.42e333b5.mp3",ve=c.p+"static/media/pink.f914d206.mp3",we=c.p+"static/media/purple.8e39b00d.mp3",Ne=c.p+"static/media/red.d598f0dc.mp3",ye=c.p+"static/media/white.a09c2726.mp3",ke=c.p+"static/media/yellow.1d5be675.mp3",Se=c.p+"static/media/green.8c2c03a6.mp3",Ce=c.p+"static/media/purplewhite.08127fb1.mp3",Ee=c.p+"static/media/brownwhite.f5c411c7.mp3",Ae=c.p+"static/media/left_bay.ba74ee7d.mp3",Pe=c.p+"static/media/right_bay.0fce9298.mp3",He=c.p+"static/media/next_pile.aa5d59d6.mp3",Fe=c.p+"static/media/1beep.02416d27.mp3",We=c.p+"static/media/2beep.44a9a09a.mp3",Me=c.p+"static/media/4beep.511984ec.mp3",Te=c.p+"static/media/8beep.4d330e41.mp3",Le=c.p+"static/media/ibeep.98e6c448.mp3",_e=(new Audio(ae),new Audio(se),new Audio(ie),new Audio(re),new Audio(le),new Audio(oe),new Audio(de),new Audio(ue),new Audio(je),new Audio(be),{leftBay:new Audio(Ae),rightBay:new Audio(Pe),nextPile:new Audio(He)}),Be={black:new Audio(he),blue:new Audio(pe),brown:new Audio(me),darkblue:new Audio(Oe),lightblue:new Audio(xe),lightgreen:new Audio(fe),orange:new Audio(ge),pink:new Audio(ve),purple:new Audio(we),red:new Audio(Ne),white:new Audio(ye),yellow:new Audio(ke),green:new Audio(Se),purplewhite:new Audio(Ce),brownwhite:new Audio(Ee)},Xe={far:new Audio(Fe),close:new Audio(We),closer:new Audio(Me),closest:new Audio(Te),target:new Audio(Le)},Ye=function(e){_e[e]&&_e[e].play()},Ie=function(e){Be[e]&&Be[e].play()},ze=c(125),De=c.n(ze),Re=c.p+"static/media/marooka-top.0316a837.bmp",Je=function(e){var t=e.config,c=Object(a.useRef)(),n=Object(d.e)((function(e){return e.center})),s={x:t.antennaX*t.kX-5,y:t.antennaY*t.kY-5},i=Object(a.useState)({x:-4,y:-4}),r=Object(m.a)(i,2),l=r[0],o=r[1],u=Object(a.useState)({x:4,y:4}),j=Object(m.a)(u,2),b=j[0],h=j[1];return Object(a.useEffect)((function(){var e=function(e,t){var c=Math.atan2(e.y,e.x),n=t*Math.PI/180;return{x:e.abs*Math.cos(c+n),y:e.abs*Math.sin(c+n)}};if(void 0!==n.centDist){var c=[e(n.centDist[0],n.heading),e(n.centDist[1],n.heading)];o({x:s.x+c[0].x*t.kX,y:s.y-c[0].y*t.kY}),h({x:s.x+c[1].x*t.kX,y:s.y-c[1].y*t.kY})}}),[n]),Object(a.useEffect)((function(){if(void 0!==t.camera){var e={video:{deviceId:t.camera.deviceId,width:t.videoWidth,height:t.videoHight}};navigator.mediaDevices.getUserMedia(e).then((function(e){c.current.srcObject=e}))}}),[]),Object(X.jsx)("div",{children:Object(X.jsxs)("div",{className:"vid-container",style:{width:"".concat(t.crop,"px"),height:"".concat(t.videoHight,"px")},children:[Object(X.jsx)("video",{autoPlay:!0,ref:c,style:{position:"absolute",clip:"rect(0, ".concat(t.crop,"px, ").concat(t.videoHight,"px, 0)")}}),Object(X.jsx)("div",{className:"is-flex is-flex-centered m-0 p-0",style:{width:"10px",height:"10px",position:"absolute",transform:"translateX(".concat(s.x,"px) translateY(").concat(s.y,"px)"),color:"black",borderStyle:"solid",borderColor:"lime",borderRadius:"50%"}}),Object(X.jsx)("div",{className:"is-flex is-flex-centered m-0 p-0",style:{width:"10px",height:"10px",position:"absolute",transform:"translateX(".concat(l.x,"px) translateY(").concat(l.y,"px)"),color:"black",borderStyle:"solid",borderColor:"cyan",borderRadius:"50%"}}),Object(X.jsx)("div",{className:"is-flex is-flex-centered m-0 p-0",style:{width:"10px",height:"10px",position:"absolute",transform:"translateX(".concat(b.x,"px) translateY(").concat(b.y,"px)"),color:"black",borderStyle:"solid",borderColor:"aqua",borderRadius:"50%"}})]})})};De.a.workerClass=c(278).default;var Ge={longitude:-122.123801,latitude:37.893394,zoom:21,maxZoom:21,pitch:60,bearing:0},Ue=function(){var e=Object(d.e)((function(e){return e.center})),t=Object(d.d)((function(e){return e.setCenter})),c=Object(d.e)((function(e){return e.beep})),n=Object(d.d)((function(e){return e.setBeep})),s=z("camConfig",{}),i=Object(m.a)(s,2),r=i[0],l=(i[1],Object(a.useState)(Ge)),o=Object(m.a)(l,2),b=o[0],h=o[1],p=Object(a.useState)(!0),f=Object(m.a)(p,2),g=f[0],v=f[1],w=Object(a.useState)(!1),N=Object(m.a)(w,2),y=N[0],k=N[1],S=Object(a.useState)(),E=Object(m.a)(S,2),A=E[0],P=E[1],F=Object(a.useState)(null),W=Object(m.a)(F,2),M=W[0],T=W[1],L=Object(a.useState)([{lat:0,lng:0},{lat:0,lng:0},{lat:0,lng:0},{lat:0,lng:0}]),B=Object(m.a)(L,2),Y=B[0],I=B[1],D=Object(a.useState)({}),R=Object(m.a)(D,2),U=R[0],Z=R[1],V=Object(a.useState)([{lat:0,lng:0},{lat:0,lng:0}]),q=Object(m.a)(V,2),ae=q[0],se=q[1],ie=Object(d.e)((function(e){return e.nextPiles})),re=Object(d.d)((function(e){return e.setNextPiles})),le=Object(d.e)((function(e){return e.waypoints})),oe=Object(d.d)((function(e){return e.setWaypoints})),de=Object(d.d)((function(e){return e.placeWaypoint})),ue=Object(d.d)((function(e){return e.unplaceWaypoint})),je=z("debugCenter",{lat:0,lng:0}),be=Object(m.a)(je,2),he=(be[0],be[1],Object(d.e)((function(e){return e.selectedColor}))),pe=function(){C.on("message",(function(e){var c=JSON.parse(e);t(c),h(Object(u.a)(Object(u.a)({},b),{},{longitude:parseFloat(c.lng),latitude:parseFloat(c.lat),bearing:parseFloat(c.heading)})),I([{lat:c.truck[0][0],lng:c.truck[0][1]},{lat:c.truck[1][0],lng:c.truck[1][1]},{lat:c.truck[2][0],lng:c.truck[2][1]},{lat:c.truck[3][0],lng:c.truck[3][1]},{lat:c.truck[0][0],lng:c.truck[0][1]}]),se([{lat:c.bays[0][0],lng:c.bays[0][1]},{lat:c.bays[1][0],lng:c.bays[1][1]}]),Z([{from:[c.truck[4][1],c.truck[4][0]],to:[c.truck[5][1],c.truck[5][0]]}])}))};Object(a.useEffect)((function(){return _().then((function(c){P(c.guides),c.waypoints.length>0&&(t(Object(u.a)(Object(u.a)({},e),c.waypoints[0])),h(Object(u.a)(Object(u.a)({},b),{},{latitude:c.waypoints[0].lat,longitude:c.waypoints[0].lng})))})),pe(),function(){C.off("message")}}),[]);var me=function(e,t){if(e.length>0){var c=function(e,t){var c,n,a,s,i=1e4,r=1e4;return e.forEach((function(e){e.placed||he!=e.color&&""!=he||(c=Math.pow(e.lat-t[0].lat,2)+Math.pow(e.lng-t[0].lng,2),n=Math.pow(e.lat-t[1].lat,2)+Math.pow(e.lng-t[1].lng,2),c<i&&(i=c,a=e),n<r&&(r=n,s=e))})),a==s&&(i<r?s={lat:0,lng:0}:a={lat:0,lng:0}),[a,s]}(e,t);re(c),H(c),console.log("... getting colors");var n=0;try{var a=e.filter((function(e){return e.pile_id==c[0].pile_id}))[0].color.trim();Ye("leftBay"),setTimeout((function(){return Ie(a)}),1e3),n=2e3}catch(i){console.log("error left color")}try{var s=e.filter((function(e){return e.pile_id==c[1].pile_id}))[0].color.trim();setTimeout((function(){return Ye("rightBay")}),0+n),setTimeout((function(){return Ie(s)}),1e3+n)}catch(r){console.log("error right color")}}};Object(a.useEffect)((function(){if(Object.keys(e).includes("distance")){var t=Object(j.a)(ie);t[0].distance=e.distance[0],t[1].distance=e.distance[1],re(t)}}),[e]),Object(a.useEffect)((function(){g?(C.off("message"),pe()):C.off("message")}),[g]),Object(a.useEffect)((function(){oe(le.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{selected:e.color==he||""==he})})))}),[he]);return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("div",{className:"is-flex is-flex-centered",children:[Object(X.jsx)("div",{className:"container map",children:Object(X.jsxs)(Q.a,{initialViewState:b,controller:!0,getTooltip:function(e){var t=e.object;return t&&"Code: ".concat(t.pile_id,"\nColor: ").concat(t.color,"\n").concat(t.placed?"Placed":"Not Placed")},children:[Object(X.jsx)(ne.a,{mapboxApiAccessToken:"pk.eyJ1Ijoia20xMTVmcmFuY28iLCJhIjoiY2t0eXQ3cHBhMGI3aTMxcG14dnN0OHJveSJ9.LWxkBiVPF9UfGWMI4sWakQ",mapStyle:M?"mapbox://styles/km115franco/cl0ek8k82000d15mj12mm3mda":void 0}),Object(X.jsx)(K.a,{x:"80%",y:"80%",height:"15%",width:"15%",clear:!0,controller:!0}),Object(X.jsx)($.a,{lineWidthMaxPixels:3,lineWidthMinPixels:2,getRadius:function(e){return e.selected?e.placed?.3:1:.01},data:le,getPosition:function(e){return[e.lng,e.lat]},getColor:function(e){return J[e.color]},getFillColor:function(e){return G[e.color]},getLineColor:function(e){return J[e.color]},filled:!0,stroked:!0,pickable:!0,opacity:.8,onClick:function(e){var t=e.object.pile_id;e.object.placed?ue(t):de(t)}}),Object(X.jsx)(ee.a,{bounds:[[Y[3].lng,Y[3].lat,0],[Y[0].lng,Y[0].lat,0],[Y[1].lng,Y[1].lat,0],[Y[2].lng,Y[2].lat,0]],image:Re}),Object(X.jsx)($.a,{lineWidthMaxPixels:2,lineWidthMinPixels:1,getRadius:.3,data:[{coordinates:[parseFloat(e.lng),parseFloat(e.lat)],color:J.black,height:10},{coordinates:[e.truck[14][1],e.truck[14][0]],color:J.green,height:10},{coordinates:[ae[0].lng,ae[0].lat],color:J.red,height:0},{coordinates:[ae[1].lng,ae[1].lat],color:J.red,height:0}],getPosition:function(e){return e.coordinates},getColor:function(e){return e.color},filled:!1,stroked:!0}),Object(X.jsx)(te.a,{data:[{contour:[[Y[0].lng,Y[0].lat],[Y[1].lng,Y[1].lat],[Y[2].lng,Y[2].lat],[Y[3].lng,Y[3].lat]]}],stroked:!0,filled:!0,wireframe:!0,extruded:!0,lineWidthMinPixels:1,getPolygon:function(e){return e.contour},getFillColor:G.lightgreen,getLineColor:J.lightgreen,getLineWidth:.1,getElevation:.5}),Object(X.jsx)(ce.a,{data:U,widthUnits:"meters",getWidth:.3,getSourcePosition:function(e){return e.from},getTargetPosition:function(e){return e.to},getColor:[20,140,0]}),Object(X.jsx)(ce.a,{data:A,widthUnits:"meters",getWidth:.1,getSourcePosition:function(e){return e.from},getTargetPosition:function(e){return e.to},getColor:[20,140,0,100]}),Object(X.jsx)(ce.a,{data:function(e,t){return[{from:[e[0].lng,e[0].lat],to:void 0==t[0].color?[e[0].lng,e[0].lat]:[t[0].lng,t[0].lat]},{from:[e[1].lng,e[1].lat],to:void 0==t[1].color?[e[1].lng,e[1].lat]:[t[1].lng,t[1].lat]}]}(ae,ie),widthUnits:"meters",getWidth:.1,getSourcePosition:function(e){return e.from},getTargetPosition:function(e){return e.to},getColor:[120,40,0,100]})]})}),y&&Object(X.jsx)(Je,{config:r})]}),Object(X.jsxs)("div",{className:"columns mt-3 has-text-link ",children:[Object(X.jsx)("div",{className:"column is-flex is-flex-centered m-0 p-0",children:Object(X.jsxs)("p",{className:"heading has-text-centered m-0 p-0 f-3",children:["Lat: ",parseFloat(e.lat).toFixed(7)]})}),Object(X.jsx)("div",{className:"column is-flex is-flex-centered m-0 p-0",children:Object(X.jsxs)("p",{className:"heading has-text-centered m-0 p-0 f-3",children:["Lng: ",parseFloat(e.lng).toFixed(7)]})}),Object(X.jsx)("div",{className:"column is-flex is-flex-centered m-0 p-0",children:Object(X.jsxs)("p",{className:"heading has-text-centered m-0 p-0 f-3",children:["Hdg: ",parseFloat(e.heading).toFixed(1),"\u0970"]})}),Object(X.jsxs)("div",{className:"column is-flex is-flex-centered m-0 p-0",children:[Object(X.jsx)("button",{className:"button is-outlined ml-2 mr-2 ".concat(g?"is-success":"is-warning"),onClick:function(){return v(!g)},children:g?"Auto center enabled":"Auto center not enabled"}),Object(X.jsx)("button",{className:"button is-outlined is-success ml-2 mr-2",onClick:function(){return me(le,ae)},disabled:ae[0].lat==ae[1].lat&&ae[0].lng==ae[1].lng,children:"Get nearest piles"}),Object(X.jsx)("button",{className:"button is-outlined ".concat(c?"is-success":"is-danger"),onClick:function(){return n(!c)},children:"Beep"}),Object(X.jsx)("button",{className:"ml-2 button is-outlined ".concat(y?"is-success":"is-danger"),onClick:function(){return k(!y)},children:"Cam"}),Object(X.jsx)("button",{className:"ml-2 button is-outlined ".concat(M?"is-success":"is-danger"),onClick:function(){return T(!M)},children:Object(X.jsx)(x.a,{icon:O.e})})]})]}),Object(X.jsx)("p",{className:"timestamp",children:e.week_timestamp/1e3})]})},Ze=function(e){var t=e.index,c=Object(d.e)((function(e){return e.nextPiles})),n=Object(d.e)((function(e){return e.center})),s=Object(d.e)((function(e){return e.beep})),i=Object(d.d)((function(e){return e.placeWaypoint})),r=Object(d.d)((function(e){return e.clearPile})),l=Object(a.useState)(0),o=Object(m.a)(l,2),u=o[0],j=o[1],b=Object(a.useState)("red"),h=Object(m.a)(b,2),p=h[0],f=h[1],g=c[t];return Object(a.useEffect)((function(){if(void 0!==n.distance){var e=Math.abs(n.distance[t]);e>25&&(f("is-danger"),j(1)),e<15&&(f("is-warning"),j(2)),e<6&&(f("is-success"),j(3)),s&&function(e){console.log("PLay sound",e);var t=25,c=17,n=10,a=3;e>=t&&Xe.far.play(),e<t&&e>=c&&Xe.close.play(),e<c&&e>=n&&Xe.closer.play(),e<n&&e>=a&&Xe.closest.play(),e<a&&Xe.target.play()}(e)}}),[g.distance]),Object(X.jsx)("div",{className:"column is-flex is-flex-centered is-flex-direction-column",children:g.pile_id&&Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("p",{className:"heading title is-5 mb-4",children:["Id: ",g.pile_id]}),Object(X.jsx)("div",{className:"flag-icon color_red",onClick:function(){Ye(0==t?"leftBay":"rightBay"),setTimeout((function(){var e;Ie(null===(e=g.color)||void 0===e?void 0:e.trim())}),1e3)},children:Object(X.jsx)(x.a,{icon:O.c,color:g.color})}),Object(X.jsx)("p",{className:"heading has-text-centered",children:g.color}),Object(X.jsxs)("p",{className:"title is-3 has-text-centered mt-3 mb-4",children:[void 0!==n.distance&&n.distance[t].toFixed(1)," ","ft"]}),Object(X.jsx)("progress",{className:"progress rotate ".concat(p),max:"3",value:u}),Object(X.jsx)("div",{className:"is-flex is-flex-centered",children:Object(X.jsx)("button",{onClick:function(){i(g.pile_id),r(t)},className:"button is-outlined is-success",children:"Place"})})]})})},Ve=function(){var e=Object(d.e)((function(e){return e.waypoints})),t=Object(d.e)((function(e){return e.center})),c=Object(d.e)((function(e){return e.selectedColor})),n=Object(d.d)((function(e){return e.setSelectedColor})),s=Object(a.useState)(D(e)),i=Object(m.a)(s,2),r=i[0],l=i[1],o=Object(a.useState)(R(e)),u=Object(m.a)(o,2),j=u[0],b=u[1];return Object(a.useEffect)((function(){l(D(e)),b(R(e))}),[e]),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("hr",{className:"m-0 p-0 mb-4"}),Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsxs)("div",{className:"column is-flex is-flex-direction-column is-flex-centered",children:[Object(X.jsx)(x.a,{onClick:function(){return n("")},icon:O.d,className:"is-size-3",color:c}),Object(X.jsx)("p",{className:"heading has-text-centered has-text-link is-size-5 m-0 p-0",children:"Placed"}),Object(X.jsxs)("p",{className:"heading has-text-centered has-text-success is-size-5 m-0 p-0",children:[e.filter((function(e){return e.placed})).length," / ",e.length]})]}),Object(X.jsxs)("div",{className:"column is-four-fifths",children:[Object(X.jsx)("div",{className:"columns",children:Object.keys(r).map((function(e){return Object(X.jsxs)("div",{className:"column has-text-centered m-0 p-0","aria-label":e,children:[Object(X.jsxs)("p",{className:"is-size-7 m-0 p-0",children:[j[e]?j[e]:0," /"," ",r[e]]}),Object(X.jsx)(x.a,{icon:O.c,onClick:function(){return n(e)},color:e,className:"is-size-3"}),Object(X.jsxs)("p",{children:[(100*(j[e]?j[e]:0)/r[e]).toFixed()," ","%"]})]})}))}),Object(X.jsx)("hr",{className:"m-0 p-0"}),Object(X.jsx)("p",{className:"has-text-centered",style:{color:c},children:""==c?"No layer selected":c})]}),Object(X.jsxs)("div",{className:"column is-centered has-text-centered",children:[Object(X.jsx)(x.a,{icon:O.f,transform:{rotate:t.heading-45},className:"has-text-white is-size-1"}),Object(X.jsxs)("p",{className:"is-size-4",children:[t.heading.toFixed(1),"\u0970"]}),Object(X.jsxs)("p",{className:"is-link help",children:[(3.28084*t.accuracy).toFixed(1),"ft"]})]})]})]})},qe=function(){return Object(X.jsxs)("div",{className:"container is-fullwidth",children:[Object(X.jsxs)("div",{className:"columns p-0 m-0",children:[Object(X.jsx)(Ze,{index:0}),Object(X.jsx)("div",{className:"column is-three-fifths p-0 m-0",children:Object(X.jsx)(Ue,{})}),Object(X.jsx)(Ze,{index:1})]}),Object(X.jsx)(Ve,{})]})},Qe=function(e){var t=e.name,c=e.icon,n=Object(o.h)().pathname.includes(t.toLowerCase());return Object(X.jsx)("li",{className:n?"is-active":"",children:Object(X.jsxs)(l.b,{to:"/".concat(t.toLowerCase()),className:"mr-4 ml-4",children:[Object(X.jsx)("span",{className:"icon is-small",children:Object(X.jsx)(x.a,{icon:c})}),Object(X.jsx)("span",{children:t})]})})},Ke=function(){return Object(X.jsx)("div",{className:"tabs is-centered m-0",children:Object(X.jsxs)("ul",{children:[Object(X.jsx)(Qe,{name:"Map",icon:O.g}),Object(X.jsx)(Qe,{name:"Config",icon:O.l}),Object(X.jsx)(Qe,{name:"Debug",icon:O.a}),Object(X.jsx)(Qe,{name:"Laser",icon:O.k}),Object(X.jsx)(Qe,{name:"GPS",icon:O.i}),Object(X.jsx)(Qe,{name:"Cam",icon:O.n})]})})},$e=c(119),et=Object($e.GoogleApiWrapper)({apiKey:"AIzaSyBsgd5A9q-23gHy8tL6e5O0lct6JoD97xo"})((function(e){var t=e.google,c=Object(a.useState)(0),n=Object(m.a)(c,2),s=n[0],i=n[1],r=z("debugCenter",{lat:0,lng:0}),l=Object(m.a)(r,2),o=l[0],d=l[1],j=Object(a.useState)([]),b=Object(m.a)(j,2),h=b[0],p=b[1];Object(a.useEffect)((function(){_().then((function(e){p(e.waypoints),e.waypoints.length>0&&d(Object(u.a)({},e.waypoints[0]))}))}),[]);return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("div",{className:"container map",children:Object(X.jsxs)($e.Map,{google:t,zoom:14,onClick:function(e,t,c){var n={lat:c.latLng.lat().toFixed(5),lng:c.latLng.lng().toFixed(5)};d(n),E(n),console.log(n)},initialCenter:o,children:[Object(X.jsx)($e.Marker,{name:"target",position:o}),h.map((function(e){return Object(X.jsx)($e.Circle,{center:e,radius:.5,strokeColor:e.color,strokeOpacity:.5,strokeWeight:2,fillColor:e.color,fillOpacity:.5})}))]})}),Object(X.jsx)("div",{className:"container mt-4 pt-4",children:Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsxs)("div",{className:"column",children:[Object(X.jsxs)("p",{className:"ml-4",children:["Coordinates: ",o.lat,", ",o.lng]}),Object(X.jsxs)("p",{className:"ml-4",children:["Heading: ",s,"\xb0 "]})]}),Object(X.jsxs)("div",{className:"column",children:[Object(X.jsx)("p",{className:"ml-4",children:"Set heading:"}),Object(X.jsx)("input",{className:"slider m-4",step:1,min:0,max:360,value:s,type:"range",onInput:function(e){var t=parseFloat(e.target.value).toFixed(1);A({heading:t}),i(t)}})]})]})})]})})),tt=c.p+"static/media/laser.bacfbcc3.jpeg",ct=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(),i=Object(m.a)(s,2),r=i[0],l=i[1],o=z("laserAuto",!0),d=Object(m.a)(o,2),u=d[0],j=d[1],b=Object(a.useState)(!1),h=Object(m.a)(b,2),p=h[0],f=h[1],g=z("laserOn",!0),v=Object(m.a)(g,2),w=v[0],N=v[1],y=z("laserBlink",!0),k=Object(m.a)(y,2),S=k[0],C=k[1],E=z("laserRWidth",0),A=Object(m.a)(E,2),P=A[0],H=A[1],W=z("laserRHeight",0),_=Object(m.a)(W,2),B=_[0],Y=_[1],D=z("laserTargetX",0),R=Object(m.a)(D,2),J=R[0],G=R[1],U=z("laserTargetY",0),Z=Object(m.a)(U,2),V=Z[0],q=Z[1],Q=z("laserTargetZ",-2),K=Object(m.a)(Q,2),$=K[0],ee=K[1],te=z("laserTargetA",20),ce=Object(m.a)(te,2),ne=ce[0],ae=ce[1],se=Object(a.useState)(0),ie=Object(m.a)(se,2),re=ie[0],le=ie[1],oe=Object(a.useState)(0),de=Object(m.a)(oe,2),ue=de[0],je=de[1],be=Object(a.useState)(0),he=Object(m.a)(be,2),pe=he[0],me=he[1],Oe=function(){f(!0),F().then((function(e){n(e.connected),l(e.port),f(!1)}))};return Object(a.useEffect)((function(){!function(e,t){var c=function(e){return e*(Math.PI/180)};je(e/Math.tan(c(t-10))),le(e/Math.tan(c(t+10))),me(e/(Math.cos(c(t))+1))}(-V,ne)}),[V,ne]),Object(a.useEffect)((function(){Oe()}),[]),Object(X.jsx)("div",{className:"container",children:Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsxs)("div",{className:"column",children:[Object(X.jsxs)("div",{children:[Object(X.jsxs)("h1",{className:"has-text-centered title is-size-4 ".concat(c?"has-text-success":"has-text-danger"),children:[c?"Laser connected at: ":"Laser disconnected",Object(X.jsx)("span",{children:c&&r})]}),Object(X.jsx)("div",{className:"is-flex is-flex-centered",children:Object(X.jsx)("button",{className:"button is-outlined ".concat(p&&"is-loading"),onClick:Oe,children:Object(X.jsx)(x.a,{icon:O.h})})})]}),Object(X.jsx)("hr",{}),Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsx)(I,{label:"Rectangle width (ft)",value:P,placeholder:"E.g: 5",changeHandler:H}),Object(X.jsx)(I,{label:"Rectangle height (ft)",value:B,placeholder:"E.g: 5",changeHandler:Y})]}),Object(X.jsx)("hr",{}),Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsx)(I,{label:"Target X (ft)",value:J,placeholder:"E.g: 5",changeHandler:G}),Object(X.jsx)(I,{label:"Target Y (ft)",value:V,placeholder:"E.g: 5",changeHandler:q}),Object(X.jsx)(I,{label:"Target Z (ft)",value:$,placeholder:"E.g: 5",changeHandler:ee}),Object(X.jsx)(I,{label:"Tilt Angle (deg)",value:ne,placeholder:"E.g: 20",changeHandler:ae})]}),Object(X.jsxs)("div",{className:"is-flex is-flex-centered",children:[Object(X.jsx)("button",{onClick:function(){N(!w),T({on:!w})},className:"button is-outlined m-4 ".concat(w?"is-success":"is-danger"),children:w?"Laser on":"Laser off"}),Object(X.jsx)("button",{onClick:function(){C(!S),L({blink:!S})},className:"button is-outlined m-4 ".concat(S?"is-success":"is-danger"),children:S?"Blink on":"Blink off"}),Object(X.jsx)("button",{onClick:function(){return j(!u)},className:"button is-outlined m-4 ".concat(u?"is-danger":"is-success"),children:u?"Manual mode":"Automatic mode"})]}),Object(X.jsx)("hr",{}),Object(X.jsx)("div",{className:"is-flex is-flex-centered",children:Object(X.jsx)("button",{onClick:function(){M({h:B,w:P,x:J,y:V,z:$,a:ne,manual:u}).then((function(e){return console.log(e)}))},className:"button is-outlined is-success m-4",children:"Save"})})]}),Object(X.jsxs)("div",{className:"column is-flex-centered is-flex-direction-column is-flex",children:[Object(X.jsx)("img",{src:tt,alt:"laser instructions",className:"zoom_img"}),Object(X.jsx)("br",{}),Object(X.jsx)("h3",{className:"has-text-success",children:"Canvas range (ft)"}),Object(X.jsxs)("p",{children:["Zmax: ",ue.toFixed(2)]}),Object(X.jsxs)("p",{children:["Zmin: ",re.toFixed(2)]}),Object(X.jsxs)("p",{children:["Xmax: ",pe.toFixed(2)]})]})]})})},nt=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(),i=Object(m.a)(s,2),r=i[0],l=i[1],o=Object(a.useState)([]),d=Object(m.a)(o,2),u=d[0],j=d[1],b=Object(a.useState)(!1),h=Object(m.a)(b,2),p=h[0],f=h[1],g=function(){f(!0),W().then((function(e){console.log(e),n(e.connected),l(e.port),j(e.logs),f(!1)}))};return Object(a.useEffect)((function(){g()}),[]),Object(X.jsx)("div",{className:"container",children:Object(X.jsx)("div",{className:"columns",children:Object(X.jsxs)("div",{className:"column",children:[Object(X.jsxs)("div",{children:[Object(X.jsxs)("h1",{className:"has-text-centered title is-size-4 ".concat(c?"has-text-success":"has-text-danger"),children:[c?"GPS connected at: ":"GPS disconnected",Object(X.jsx)("span",{children:c&&r})]}),Object(X.jsx)("div",{className:"is-flex is-flex-centered",children:Object(X.jsx)("button",{className:"button is-outlined ".concat(p&&"is-loading"),onClick:g,children:Object(X.jsx)(x.a,{icon:O.h})})})]}),Object(X.jsx)("hr",{}),Object(X.jsxs)("table",{className:"table is-fullwidth is-striped",children:[Object(X.jsx)("thead",{children:Object(X.jsxs)("tr",{children:[Object(X.jsx)("th",{children:" Timestamp "}),Object(X.jsx)("th",{children:" String "})]})}),Object(X.jsx)("tbody",{children:u.map((function(e,t){return Object(X.jsxs)("tr",{children:[Object(X.jsxs)("td",{children:[" ",(c=e[0],new Date(1e3*c).toLocaleString().split(", ")[1])," "]}),Object(X.jsxs)("td",{children:[" ",e[1]," "]})]},t);var c}))})]})]})})})},at=function(){var e=z("camConfig",{}),t=Object(m.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)([]),i=Object(m.a)(s,2),r=i[0],l=i[1],o=Object(a.useState)(c.crop),d=Object(m.a)(o,2),u=d[0],j=d[1],b=Object(a.useState)(c.camera),h=Object(m.a)(b,2),p=h[0],O=h[1],x=Object(a.useState)(c.camWidth),f=Object(m.a)(x,2),w=f[0],N=f[1],y=Object(a.useState)(c.camLength),k=Object(m.a)(y,2),S=k[0],C=k[1],E=Object(a.useState)(c.antennaX),A=Object(m.a)(E,2),P=A[0],H=A[1],F=Object(a.useState)(c.antennaY),W=Object(m.a)(F,2),M=W[0],T=W[1],L=Object(a.useRef)(),_=Object(a.useState)(c.videoHight),B=Object(m.a)(_,2),Y=B[0],D=B[1],R=Object(a.useState)(c.videoWidth),J=Object(m.a)(R,2),G=J[0],U=J[1],Z=u/w,V=Y/S;return Object(a.useEffect)((function(){if(new Promise(function(){var e=Object(v.a)(g.a.mark((function e(t,c){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.mediaDevices){e.next=33;break}return n=null,e.prev=2,e.next=5,navigator.mediaDevices.getUserMedia({audio:!0});case 5:e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("The browser has no access to the microphone of the device.");case 11:return e.prev=11,e.next=14,navigator.mediaDevices.getUserMedia({video:!0});case 14:e.sent,e.next=20;break;case 17:e.prev=17,e.t1=e.catch(11),console.error("The browser has no access to the camera of the device.");case 20:return e.prev=20,e.next=23,navigator.mediaDevices.enumerateDevices();case 23:n=(n=e.sent).filter((function(e){return"videoinput"===e.kind})),e.next=30;break;case 27:e.prev=27,e.t2=e.catch(20),console.error("There are no media devices available in this device.");case 30:t({devices:n}),e.next=34;break;case 33:c({error:"The media devices could not be checked"});case 34:case"end":return e.stop()}}),e,null,[[2,8],[11,17],[20,27]])})));return function(t,c){return e.apply(this,arguments)}}()).then((function(e){return l(e.devices)})),void 0!==p){var e={video:{deviceId:p.deviceId,width:G,height:Y}};navigator.mediaDevices.getUserMedia(e).then((function(e){L.current.srcObject=e}))}}),[]),Object(X.jsx)("div",{className:"container",children:Object(X.jsx)("div",{className:"columns",children:Object(X.jsxs)("div",{className:"column",children:[Object(X.jsx)("h1",{className:"has-text-centered title is-size-4",children:"Video devices"}),Object(X.jsx)("div",{className:"is-flex is-flex-centered",children:r.map((function(e){return Object(X.jsx)("button",{className:"button is-outlined m-4",onClick:function(){return function(e){var t={video:{deviceId:e.deviceId,width:G,height:Y}};navigator.mediaDevices.getUserMedia(t).then((function(e){L.current.srcObject=e})),O(e)}(e)},children:e.label})}))}),Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsx)(I,{label:"Video Width (px)",value:G,placeholder:"E.g: 800",changeHandler:U}),Object(X.jsx)(I,{label:"VideoHight (px)",value:Y,placeholder:"E.g: 600",changeHandler:D})]}),Object(X.jsxs)("div",{className:"columns",children:[Object(X.jsx)(I,{label:"Crop from right (px)",value:u,placeholder:"E.g: 100",changeHandler:j}),Object(X.jsx)(I,{label:"Camera Width (ft)",value:w,placeholder:"E.g: 20",changeHandler:N}),Object(X.jsx)(I,{label:"Camera Length (ft)",value:S,placeholder:"E.g: 40",changeHandler:C}),Object(X.jsx)(I,{label:"Antenna X position(ft)",value:P,placeholder:"E.g: 40",changeHandler:H}),Object(X.jsx)(I,{label:"Antenna Y position (ft)",value:M,placeholder:"E.g: 40",changeHandler:T}),Object(X.jsx)("div",{className:"is-flex is-flex-centered",children:Object(X.jsx)("button",{onClick:function(){n({crop:u,videoHight:Y,videoWidth:G,camWidth:w,camLength:S,antennaX:P,antennaY:M,kX:u/w,kY:Y/S,camera:p})},className:"button is-outlined is-success ml-4 mt-4",children:"Save"})})]}),Object(X.jsx)("hr",{}),Object(X.jsxs)("div",{className:"is-flex is-flex-centered is-flex-direction-column",children:[Object(X.jsxs)("div",{className:"is-flex is-flex-centered is-flex-direction-vertical",children:[Object(X.jsxs)("p",{className:"m-4",style:{transform:"rotate(-90deg)"},children:[S," ft"]}),Object(X.jsxs)("div",{style:{width:"".concat(u,"px"),height:"".concat(Y,"px")},children:[Object(X.jsx)("video",{autoPlay:!0,ref:L,style:{position:"absolute",clip:"rect(0, ".concat(u,"px, ").concat(Y,"px, 0)")}}),Object(X.jsx)("div",{className:"is-flex is-flex-centered m-0 p-0",style:{width:"10px",height:"10px",position:"absolute",transform:"translateX(".concat(P*Z-5,"px ) translateY(").concat(M*V-5,"px)"),color:"black",borderStyle:"solid",borderColor:"lime",borderRadius:"50%"}})]})]}),Object(X.jsxs)("p",{className:"m-1",children:[w," ft"]})]})]})})})},st=Object(d.c)(p),it=function(){return Object(X.jsxs)("div",{className:"container is-fullwidth",children:[Object(X.jsx)(Ke,{}),Object(X.jsx)(d.a,{store:st,children:Object(X.jsxs)(o.d,{children:[Object(X.jsx)(o.a,{exact:!0,from:"/",to:"/map"}),Object(X.jsx)(o.b,{path:"/config",component:q}),Object(X.jsx)(o.b,{path:"/laser",component:ct}),Object(X.jsx)(o.b,{path:"/gps",component:nt}),Object(X.jsx)(o.b,{path:"/cam",component:at}),Object(X.jsx)(o.b,{path:"/debug",component:et}),Object(X.jsx)(o.b,{path:"/map",component:qe})]})})]})};r.a.render(Object(X.jsx)(s.a.StrictMode,{children:Object(X.jsx)(l.a,{children:Object(X.jsx)(it,{})})}),document.getElementById("root"))}},[[297,1,2]]]);
//# sourceMappingURL=main.ed50fe75.chunk.js.map