{"version":3,"sources":["js/model.js","js/api.js","components/FileInput.jsx","components/NumberInput.jsx","js/helpers.js","assets/epsg_codes.pdf","assets/marooka-size.png","assets/marooka-side.png","components/Config.jsx","assets/audio/distance/1.mp3","assets/audio/distance/2.mp3","assets/audio/distance/3.mp3","assets/audio/distance/4.mp3","assets/audio/distance/5.mp3","assets/audio/distance/6.mp3","assets/audio/distance/7.mp3","assets/audio/distance/8.mp3","assets/audio/distance/9.mp3","assets/audio/distance/10.mp3","assets/audio/colors/black.mp3","assets/audio/colors/blue.mp3","assets/audio/colors/brown.mp3","assets/audio/colors/darkblue.mp3","assets/audio/colors/lightblue.mp3","assets/audio/colors/lightgreen.mp3","assets/audio/colors/orange.mp3","assets/audio/colors/pink.mp3","assets/audio/colors/purple.mp3","assets/audio/colors/red.mp3","assets/audio/colors/white.mp3","assets/audio/colors/yellow.mp3","assets/audio/colors/green.mp3","assets/audio/colors/purplewhite.mp3","assets/audio/colors/brownwhite.mp3","assets/audio/other/left_bay.mp3","assets/audio/other/right_bay.mp3","assets/audio/other/next_pile.mp3","assets/audio/beep/1beep.mp3","assets/audio/beep/2beep.mp3","assets/audio/beep/4beep.mp3","assets/audio/beep/8beep.mp3","assets/audio/beep/ibeep.mp3","js/audio.js","assets/marooka-top.bmp","components/CamDisplay.jsx","components/UserMap.jsx","components/NextPile.jsx","components/PileSummary.jsx","components/Home.jsx","components/Tab.jsx","components/Tabs.jsx","components/NavDebug.jsx","assets/laser.jpeg","components/LaserConfig.jsx","components/GPSStatus.jsx","components/CamStatus.jsx","components/App.jsx","index.js"],"names":["key","initial","waypoints","setStorage","obj","window","localStorage","setItem","JSON","stringify","nextPiles","distance","pile_id","setNextPiles","action","state","clearPile","index","tempPiles","parse","getItem","setWaypoints","placeWaypoint","id","newWaypoints","map","waypoint","placed","unplaceWaypoint","selectedColor","setSelectedColor","color","center","heading","lat","lng","truck","distY","distX","centDist","accuracy","rel_distance","rel_heading","week_timestamp","setCenter","beep","setBeep","host","location","hostname","socket","io","connect","setLatLng","a","console","log","url","axios","post","response","data","setHeading","setConfig","config","setRefWaypoint","getLaserStatus","get","getGPSStatus","setLaserConfig","payload","setLaserOn","setLaserBlink","getWaypoints","uploadFile","file","epsg","formData","FormData","append","headers","FileInput","useState","path","setPath","name","setName","fileStatus","setFileStatus","history","useHistory","useStoreActions","actions","useEffect","document","querySelector","addEventListener","e","localPath","target","files","localName","className","type","accept","icon","faUpload","onClick","then","res","selected","setTimeout","push","catch","message","rows","NumberInput","label","value","placeholder","changeHandler","size","step","onChange","useLocalStorage","initialValue","item","error","storedValue","setStoredValue","valueToStore","Function","sortByColor","byColor","forEach","trim","sortByColorPlaced","colors","black","blue","brown","darkblue","green","lightblue","lightgreen","orange","pink","purple","red","white","yellow","colorsFill","Config","localconfig","setLocalConfig","truckLen","setTruckLen","truckWid","setTruckWid","truckHei","setTruckHei","antennaX","setAntennaX","antennaY","setAntennaY","bay1","setBay1","bay2","setBay2","fromCenter","setFromCenter","laserX","setLaserX","laserY","setLaserY","laserZ","setLaserZ","laserScale","setLaserScale","reference","setReference","setEpsg","feedback","setFeedback","style","margin","href","epsgCodes","faFileAlt","faSearch","src","marooka","marookaSide","otherSounds","Audio","one","two","three","four","five","six","seven","eight","nine","ten","leftBay","rightBay","nextPile","colorSounds","purplewhite","brownwhite","beepSounds","far","beep1","close","beep2","closer","beep4","closest","beep8","beepi","playOther","sound","play","playColor","CamDisplay","videoRef","useRef","useStoreState","antennaXY","x","kX","y","kY","pile0","setPile0","pile1","setPile1","rotatePoint","dist","course","angle","Math","atan2","courseRad","PI","abs","cos","sin","undefined","pilePos","camera","constrains","video","deviceId","width","videoWidth","height","videoHight","navigator","mediaDevices","getUserMedia","s","current","srcObject","crop","autoPlay","ref","position","clip","transform","borderStyle","borderColor","borderRadius","mapboxgl","workerClass","require","default","INITIAL_VIEW_STATE","longitude","latitude","zoom","maxZoom","pitch","bearing","UserMap","camConfig","viewState","setViewState","autoCenter","setAutoCenter","cam","setCam","guides","setGuides","terrain","setTerrain","setTruck","verticalLine","setVerticalLine","bays","setBays","socketListener","on","msg","parsedMsg","parseFloat","from","to","length","off","getNextPiles","nearestPiles","distanceBay1","distanceBay2","closestBay1","closestBay2","closestDistanceBay1","closestDistanceBay2","point","getNearestPiles","timeOffset","leftColor","filter","w","rightColor","Object","keys","includes","initialViewState","controller","getTooltip","object","mapboxApiAccessToken","mapStyle","clear","lineWidthMaxPixels","lineWidthMinPixels","getRadius","d","getPosition","getColor","getFillColor","getLineColor","filled","stroked","pickable","opacity","bounds","image","coordinates","contour","wireframe","extruded","getPolygon","getLineWidth","getElevation","widthUnits","getWidth","getSourcePosition","getTargetPosition","targets","getPointers","toFixed","disabled","faGlobeAmericas","NextPile","progressValue","setProgressValue","progressColor","setProgressColor","range","playBeep","faFlag","max","PileSummary","pileColors","setPileColors","pilesPlaced","setPilesPlaced","faFlagCheckered","faLocationArrow","rotate","Home","Tab","active","useLocation","pathname","toLowerCase","Tabs","faMapMarked","faTools","faBug","faSun","faSatelliteDish","faVideo","GoogleApiWrapper","apiKey","google","setCourse","markerLatLng","setMarkerLatLng","mapProps","clickEvent","latLng","initialCenter","radius","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","min","onInput","sliderValue","LaserConfig","connected","setConnected","port","setPort","manual","setManual","loading","setLoading","setOn","blink","setBlink","rectWidth","setRectWidth","rectHeight","setRectHeight","targetX","setTargetX","targetY","setTargetY","targetZ","setTargetZ","targetA","setTargetA","minZ","setMinZ","maxZ","setMaxZ","maxX","setMaxX","handleLaserStatus","deg_to_rad","degrees","tan","handleRange","faRedo","h","z","laserImg","alt","GPSStatus","logs","setLogs","handleGPSStatus","timestamp","Date","toLocaleString","split","CamStatus","setCamConfig","devices","setDevices","setCrop","setCamera","camWidth","setCamWidth","camLength","setCamLength","vidReference","setVideoHight","setVideoWidth","Promise","resolve","reject","audio","enumerateDevices","device","kind","handleCam","store","createStore","model","App","exact","component","NavDebug","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f9726c01.chunk.js","sourcesContent":["import { action } from \"easy-peasy\";\r\n\r\nconst initial = {\r\n  waypoints: [],\r\n};\r\n\r\nconst getStorage = (key) => {\r\n  return JSON.parse(window.localStorage.getItem(key)) || initial[key];\r\n};\r\n\r\nconst setStorage = (key, obj) => {\r\n  window.localStorage.setItem(key, JSON.stringify(obj));\r\n};\r\n\r\nexport default {\r\n  nextPiles: [\r\n    { distance: null, pile_id: null },\r\n    { distance: null, pile_id: null },\r\n  ],\r\n  setNextPiles: action((state, nextPiles) => {\r\n    state.nextPiles = [...nextPiles];\r\n  }),\r\n\r\n  clearPile: action((state, index) => {\r\n    let tempPiles = [...state.nextPiles];\r\n    tempPiles[index] = {};\r\n    state.nextPiles = tempPiles;\r\n  }),\r\n\r\n  waypoints: getStorage(\"waypoints\"),\r\n\r\n  setWaypoints: action((state, waypoints) => {\r\n    setStorage(\"waypoints\", waypoints);\r\n    state.waypoints = [...waypoints];\r\n  }),\r\n\r\n  placeWaypoint: action((state, id) => {\r\n    let newWaypoints = state.waypoints.map((waypoint) => {\r\n      return waypoint.pile_id == id ? { ...waypoint, placed: true } : waypoint;\r\n    });\r\n    setStorage(\"waypoints\", newWaypoints);\r\n    state.waypoints = newWaypoints;\r\n  }),\r\n\r\n  unplaceWaypoint: action((state, id) => {\r\n    let newWaypoints = state.waypoints.map((waypoint) => {\r\n      return waypoint.pile_id == id ? { ...waypoint, placed: false } : waypoint;\r\n    });\r\n    setStorage(\"waypoints\", newWaypoints);\r\n    state.waypoints = newWaypoints;\r\n  }),\r\n\r\n  selectedColor: \"\",\r\n  setSelectedColor: action((state, color) => {\r\n    state.selectedColor = color;\r\n  }),\r\n\r\n  center: {\r\n    heading: 0,\r\n    lat: 0,\r\n    lng: 0,\r\n    truck: [\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n    ],\r\n    distY: [0, 0],\r\n    distX: [0, 0],\r\n    centDist: [{}, {}],\r\n    accuracy: 2,\r\n    rel_distance: 5,\r\n    rel_heading: 30,\r\n    week_timestamp: 0,\r\n  },\r\n  setCenter: action((state, center) => {\r\n    state.center = center;\r\n  }),\r\n  beep: false,\r\n  setBeep: action((state, beep) => {\r\n    state.beep = beep;\r\n  }),\r\n};\r\n","import axios from \"axios\";\r\nimport io from \"socket.io-client\";\r\n\r\n// const host = \"raspberrypi.local:9999\";\r\nconst host = `http://${window.location.hostname}:9999`;\r\n\r\nexport const socket = io.connect(`${host}`);\r\n\r\nexport const setLatLng = async (location) => {\r\n  console.log(\"... setting lat lng\");\r\n  const url = `${host}/api/location`;\r\n  const response = await axios.post(url, location);\r\n  return response.data;\r\n};\r\n\r\nexport const setHeading = async (heading) => {\r\n  console.log(\"... setting heading\");\r\n  const url = `${host}/api/heading`;\r\n  const response = await axios.post(url, heading);\r\n  return response.data;\r\n};\r\n\r\nexport const setConfig = async (config) => {\r\n  console.log(\"... setting config\");\r\n  const url = `${host}/api/config`;\r\n  const response = await axios.post(url, config);\r\n  return response.data;\r\n};\r\n\r\nexport const setRefBay = async (bay) => {\r\n  console.log(\"... setting reference bay\");\r\n  const url = `${host}/api/bay`;\r\n  const response = await axios.post(url, bay);\r\n  return response.data;\r\n};\r\n\r\nexport const setRefWaypoint = async (waypoint) => {\r\n  console.log(\"... setting waypoint\");\r\n  const url = `${host}/api/waypoint`;\r\n  const response = await axios.post(url, waypoint);\r\n  return response.data;\r\n};\r\n\r\nexport const getLocation = async () => {\r\n  console.log(\"... getting location and heading\");\r\n  const url = `${host}/api/status`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nexport const getSerialPorts = async () => {\r\n  console.log(\"... getting serial ports\");\r\n  const url = `${host}/api/serial_ports`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nexport const getLaserStatus = async () => {\r\n  console.log(\"... getting laser serial\");\r\n  const url = `${host}/api/laser/serial`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nexport const getGPSStatus = async () => {\r\n  console.log(\"... getting laser serial\");\r\n  const url = `${host}/api/gps/serial`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nexport const setLaserConfig = async (payload) => {\r\n  console.log(\"... setting laser config\");\r\n  const url = `${host}/api/laser/config`;\r\n  const response = await axios.post(url, payload);\r\n  return response.data;\r\n};\r\n\r\nexport const setLaserOn = async (state) => {\r\n  console.log(\"... setting laser on\");\r\n  const url = `${host}/api/laser/on`;\r\n  const response = await axios.post(url, state);\r\n  return response.data;\r\n};\r\n\r\nexport const setLaserBlink = async (state) => {\r\n  console.log(\"... setting laser blink\");\r\n  const url = `${host}/api/laser/blink`;\r\n  const response = await axios.post(url, state);\r\n  return response.data;\r\n};\r\n\r\nexport const getWaypoints = async () => {\r\n  console.log(\"... getting waypoints\");\r\n  const url = `${host}/api/waypoints`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nexport const uploadFile = async (file, epsg) => {\r\n  console.log(\"... uploading file\");\r\n  const url = `${host}/api/file`;\r\n  let formData = new FormData();\r\n  formData.append(\"file\", file);\r\n  formData.append(\"code\", epsg);\r\n  const response = await axios.post(url, formData, {\r\n    headers: {\r\n      \"Content-Type\": \"multipart/form-data\",\r\n    },\r\n  });\r\n  return response.data;\r\n};\r\n","import { faUpload } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useStoreActions } from \"easy-peasy\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getWaypoints, uploadFile } from \"../js/api\";\r\n\r\nconst FileInput = () => {\r\n  const [path, setPath] = useState(\"\");\r\n  const [name, setName] = useState(\"Nothing selected yet\");\r\n  const [fileStatus, setFileStatus] = useState({});\r\n  const history = useHistory();\r\n  const setWaypoints = useStoreActions((actions) => actions.setWaypoints);\r\n\r\n  useEffect(() => {\r\n    const handleFiles = (e) => {\r\n      let localPath = e.target.files[0];\r\n      let localName = e.target.files[0].name;\r\n      setPath(localPath);\r\n      setName(localName);\r\n    };\r\n\r\n    const inputElement = document.querySelector(\".file-input\");\r\n    inputElement.addEventListener(\"change\", handleFiles, false);\r\n  }, []);\r\n\r\n  const handleFiles = (file) => {\r\n    uploadFile(file)\r\n      .then((res) => {\r\n        setFileStatus(res);\r\n        getWaypoints().then((response) => {\r\n          setWaypoints(\r\n            response.waypoints.map((waypoint) => ({\r\n              ...waypoint,\r\n              selected: true,\r\n            }))\r\n          );\r\n        });\r\n        setTimeout(() => {\r\n          history.push(\"/map\");\r\n        }, 1000);\r\n      })\r\n      .catch(() => setFileStatus({ message: false }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"columns\">\r\n      <div className=\"column file has-name\">\r\n        <label className=\"file-label\">\r\n          <input className=\"file-input\" type=\"file\" accept=\".csv, .xlsx\" />\r\n          <span className=\"file-cta\">\r\n            <span className=\"file-icon\">\r\n              <FontAwesomeIcon icon={faUpload} />\r\n            </span>\r\n            <span className=\"file-label\">Choose a file ...</span>\r\n          </span>\r\n          <span className=\"file-name\">{name}</span>\r\n        </label>\r\n      </div>\r\n      <div className=\"column\">\r\n        {path ? (\r\n          <div className=\"is-flex is-justify-content-center\">\r\n            <button\r\n              className=\"button is-outlined is-success\"\r\n              onClick={() => handleFiles(path)}\r\n            >\r\n              Upload\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n      <div className=\"column\">\r\n        {fileStatus.message ? (\r\n          <div className=\"is-flex is-align-content-center is-flex-direction-column\">\r\n            <p\r\n              className={\r\n                fileStatus.message ? \"has-text-success\" : \"has-text-fail\"\r\n              }\r\n            >\r\n              {fileStatus.message ? \"Success\" : \"Fail\"}\r\n            </p>\r\n            <p>Waypoints: {fileStatus.rows}</p>\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileInput;\r\n","const NumberInput = ({\r\n  label,\r\n  value,\r\n  placeholder,\r\n  changeHandler,\r\n  size = \"is-normal\",\r\n}) => {\r\n  return (\r\n    <div className=\"field column\">\r\n      <label className=\"label\">{label}</label>\r\n      <p className=\"control\">\r\n        <input\r\n          className={`input ${size}`}\r\n          type=\"number\"\r\n          step={0.1}\r\n          placeholder={placeholder}\r\n          onChange={(e) => changeHandler(e.target.value)}\r\n          value={value}\r\n        />\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NumberInput;\r\n","import { useState } from \"react\";\r\n\r\nexport const useLocalStorage = (key, initialValue) => {\r\n  // State to store our value\r\n  // Pass initial state function to useState so logic is only executed once\r\n  const [storedValue, setStoredValue] = useState(() => {\r\n    try {\r\n      // Get from local storage by key\r\n      const item = window.localStorage.getItem(key);\r\n      // Parse stored json or if none return initialValue\r\n      return item ? JSON.parse(item) : initialValue;\r\n    } catch (error) {\r\n      // If error also return initialValue\r\n      console.log(error);\r\n      return initialValue;\r\n    }\r\n  });\r\n  // Return a wrapped version of useState's setter function that ...\r\n  // ... persists the new value to localStorage.\r\n  const setValue = (value) => {\r\n    try {\r\n      // Allow value to be a function so we have same API as useState\r\n      const valueToStore =\r\n        value instanceof Function ? value(storedValue) : value;\r\n      // Save state\r\n      setStoredValue(valueToStore);\r\n      // Save to local storage\r\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n    } catch (error) {\r\n      // A more advanced implementation would handle the error case\r\n      console.log(error);\r\n    }\r\n  };\r\n  return [storedValue, setValue];\r\n};\r\n\r\nexport const sortByColor = (waypoints) => {\r\n  const byColor = {};\r\n  waypoints.forEach((waypoint) => {\r\n    if (byColor[waypoint.color?.trim()]) byColor[waypoint.color?.trim()] += 1;\r\n    else byColor[waypoint.color?.trim()] = 1;\r\n  });\r\n  return byColor;\r\n};\r\n\r\nexport const sortByColorPlaced = (waypoints) => {\r\n  const byColor = {};\r\n  waypoints.forEach((waypoint) => {\r\n    if (waypoint.placed) {\r\n      if (byColor[waypoint.color?.trim()]) byColor[waypoint.color?.trim()] += 1;\r\n      else byColor[waypoint.color?.trim()] = 1;\r\n    }\r\n  });\r\n  return byColor;\r\n};\r\n\r\nexport const colors = {\r\n  black: [0, 0, 0],\r\n  blue: [0, 0, 255],\r\n  brown: [165, 42, 42],\r\n  darkblue: [0, 0, 139],\r\n  green: [0, 255, 0],\r\n  lightblue: [135, 206, 235],\r\n  lightgreen: [144, 238, 144],\r\n  orange: [255, 165, 0],\r\n  pink: [255, 105, 180],\r\n  purple: [128, 0, 128],\r\n  red: [255, 0, 0],\r\n  white: [255, 255, 255],\r\n  yellow: [255, 255, 0],\r\n};\r\n\r\nexport const colorsFill = {\r\n  black: [0, 0, 0, 128],\r\n  blue: [0, 0, 255, 128],\r\n  brown: [165, 42, 42, 128],\r\n  darkblue: [0, 0, 139, 128],\r\n  green: [0, 255, 0, 128],\r\n  lightblue: [135, 206, 235, 128],\r\n  lightgreen: [144, 238, 144, 128],\r\n  orange: [255, 165, 0, 128],\r\n  pink: [255, 105, 180, 128],\r\n  purple: [128, 0, 128, 128],\r\n  red: [255, 0, 0, 128],\r\n  white: [255, 255, 255, 128],\r\n  yellow: [255, 255, 0, 128],\r\n};\r\n\r\nexport const getTime = (timestamp) => {\r\n  const stamp = new Date(timestamp * 1000);\r\n  return stamp.toLocaleString().split(\", \")[1];\r\n};\r\n\r\nexport const getGuides = (waypoints) => {\r\n  let lats = waypoints.map((x) => x.lng);\r\n  lats = groupByNeighbor(lats, 0.00001);\r\n  const middles = getMiddles(lats);\r\n  const lngs = waypoints.map((x) => x.lat);\r\n  const minLng = Math.min(...lngs) - 0.0001;\r\n  const maxLng = Math.max(...lngs) + 0.0001;\r\n  const lines = [];\r\n  middles.forEach((e) => {\r\n    lines.push({ from: [e, minLng], to: [e, maxLng] });\r\n  });\r\n  return lines;\r\n};\r\n\r\nconst groupByNeighbor = (arr, th) => {\r\n  let result = [];\r\n  let last;\r\n\r\n  arr.sort((a, b) => a - b);\r\n  arr.forEach((e, i) => {\r\n    if (i == 0) {\r\n      last = e;\r\n      result.push(e);\r\n    } else {\r\n      if (e > th + last) {\r\n        last = e;\r\n        result.push(e);\r\n      }\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nconst getMiddles = (arr) => {\r\n  const result = [];\r\n\r\n  arr.forEach((e, i) => {\r\n    if (i > 0) result.push((e + arr[i - 1]) / 2.0);\r\n  });\r\n\r\n  return result;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/epsg_codes.c38b8103.pdf\";","export default __webpack_public_path__ + \"static/media/marooka-size.51b49781.png\";","export default __webpack_public_path__ + \"static/media/marooka-side.6ce15895.png\";","import FileInput from \"./FileInput\";\r\nimport NumberInput from \"./NumberInput\";\r\nimport { useState } from \"react\";\r\nimport { setConfig } from \"../js/api\";\r\nimport { useLocalStorage } from \"../js/helpers\";\r\nimport epsgCodes from \"../assets/epsg_codes.pdf\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFileAlt, faSearch } from \"@fortawesome/free-solid-svg-icons\";\r\nimport marooka from \"../assets/marooka-size.png\";\r\nimport marookaSide from \"../assets/marooka-side.png\";\r\n\r\nconst Config = () => {\r\n  const [localconfig, setLocalConfig] = useLocalStorage(\"config\", {});\r\n  const [truckLen, setTruckLen] = useState(localconfig.truckLen);\r\n  const [truckWid, setTruckWid] = useState(localconfig.truckWid);\r\n  const [truckHei, setTruckHei] = useState(localconfig.truckHei);\r\n  const [antennaX, setAntennaX] = useState(localconfig.antennaX);\r\n  const [antennaY, setAntennaY] = useState(localconfig.antennaY);\r\n  const [bay1, setBay1] = useState(localconfig.bay1);\r\n  const [bay2, setBay2] = useState(localconfig.bay2);\r\n  const [fromCenter, setFromCenter] = useState(localconfig.fromCenter);\r\n  const [laserX, setLaserX] = useState(localconfig.laserX);\r\n  const [laserY, setLaserY] = useState(localconfig.laserY);\r\n  const [laserZ, setLaserZ] = useState(localconfig.laserZ);\r\n  const [laserScale, setLaserScale] = useState(localconfig.laserScale);\r\n  const [reference, setReference] = useState(localconfig.reference);\r\n  const [epsg, setEpsg] = useState(localconfig.epsg);\r\n  const [feedback, setFeedback] = useState(\"\");\r\n\r\n  const uploadConfig = () => {\r\n    const payload = {\r\n      truckLen,\r\n      truckWid,\r\n      truckHei,\r\n      antennaX,\r\n      antennaY,\r\n      bay1,\r\n      bay2,\r\n      fromCenter,\r\n      epsg,\r\n      laserX,\r\n      laserY,\r\n      laserZ,\r\n      laserScale,\r\n      reference,\r\n    };\r\n    setLocalConfig(payload);\r\n    setConfig(payload)\r\n      .then(() => setFeedback(\"Success\"))\r\n      .catch(() => setFeedback(\"Fail\"));\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"columns\">\r\n        <div className=\"column\">\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Truck length\"\r\n              value={truckLen}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTruckLen}\r\n            />\r\n            <NumberInput\r\n              label=\"Truck width\"\r\n              value={truckWid}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTruckWid}\r\n            />\r\n            <NumberInput\r\n              label=\"Truck height\"\r\n              value={truckHei}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTruckHei}\r\n            />\r\n          </div>\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Antenna from left\"\r\n              value={antennaX}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setAntennaX}\r\n            />\r\n            <NumberInput\r\n              label=\"Antenna from truck head\"\r\n              value={antennaY}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setAntennaY}\r\n            />\r\n          </div>\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Bay 1 from truck head\"\r\n              value={bay1}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setBay1}\r\n            />\r\n            <NumberInput\r\n              label=\"Bay 2 from truck head\"\r\n              value={bay2}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setBay2}\r\n            />\r\n            <NumberInput\r\n              label=\"Distance from center\"\r\n              value={fromCenter}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setFromCenter}\r\n            />\r\n          </div>\r\n          <hr style={{ margin: \".25em\" }} />\r\n          <div className=\"\">\r\n            <h2 className=\"has-text-centered\">Laser distances (ft)</h2>\r\n            <div className=\"columns\">\r\n              <NumberInput\r\n                label=\"From left\"\r\n                value={laserX}\r\n                placeholder=\"E.g: 5\"\r\n                changeHandler={setLaserX}\r\n              />\r\n              <NumberInput\r\n                label=\"From head\"\r\n                value={laserY}\r\n                placeholder=\"E.g: 5\"\r\n                changeHandler={setLaserY}\r\n              />\r\n              <NumberInput\r\n                label=\"From ground\"\r\n                value={laserZ}\r\n                placeholder=\"E.g: 5\"\r\n                changeHandler={setLaserZ}\r\n              />\r\n              <div className=\"field column\">\r\n                <label className=\"label\">Reference</label>\r\n                <div className=\"control\">\r\n                  <div className=\"select\">\r\n                    <select onChange={(e) => setReference(e.target.value)}>\r\n                      <option value=\"bay1\">Bay 1</option>\r\n                      <option value=\"bay2\">Bay 2</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <NumberInput\r\n                label=\"Scale\"\r\n                value={laserScale}\r\n                placeholder=\"E.g: 1\"\r\n                changeHandler={setLaserScale}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"EPSG code\"\r\n              value={epsg}\r\n              placeholder=\"E.g: 6588\"\r\n              changeHandler={setEpsg}\r\n            />\r\n            <div className=\"column is-flex-direction-column is-flex is-flex-centered\">\r\n              <p className=\"heading has-text-link\">EPSG Reference</p>\r\n              <a\r\n                href={epsgCodes}\r\n                target=\"blank\"\r\n                className=\"has-text-white title is-2\"\r\n              >\r\n                <FontAwesomeIcon icon={faFileAlt} />\r\n              </a>\r\n            </div>\r\n            <div className=\"column is-flex-direction-column is-flex is-flex-centered\">\r\n              <p className=\"heading has-text-link\">EPSG Browser</p>\r\n              <a\r\n                href=\"https://epsg.io/\"\r\n                target=\"blank\"\r\n                className=\"has-text-white title is-2\"\r\n              >\r\n                <FontAwesomeIcon icon={faSearch} />\r\n              </a>\r\n            </div>\r\n            <div className=\"column is-flex is-justify-content-center is-align-content-center\">\r\n              <button className=\"button ml-2\" onClick={uploadConfig}>\r\n                Save\r\n              </button>\r\n              <p\r\n                className={`success ml-2 ${\r\n                  feedback == \"Success\" ? \"has-text-success\" : \"has-text-danger\"\r\n                }`}\r\n              >\r\n                {feedback}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <hr style={{ margin: \".5em\" }} />\r\n          <FileInput />\r\n        </div>\r\n\r\n        <div className=\"column is-centered has-text-centered\">\r\n          <img src={marooka} />\r\n          <img src={marookaSide} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Config;\r\n","export default __webpack_public_path__ + \"static/media/1.2999e734.mp3\";","export default __webpack_public_path__ + \"static/media/2.c90484f3.mp3\";","export default __webpack_public_path__ + \"static/media/3.451a053d.mp3\";","export default __webpack_public_path__ + \"static/media/4.3d33a969.mp3\";","export default __webpack_public_path__ + \"static/media/5.0b9156e3.mp3\";","export default __webpack_public_path__ + \"static/media/6.52edbbb5.mp3\";","export default __webpack_public_path__ + \"static/media/7.b473eb3a.mp3\";","export default __webpack_public_path__ + \"static/media/8.55fb2017.mp3\";","export default __webpack_public_path__ + \"static/media/9.308dc1bf.mp3\";","export default __webpack_public_path__ + \"static/media/10.1fbcf1e7.mp3\";","export default __webpack_public_path__ + \"static/media/black.67345e6d.mp3\";","export default __webpack_public_path__ + \"static/media/blue.603a17d2.mp3\";","export default __webpack_public_path__ + \"static/media/brown.aa74bbbb.mp3\";","export default __webpack_public_path__ + \"static/media/darkblue.587d78fd.mp3\";","export default __webpack_public_path__ + \"static/media/lightblue.9a9ee83a.mp3\";","export default __webpack_public_path__ + \"static/media/lightgreen.d7c408fe.mp3\";","export default __webpack_public_path__ + \"static/media/orange.42e333b5.mp3\";","export default __webpack_public_path__ + \"static/media/pink.f914d206.mp3\";","export default __webpack_public_path__ + \"static/media/purple.8e39b00d.mp3\";","export default __webpack_public_path__ + \"static/media/red.d598f0dc.mp3\";","export default __webpack_public_path__ + \"static/media/white.a09c2726.mp3\";","export default __webpack_public_path__ + \"static/media/yellow.1d5be675.mp3\";","export default __webpack_public_path__ + \"static/media/green.8c2c03a6.mp3\";","export default __webpack_public_path__ + \"static/media/purplewhite.08127fb1.mp3\";","export default __webpack_public_path__ + \"static/media/brownwhite.f5c411c7.mp3\";","export default __webpack_public_path__ + \"static/media/left_bay.ba74ee7d.mp3\";","export default __webpack_public_path__ + \"static/media/right_bay.0fce9298.mp3\";","export default __webpack_public_path__ + \"static/media/next_pile.aa5d59d6.mp3\";","export default __webpack_public_path__ + \"static/media/1beep.02416d27.mp3\";","export default __webpack_public_path__ + \"static/media/2beep.44a9a09a.mp3\";","export default __webpack_public_path__ + \"static/media/4beep.511984ec.mp3\";","export default __webpack_public_path__ + \"static/media/8beep.4d330e41.mp3\";","export default __webpack_public_path__ + \"static/media/ibeep.98e6c448.mp3\";","import one from \"../assets/audio/distance/1.mp3\";\r\nimport two from \"../assets/audio/distance/2.mp3\";\r\nimport three from \"../assets/audio/distance/3.mp3\";\r\nimport four from \"../assets/audio/distance/4.mp3\";\r\nimport five from \"../assets/audio/distance/5.mp3\";\r\nimport six from \"../assets/audio/distance/6.mp3\";\r\nimport seven from \"../assets/audio/distance/7.mp3\";\r\nimport eight from \"../assets/audio/distance/8.mp3\";\r\nimport nine from \"../assets/audio/distance/9.mp3\";\r\nimport ten from \"../assets/audio/distance/10.mp3\";\r\n\r\nimport black from \"../assets/audio/colors/black.mp3\";\r\nimport blue from \"../assets/audio/colors/blue.mp3\";\r\nimport brown from \"../assets/audio/colors/brown.mp3\";\r\nimport darkblue from \"../assets/audio/colors/darkblue.mp3\";\r\nimport lightblue from \"../assets/audio/colors/lightblue.mp3\";\r\nimport lightgreen from \"../assets/audio/colors/lightgreen.mp3\";\r\nimport orange from \"../assets/audio/colors/orange.mp3\";\r\nimport pink from \"../assets/audio/colors/pink.mp3\";\r\nimport purple from \"../assets/audio/colors/purple.mp3\";\r\nimport red from \"../assets/audio/colors/red.mp3\";\r\nimport white from \"../assets/audio/colors/white.mp3\";\r\nimport yellow from \"../assets/audio/colors/yellow.mp3\";\r\nimport green from \"../assets/audio/colors/green.mp3\";\r\nimport purplewhite from \"../assets/audio/colors/purplewhite.mp3\";\r\nimport brownwhite from \"../assets/audio/colors/brownwhite.mp3\";\r\n\r\nimport leftBay from \"../assets/audio/other/left_bay.mp3\";\r\nimport rightBay from \"../assets/audio/other/right_bay.mp3\";\r\nimport nextPile from \"../assets/audio/other/next_pile.mp3\";\r\n\r\nimport beep1 from \"../assets/audio/beep/1beep.mp3\";\r\nimport beep2 from \"../assets/audio/beep/2beep.mp3\";\r\nimport beep4 from \"../assets/audio/beep/4beep.mp3\";\r\nimport beep8 from \"../assets/audio/beep/8beep.mp3\";\r\nimport beepi from \"../assets/audio/beep/ibeep.mp3\";\r\n\r\nconst distanceSounds = [\r\n  new Audio(one),\r\n  new Audio(two),\r\n  new Audio(three),\r\n  new Audio(four),\r\n  new Audio(five),\r\n  new Audio(six),\r\n  new Audio(seven),\r\n  new Audio(eight),\r\n  new Audio(nine),\r\n  new Audio(ten),\r\n];\r\n\r\nconst otherSounds = {\r\n  leftBay: new Audio(leftBay),\r\n  rightBay: new Audio(rightBay),\r\n  nextPile: new Audio(nextPile),\r\n};\r\n\r\nconst colorSounds = {\r\n  black: new Audio(black),\r\n  blue: new Audio(blue),\r\n  brown: new Audio(brown),\r\n  darkblue: new Audio(darkblue),\r\n  lightblue: new Audio(lightblue),\r\n  lightgreen: new Audio(lightgreen),\r\n  orange: new Audio(orange),\r\n  pink: new Audio(pink),\r\n  purple: new Audio(purple),\r\n  red: new Audio(red),\r\n  white: new Audio(white),\r\n  yellow: new Audio(yellow),\r\n  green: new Audio(green),\r\n  purplewhite: new Audio(purplewhite),\r\n  brownwhite: new Audio(brownwhite),\r\n};\r\n\r\nconst beepSounds = {\r\n  far: new Audio(beep1),\r\n  close: new Audio(beep2),\r\n  closer: new Audio(beep4),\r\n  closest: new Audio(beep8),\r\n  target: new Audio(beepi),\r\n};\r\n\r\nexport const playDistance = (distance) => {\r\n  const dist = parseInt(distance);\r\n  if (dist > 0 && dist < 11) {\r\n    distanceSounds[dist - 1].play();\r\n  }\r\n};\r\n\r\nexport const playOther = (sound) => {\r\n  if (otherSounds[sound]) otherSounds[sound].play();\r\n};\r\n\r\nexport const playColor = (color) => {\r\n  if (colorSounds[color]) colorSounds[color].play();\r\n};\r\n\r\nexport const playBeep = (distance) => {\r\n  console.log(\"PLay sound\", distance);\r\n  const range = {\r\n    far: 25,\r\n    close: 17,\r\n    closer: 10,\r\n    target: 3,\r\n  };\r\n  if (distance >= range.far) {\r\n    beepSounds.far.play();\r\n  }\r\n  if (distance < range.far && distance >= range.close) {\r\n    beepSounds.close.play();\r\n  }\r\n  if (distance < range.close && distance >= range.closer) {\r\n    beepSounds.closer.play();\r\n  }\r\n  if (distance < range.closer && distance >= range.target) {\r\n    beepSounds.closest.play();\r\n  }\r\n  if (distance < range.target) {\r\n    beepSounds.target.play();\r\n  }\r\n};\r\n","export default __webpack_public_path__ + \"static/media/marooka-top.0316a837.bmp\";","import { useStoreState } from \"easy-peasy\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { ScaleControl } from \"react-map-gl\";\n\nconst CamDisplay = ({ config }) => {\n  const videoRef = useRef();\n  const center = useStoreState((state) => state.center);\n  const antennaXY = {\n    x: config.antennaX * config.kX - 5,\n    y: config.antennaY * config.kY - 5,\n  };\n  const [pile0, setPile0] = useState({ x: -4, y: -4 });\n  const [pile1, setPile1] = useState({ x: 4, y: 4 });\n\n  useEffect(() => {\n    const rotatePoint = (dist, course) => {\n      const angle = Math.atan2(dist.y, dist.x);\n      const courseRad = (course * Math.PI) / 180;\n\n      const result = {\n        x: dist.abs * Math.cos(angle + courseRad),\n        y: dist.abs * Math.sin(angle + courseRad),\n      };\n      return result;\n    };\n\n    if (center.centDist !== undefined) {\n      const pilePos = [\n        rotatePoint(center.centDist[0], center.heading),\n        rotatePoint(center.centDist[1], center.heading),\n      ];\n\n      setPile0({\n        x: antennaXY.x + pilePos[0].x * config.kX,\n        y: antennaXY.y - pilePos[0].y * config.kY,\n      });\n      setPile1({\n        x: antennaXY.x + pilePos[1].x * config.kX,\n        y: antennaXY.y - pilePos[1].y * config.kY,\n      });\n    }\n  }, [center]);\n\n  useEffect(() => {\n    if (config.camera !== undefined) {\n      const constrains = {\n        video: {\n          deviceId: config.camera.deviceId,\n          width: config.videoWidth,\n          height: config.videoHight,\n        },\n      };\n      navigator.mediaDevices.getUserMedia(constrains).then((s) => {\n        videoRef.current.srcObject = s;\n      });\n    }\n  }, []);\n\n  return (\n    <div>\n      <div\n        className=\"vid-container\"\n        style={{\n          width: `${config.crop}px`,\n          height: `${config.videoHight}px`,\n        }}\n      >\n        <video\n          autoPlay\n          ref={videoRef}\n          style={{\n            position: \"absolute\",\n            clip: `rect(0, ${config.crop}px, ${config.videoHight}px, 0)`,\n          }}\n        />\n        {/* Center indicator */}\n        <div\n          className=\"is-flex is-flex-centered m-0 p-0\"\n          style={{\n            width: \"10px\",\n            height: \"10px\",\n            position: \"absolute\",\n            transform: `translateX(${antennaXY.x}px) translateY(${antennaXY.y}px)`,\n            color: \"black\",\n            borderStyle: \"solid\",\n            borderColor: \"lime\",\n            borderRadius: \"50%\",\n          }}\n        />\n\n        {/* PILE 1 */}\n        <div\n          className=\"is-flex is-flex-centered m-0 p-0\"\n          style={{\n            width: \"10px\",\n            height: \"10px\",\n            position: \"absolute\",\n            transform: `translateX(${pile0.x}px) translateY(${pile0.y}px)`,\n            color: \"black\",\n            borderStyle: \"solid\",\n            borderColor: \"cyan\",\n            borderRadius: \"50%\",\n          }}\n        />\n        {/* PILE 2 */}\n        <div\n          className=\"is-flex is-flex-centered m-0 p-0\"\n          style={{\n            width: \"10px\",\n            height: \"10px\",\n            position: \"absolute\",\n            transform: `translateX(${pile1.x}px) translateY(${pile1.y}px)`,\n            color: \"black\",\n            borderStyle: \"solid\",\n            borderColor: \"aqua\",\n            borderRadius: \"50%\",\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default CamDisplay;\n","import { useStoreActions, useStoreState } from \"easy-peasy\";\r\nimport DeckGL from \"@deck.gl/react\";\r\nimport { MapView } from \"@deck.gl/core\";\r\nimport {\r\n  BitmapLayer,\r\n  PolygonLayer,\r\n  ScatterplotLayer,\r\n  LineLayer,\r\n} from \"@deck.gl/layers\";\r\nimport { StaticMap } from \"react-map-gl\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getWaypoints, setRefWaypoint, socket } from \"../js/api\";\r\nimport { useLocalStorage, colors, colorsFill, getGuides } from \"../js/helpers\";\r\nimport { playColor, playOther } from \"../js/audio\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport marooka from \"../assets/marooka-top.bmp\";\r\nimport CamDisplay from \"./CamDisplay\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faGlobeAmericas } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nmapboxgl.workerClass =\r\n  // eslint-disable-next-line import/no-webpack-loader-syntax\r\n  require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\r\n\r\nconst MAPBOX_ACCESS_TOKEN =\r\n  \"pk.eyJ1Ijoia20xMTVmcmFuY28iLCJhIjoiY2t0eXQ3cHBhMGI3aTMxcG14dnN0OHJveSJ9.LWxkBiVPF9UfGWMI4sWakQ\";\r\n\r\nconst INITIAL_VIEW_STATE = {\r\n  longitude: -122.123801,\r\n  latitude: 37.893394,\r\n  zoom: 21,\r\n  maxZoom: 21,\r\n  pitch: 60,\r\n  bearing: 0,\r\n};\r\n\r\nconst UserMap = () => {\r\n  const center = useStoreState((state) => state.center);\r\n  const setCenter = useStoreActions((actions) => actions.setCenter);\r\n  const beep = useStoreState((state) => state.beep);\r\n  const setBeep = useStoreActions((actions) => actions.setBeep);\r\n\r\n  const [camConfig, setCamConfig] = useLocalStorage(\"camConfig\", {});\r\n\r\n  const [viewState, setViewState] = useState(INITIAL_VIEW_STATE);\r\n  const [autoCenter, setAutoCenter] = useState(true);\r\n  const [cam, setCam] = useState(false);\r\n  const [guides, setGuides] = useState();\r\n  const [terrain, setTerrain] = useState(null);\r\n\r\n  const [truck, setTruck] = useState([\r\n    { lat: 0, lng: 0 },\r\n    { lat: 0, lng: 0 },\r\n    { lat: 0, lng: 0 },\r\n    { lat: 0, lng: 0 },\r\n  ]);\r\n  const [verticalLine, setVerticalLine] = useState({});\r\n  const [bays, setBays] = useState([\r\n    { lat: 0, lng: 0 },\r\n    { lat: 0, lng: 0 },\r\n  ]);\r\n  const nextPiles = useStoreState((state) => state.nextPiles);\r\n  const setNextPiles = useStoreActions((actions) => actions.setNextPiles);\r\n  const waypoints = useStoreState((state) => state.waypoints);\r\n  const setWaypoints = useStoreActions((actions) => actions.setWaypoints);\r\n  const placeWaypoint = useStoreActions((actions) => actions.placeWaypoint);\r\n  const unplaceWaypoint = useStoreActions((actions) => actions.unplaceWaypoint);\r\n  const [initialCenter, setInitialCenter] = useLocalStorage(\"debugCenter\", {\r\n    lat: 0,\r\n    lng: 0,\r\n  });\r\n  const selectedColor = useStoreState((state) => state.selectedColor);\r\n\r\n  const socketListener = () => {\r\n    socket.on(\"message\", (msg) => {\r\n      const parsedMsg = JSON.parse(msg);\r\n      setCenter(parsedMsg);\r\n      setViewState({\r\n        ...viewState,\r\n        longitude: parseFloat(parsedMsg.lng),\r\n        latitude: parseFloat(parsedMsg.lat),\r\n        bearing: parseFloat(parsedMsg.heading),\r\n      });\r\n\r\n      setTruck([\r\n        { lat: parsedMsg.truck[0][0], lng: parsedMsg.truck[0][1] },\r\n        { lat: parsedMsg.truck[1][0], lng: parsedMsg.truck[1][1] },\r\n        { lat: parsedMsg.truck[2][0], lng: parsedMsg.truck[2][1] },\r\n        { lat: parsedMsg.truck[3][0], lng: parsedMsg.truck[3][1] },\r\n        { lat: parsedMsg.truck[0][0], lng: parsedMsg.truck[0][1] },\r\n      ]);\r\n\r\n      setBays([\r\n        { lat: parsedMsg.bays[0][0], lng: parsedMsg.bays[0][1] },\r\n        { lat: parsedMsg.bays[1][0], lng: parsedMsg.bays[1][1] },\r\n      ]);\r\n\r\n      setVerticalLine([\r\n        {\r\n          from: [parsedMsg.truck[4][1], parsedMsg.truck[4][0]],\r\n          to: [parsedMsg.truck[5][1], parsedMsg.truck[5][0]],\r\n        },\r\n      ]);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getWaypoints().then((res) => {\r\n      setGuides(res.guides);\r\n      if (res.waypoints.length > 0) {\r\n        setCenter({ ...center, ...res.waypoints[0] });\r\n        setViewState({\r\n          ...viewState,\r\n          latitude: res.waypoints[0].lat,\r\n          longitude: res.waypoints[0].lng,\r\n        });\r\n      }\r\n    });\r\n\r\n    socketListener();\r\n\r\n    return () => {\r\n      socket.off(\"message\");\r\n    };\r\n  }, []);\r\n\r\n  const getNearestPiles = (waypoints, bays) => {\r\n    let distanceBay1;\r\n    let distanceBay2;\r\n    let closestBay1;\r\n    let closestBay2;\r\n    let closestDistanceBay1 = 10000;\r\n    let closestDistanceBay2 = 10000;\r\n\r\n    waypoints.forEach((point) => {\r\n      if (\r\n        !point.placed &&\r\n        (selectedColor == point.color || selectedColor == \"\")\r\n      ) {\r\n        distanceBay1 =\r\n          (point.lat - bays[0].lat) ** 2 + (point.lng - bays[0].lng) ** 2;\r\n        distanceBay2 =\r\n          (point.lat - bays[1].lat) ** 2 + (point.lng - bays[1].lng) ** 2;\r\n        if (distanceBay1 < closestDistanceBay1) {\r\n          closestDistanceBay1 = distanceBay1;\r\n          closestBay1 = point;\r\n        }\r\n        if (distanceBay2 < closestDistanceBay2) {\r\n          closestDistanceBay2 = distanceBay2;\r\n          closestBay2 = point;\r\n        }\r\n      }\r\n    });\r\n\r\n    // The code below avoids repeating the same waypoint as next pile\r\n    if (closestBay1 == closestBay2) {\r\n      if (closestDistanceBay1 < closestDistanceBay2) {\r\n        closestBay2 = { lat: 0, lng: 0 };\r\n      } else {\r\n        closestBay1 = { lat: 0, lng: 0 };\r\n      }\r\n    }\r\n\r\n    return [closestBay1, closestBay2];\r\n  };\r\n\r\n  const getNextPiles = (waypoints, bays) => {\r\n    if (waypoints.length > 0) {\r\n      const nearestPiles = getNearestPiles(waypoints, bays);\r\n      setNextPiles(nearestPiles);\r\n\r\n      setRefWaypoint(nearestPiles);\r\n      console.log(\"... getting colors\");\r\n      let timeOffset = 0;\r\n      try {\r\n        let leftColor = waypoints\r\n          .filter((w) => w.pile_id == nearestPiles[0].pile_id)[0]\r\n          .color.trim();\r\n        playOther(\"leftBay\");\r\n        setTimeout(() => playColor(leftColor), 1000);\r\n        timeOffset = 2000;\r\n      } catch {\r\n        console.log(\"error left color\");\r\n      }\r\n      try {\r\n        let rightColor = waypoints\r\n          .filter((w) => w.pile_id == nearestPiles[1].pile_id)[0]\r\n          .color.trim();\r\n        setTimeout(() => playOther(\"rightBay\"), 0 + timeOffset);\r\n        setTimeout(() => playColor(rightColor), 1000 + timeOffset);\r\n      } catch {\r\n        console.log(\"error right color\");\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(center).includes(\"distance\")) {\r\n      let tempPiles = [...nextPiles];\r\n      tempPiles[0].distance = center.distance[0];\r\n      tempPiles[1].distance = center.distance[1];\r\n      setNextPiles(tempPiles);\r\n    }\r\n  }, [center]);\r\n\r\n  useEffect(() => {\r\n    if (autoCenter) {\r\n      socket.off(\"message\");\r\n      socketListener();\r\n    } else {\r\n      socket.off(\"message\");\r\n    }\r\n  }, [autoCenter]);\r\n\r\n  useEffect(() => {\r\n    setWaypoints(\r\n      waypoints.map((waypoint) => ({\r\n        ...waypoint,\r\n        selected: waypoint.color == selectedColor || selectedColor == \"\",\r\n      }))\r\n    );\r\n  }, [selectedColor]);\r\n\r\n  const handlePileClick = (d) => {\r\n    const pile_id = d.object.pile_id;\r\n    const placed = d.object.placed;\r\n    if (placed) unplaceWaypoint(pile_id);\r\n    else placeWaypoint(pile_id);\r\n  };\r\n\r\n  const getPointers = (bays, targets) => {\r\n    return [\r\n      {\r\n        from: [bays[0].lng, bays[0].lat],\r\n        to:\r\n          targets[0].color == undefined\r\n            ? [bays[0].lng, bays[0].lat]\r\n            : [targets[0].lng, targets[0].lat],\r\n      },\r\n      {\r\n        from: [bays[1].lng, bays[1].lat],\r\n        to:\r\n          targets[1].color == undefined\r\n            ? [bays[1].lng, bays[1].lat]\r\n            : [targets[1].lng, targets[1].lat],\r\n      },\r\n    ];\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"is-flex is-flex-centered\">\r\n        <div className=\"container map\">\r\n          <DeckGL\r\n            initialViewState={viewState}\r\n            controller={true}\r\n            getTooltip={({ object }) =>\r\n              object &&\r\n              `Code: ${object.pile_id}\\nColor: ${object.color}\\n${\r\n                object.placed ? \"Placed\" : \"Not Placed\"\r\n              }`\r\n            }\r\n          >\r\n            <StaticMap\r\n              mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN}\r\n              mapStyle={\r\n                terrain\r\n                  ? \"mapbox://styles/km115franco/cl0ek8k82000d15mj12mm3mda\"\r\n                  : undefined // : \"mapbox://styles/km115franco/cl0ekrsl8001o14p8o3jik4h1\"\r\n              }\r\n            />\r\n            <MapView\r\n              x={\"80%\"}\r\n              y={\"80%\"}\r\n              height={\"15%\"}\r\n              width={\"15%\"}\r\n              clear={true}\r\n              controller\r\n            />\r\n            <ScatterplotLayer\r\n              lineWidthMaxPixels={3}\r\n              lineWidthMinPixels={2}\r\n              getRadius={(d) => (d.selected ? (d.placed ? 0.3 : 1) : 0.01)}\r\n              data={waypoints}\r\n              getPosition={(d) => [d.lng, d.lat]}\r\n              getColor={(d) => colors[d.color]}\r\n              getFillColor={(d) => colorsFill[d.color]}\r\n              getLineColor={(d) => colors[d.color]}\r\n              filled={true}\r\n              stroked={true}\r\n              pickable={true}\r\n              opacity={0.8}\r\n              onClick={handlePileClick}\r\n            />\r\n\r\n            <BitmapLayer\r\n              bounds={[\r\n                [truck[3].lng, truck[3].lat, 0],\r\n                [truck[0].lng, truck[0].lat, 0],\r\n                [truck[1].lng, truck[1].lat, 0],\r\n                [truck[2].lng, truck[2].lat, 0],\r\n              ]}\r\n              image={marooka}\r\n            />\r\n\r\n            <ScatterplotLayer\r\n              lineWidthMaxPixels={2}\r\n              lineWidthMinPixels={1}\r\n              getRadius={0.3}\r\n              data={[\r\n                // gps center\r\n                {\r\n                  coordinates: [parseFloat(center.lng), parseFloat(center.lat)],\r\n                  color: colors.black,\r\n                  height: 10,\r\n                },\r\n                // laser positions\r\n                // {\r\n                //   coordinates: [center.truck[12][1], center.truck[12][0]],\r\n                //   color: colors.green,\r\n                //   height: 10,\r\n                // },\r\n                // {\r\n                //   coordinates: [center.truck[13][1], center.truck[13][0]],\r\n                //   color: colors.green,\r\n                //   height: 10,\r\n                // },\r\n                // galvo laser\r\n                {\r\n                  coordinates: [center.truck[14][1], center.truck[14][0]],\r\n                  color: colors.green,\r\n                  height: 10,\r\n                },\r\n                // Bays positions\r\n                {\r\n                  coordinates: [bays[0].lng, bays[0].lat],\r\n                  color: colors.red,\r\n                  height: 0,\r\n                },\r\n                {\r\n                  coordinates: [bays[1].lng, bays[1].lat],\r\n                  color: colors.red,\r\n                  height: 0,\r\n                },\r\n              ]}\r\n              getPosition={(d) => d.coordinates}\r\n              getColor={(d) => d.color}\r\n              filled={false}\r\n              stroked\r\n            />\r\n\r\n            <PolygonLayer\r\n              data={[\r\n                {\r\n                  contour: [\r\n                    [truck[0].lng, truck[0].lat],\r\n                    [truck[1].lng, truck[1].lat],\r\n                    [truck[2].lng, truck[2].lat],\r\n                    [truck[3].lng, truck[3].lat],\r\n                  ],\r\n                },\r\n              ]}\r\n              stroked\r\n              filled\r\n              wireframe\r\n              extruded\r\n              lineWidthMinPixels={1}\r\n              getPolygon={(d) => d.contour}\r\n              getFillColor={colorsFill.lightgreen}\r\n              getLineColor={colors.lightgreen}\r\n              getLineWidth={0.1}\r\n              getElevation={0.5}\r\n            />\r\n            <LineLayer\r\n              data={verticalLine}\r\n              widthUnits=\"meters\"\r\n              getWidth={0.3}\r\n              getSourcePosition={(d) => d.from}\r\n              getTargetPosition={(d) => d.to}\r\n              getColor={[20, 140, 0]}\r\n            />\r\n            <LineLayer\r\n              data={guides}\r\n              widthUnits=\"meters\"\r\n              getWidth={0.1}\r\n              getSourcePosition={(d) => d.from}\r\n              getTargetPosition={(d) => d.to}\r\n              getColor={[20, 140, 0, 100]}\r\n            />\r\n            <LineLayer\r\n              data={getPointers(bays, nextPiles)}\r\n              widthUnits=\"meters\"\r\n              getWidth={0.1}\r\n              getSourcePosition={(d) => d.from}\r\n              getTargetPosition={(d) => d.to}\r\n              getColor={[120, 40, 0, 100]}\r\n            />\r\n          </DeckGL>\r\n        </div>\r\n        {cam && <CamDisplay config={camConfig} />}\r\n      </div>\r\n      <div className=\"columns mt-3 has-text-link \">\r\n        <div className=\"column is-flex is-flex-centered m-0 p-0\">\r\n          <p className=\"heading has-text-centered m-0 p-0 f-3\">\r\n            Lat: {parseFloat(center.lat).toFixed(7)}\r\n          </p>\r\n        </div>\r\n        <div className=\"column is-flex is-flex-centered m-0 p-0\">\r\n          <p className=\"heading has-text-centered m-0 p-0 f-3\">\r\n            Lng: {parseFloat(center.lng).toFixed(7)}\r\n          </p>\r\n        </div>\r\n        <div className=\"column is-flex is-flex-centered m-0 p-0\">\r\n          <p className=\"heading has-text-centered m-0 p-0 f-3\">\r\n            Hdg: {parseFloat(center.heading).toFixed(1)}\r\n          </p>\r\n        </div>\r\n        <div className=\"column is-flex is-flex-centered m-0 p-0\">\r\n          <button\r\n            className={`button is-outlined ml-2 mr-2 ${\r\n              autoCenter ? \"is-success\" : \"is-warning\"\r\n            }`}\r\n            onClick={() => setAutoCenter(!autoCenter)}\r\n          >\r\n            {autoCenter ? \"Auto center enabled\" : \"Auto center not enabled\"}\r\n          </button>\r\n          <button\r\n            className={`button is-outlined is-success ml-2 mr-2`}\r\n            onClick={() => getNextPiles(waypoints, bays)}\r\n            disabled={bays[0].lat == bays[1].lat && bays[0].lng == bays[1].lng}\r\n          >\r\n            Get nearest piles\r\n          </button>\r\n          <button\r\n            className={`button is-outlined ${\r\n              beep ? \"is-success\" : \"is-danger\"\r\n            }`}\r\n            onClick={() => setBeep(!beep)}\r\n          >\r\n            Beep\r\n          </button>\r\n          <button\r\n            className={`ml-2 button is-outlined ${\r\n              cam ? \"is-success\" : \"is-danger\"\r\n            }`}\r\n            onClick={() => setCam(!cam)}\r\n          >\r\n            Cam\r\n          </button>\r\n          <button\r\n            className={`ml-2 button is-outlined ${\r\n              terrain ? \"is-success\" : \"is-danger\"\r\n            }`}\r\n            onClick={() => setTerrain(!terrain)}\r\n          >\r\n            <FontAwesomeIcon icon={faGlobeAmericas} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p className=\"timestamp\">{center.week_timestamp / 1000}</p>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserMap;\r\n","import { faFlag } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useStoreActions, useStoreState } from \"easy-peasy\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { playBeep, playColor, playOther } from \"../js/audio\";\r\n\r\nconst NextPile = ({ index }) => {\r\n  const nextPiles = useStoreState((state) => state.nextPiles);\r\n  const center = useStoreState((state) => state.center);\r\n  const beep = useStoreState((state) => state.beep);\r\n  const placeWaypoint = useStoreActions((actions) => actions.placeWaypoint);\r\n  const clearPile = useStoreActions((actions) => actions.clearPile);\r\n  const [progressValue, setProgressValue] = useState(0);\r\n  const [progressColor, setProgressColor] = useState(\"red\");\r\n  const waypoint = nextPiles[index];\r\n\r\n  const handlePilePlacement = () => {\r\n    placeWaypoint(waypoint.pile_id);\r\n    clearPile(index);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (center.distance !== undefined) {\r\n      let distance = Math.abs(center.distance[index]);\r\n      if (distance > 25) {\r\n        setProgressColor(\"is-danger\");\r\n        setProgressValue(1);\r\n      }\r\n      if (distance < 15) {\r\n        setProgressColor(\"is-warning\");\r\n        setProgressValue(2);\r\n      }\r\n      if (distance < 6) {\r\n        setProgressColor(\"is-success\");\r\n        setProgressValue(3);\r\n      }\r\n      if (beep) playBeep(distance);\r\n    }\r\n  }, [waypoint.distance]);\r\n\r\n  return (\r\n    <div className=\"column is-flex is-flex-centered is-flex-direction-column\">\r\n      {waypoint.pile_id && (\r\n        <>\r\n          <p className=\"heading title is-5 mb-4\">Id: {waypoint.pile_id}</p>\r\n          <div\r\n            className=\"flag-icon color_red\"\r\n            onClick={() => {\r\n              index == 0 ? playOther(\"leftBay\") : playOther(\"rightBay\");\r\n              setTimeout(() => {\r\n                playColor(waypoint.color?.trim());\r\n              }, 1000);\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faFlag} color={waypoint.color} />\r\n          </div>\r\n          <p className=\"heading has-text-centered\">{waypoint.color}</p>\r\n          <p className=\"title is-3 has-text-centered mt-3 mb-4\">\r\n            {center.distance !== undefined && center.distance[index].toFixed(1)}{\" \"}\r\n            ft\r\n          </p>\r\n          <progress\r\n            className={`progress rotate ${progressColor}`}\r\n            max=\"3\"\r\n            value={progressValue}\r\n          />\r\n          <div className=\"is-flex is-flex-centered\">\r\n            <button\r\n              onClick={handlePilePlacement}\r\n              className=\"button is-outlined is-success\"\r\n            >\r\n              Place\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NextPile;\r\n","import {\r\n  faFlag,\r\n  faFlagCheckered,\r\n  faLocationArrow,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useStoreActions, useStoreState } from \"easy-peasy\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { sortByColor, sortByColorPlaced } from \"../js/helpers\";\r\n\r\nconst PileSummary = () => {\r\n  const waypoints = useStoreState((state) => state.waypoints);\r\n  const center = useStoreState((state) => state.center);\r\n  const selectedColor = useStoreState((state) => state.selectedColor);\r\n  const setSelectedColor = useStoreActions(\r\n    (actions) => actions.setSelectedColor\r\n  );\r\n  const [pileColors, setPileColors] = useState(sortByColor(waypoints));\r\n  const [pilesPlaced, setPilesPlaced] = useState(sortByColorPlaced(waypoints));\r\n\r\n  useEffect(() => {\r\n    setPileColors(sortByColor(waypoints));\r\n    setPilesPlaced(sortByColorPlaced(waypoints));\r\n  }, [waypoints]);\r\n\r\n  return (\r\n    <>\r\n      <hr className=\"m-0 p-0 mb-4\" />\r\n      <div className=\"columns\">\r\n        <div className=\"column is-flex is-flex-direction-column is-flex-centered\">\r\n          <FontAwesomeIcon\r\n            onClick={() => setSelectedColor(\"\")}\r\n            icon={faFlagCheckered}\r\n            className=\"is-size-3\"\r\n            color={selectedColor}\r\n          />\r\n          <p className=\"heading has-text-centered has-text-link is-size-5 m-0 p-0\">\r\n            Placed\r\n          </p>\r\n          <p className=\"heading has-text-centered has-text-success is-size-5 m-0 p-0\">\r\n            {waypoints.filter((x) => x.placed).length} / {waypoints.length}\r\n          </p>\r\n        </div>\r\n        <div className=\"column is-four-fifths\">\r\n          <div className=\"columns\">\r\n            {Object.keys(pileColors).map((color) => (\r\n              <div\r\n                className=\"column has-text-centered m-0 p-0\"\r\n                aria-label={color}\r\n              >\r\n                <p className=\"is-size-7 m-0 p-0\">\r\n                  {pilesPlaced[color] ? pilesPlaced[color] : 0} /{\" \"}\r\n                  {pileColors[color]}\r\n                </p>\r\n                <FontAwesomeIcon\r\n                  icon={faFlag}\r\n                  onClick={() => setSelectedColor(color)}\r\n                  color={color}\r\n                  className=\"is-size-3\"\r\n                />\r\n                <p>\r\n                  {(\r\n                    (100 * (pilesPlaced[color] ? pilesPlaced[color] : 0)) /\r\n                    pileColors[color]\r\n                  ).toFixed()}{\" \"}\r\n                  %\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <hr className=\"m-0 p-0\" />\r\n          <p className=\"has-text-centered\" style={{ color: selectedColor }}>\r\n            {selectedColor == \"\" ? \"No layer selected\" : selectedColor}\r\n          </p>\r\n        </div>\r\n        <div className=\"column is-centered has-text-centered\">\r\n          <FontAwesomeIcon\r\n            icon={faLocationArrow}\r\n            transform={{ rotate: center.heading - 45 }}\r\n            className=\"has-text-white is-size-1\"\r\n          />\r\n          <p className=\"is-size-4\">{parseFloat(center.heading).toFixed(1)}</p>\r\n          <p className=\"is-link help\">\r\n            {(center.accuracy * 3.28084).toFixed(1)}ft\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PileSummary;\r\n","import UserMap from \"./UserMap\";\r\nimport NextPile from \"./NextPile\";\r\nimport { useStoreState } from \"easy-peasy\";\r\nimport { useEffect } from \"react\";\r\nimport PileSummary from \"./PileSummary\";\r\n// import { playColor, playDistance } from \"../js/audio\";\r\n\r\nconst Home = () => {\r\n  // const nextPiles = useStoreState(state => state.nextPiles)\r\n  \r\n  // useEffect(()=>{\r\n  //   if(nextPiles[0].distance) {\r\n  //     let minDistance = Math.min(nextPiles[0].distance, nextPiles[1].distance)\r\n  //     playDistance(minDistance)\r\n  //   }\r\n  // },[nextPiles])\r\n\r\n  return (\r\n    <div className=\"container is-fullwidth\">\r\n      <div className=\"columns p-0 m-0\">\r\n        <NextPile index={0} />\r\n        <div className=\"column is-three-fifths p-0 m-0\">\r\n          <UserMap />\r\n        </div>\r\n        <NextPile index={1} />\r\n      </div>\r\n      <PileSummary /> \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;","import { useLocation } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Tab = ({ name, icon }) => {\r\n  const location = useLocation();\r\n  const active = location.pathname.includes(name.toLowerCase())\r\n\r\n  return (\r\n    <li className={ active ? \"is-active\" : \"\"}>\r\n      <Link to={`/${name.toLowerCase()}`} className=\"mr-4 ml-4\" >\r\n        <span className=\"icon is-small\">\r\n          <FontAwesomeIcon icon={icon} />\r\n        </span>\r\n        <span>{name}</span>\r\n      </Link>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Tab;\r\n","import {\r\n  faTools,\r\n  faMapMarked,\r\n  faBug,\r\n  faSun,\r\n  faSatelliteDish,\r\n  faVideo,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport Tab from \"./Tab\";\r\n\r\nconst Tabs = () => {\r\n  return (\r\n    <div className=\"tabs is-centered m-0\">\r\n      <ul>\r\n        <Tab name=\"Map\" icon={faMapMarked} />\r\n        <Tab name=\"Config\" icon={faTools} />\r\n        <Tab name=\"Debug\" icon={faBug} />\r\n        <Tab name=\"Laser\" icon={faSun} />\r\n        <Tab name=\"GPS\" icon={faSatelliteDish} />\r\n        <Tab name=\"Cam\" icon={faVideo} />\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tabs;\r\n","// This component will send \"POST\" to set theoric current coordinates //\r\n// and heading info to change the main map behavior\r\nimport { Map, Marker, GoogleApiWrapper, Circle } from \"google-maps-react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getWaypoints, setHeading, setLatLng } from \"../js/api\";\r\nimport { useLocalStorage } from \"../js/helpers\";\r\n\r\nconst NavDebug = ({ google }) => {\r\n  const [course, setCourse] = useState(0);\r\n  const [markerLatLng, setMarkerLatLng] = useLocalStorage(\"debugCenter\", {\r\n    lat: 0,\r\n    lng: 0,\r\n  });\r\n  const [waypoints, setWaypoints] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getWaypoints().then((res) => {\r\n      setWaypoints(res.waypoints);\r\n      if (res.waypoints.length > 0) {\r\n        setMarkerLatLng({ ...res.waypoints[0] });\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const getMapCordinates = (mapProps, map, clickEvent) => {\r\n    let location = {\r\n      lat: clickEvent.latLng.lat().toFixed(5),\r\n      lng: clickEvent.latLng.lng().toFixed(5),\r\n    };\r\n    setMarkerLatLng(location);\r\n    setLatLng(location);\r\n    console.log(location);\r\n  };\r\n\r\n  const setCourseValue = (e) => {\r\n    const sliderValue = parseFloat(e.target.value).toFixed(1);\r\n    setHeading({ heading: sliderValue });\r\n    setCourse(sliderValue);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container map\">\r\n        <Map\r\n          google={google}\r\n          zoom={14}\r\n          onClick={getMapCordinates}\r\n          initialCenter={markerLatLng}\r\n        >\r\n          <Marker name={\"target\"} position={markerLatLng} />\r\n          {waypoints.map((waypoint) => (\r\n            <Circle\r\n              center={waypoint}\r\n              radius={0.5}\r\n              strokeColor={waypoint.color}\r\n              strokeOpacity={0.5}\r\n              strokeWeight={2}\r\n              fillColor={waypoint.color}\r\n              fillOpacity={0.5}\r\n            />\r\n          ))}\r\n        </Map>\r\n      </div>\r\n      <div className=\"container mt-4 pt-4\">\r\n        <div className=\"columns\">\r\n          <div className=\"column\">\r\n            <p className=\"ml-4\">\r\n              Coordinates: {markerLatLng.lat}, {markerLatLng.lng}\r\n            </p>\r\n            <p className=\"ml-4\">Heading: {course} </p>\r\n          </div>\r\n          <div className=\"column\">\r\n            <p className=\"ml-4\">Set heading:</p>\r\n            <input\r\n              className=\"slider m-4\"\r\n              step={1}\r\n              min={0}\r\n              max={360}\r\n              value={course}\r\n              type=\"range\"\r\n              onInput={setCourseValue}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GoogleApiWrapper({\r\n  apiKey: \"AIzaSyBsgd5A9q-23gHy8tL6e5O0lct6JoD97xo\",\r\n})(NavDebug);\r\n","export default __webpack_public_path__ + \"static/media/laser.bacfbcc3.jpeg\";","import { useEffect, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  getLaserStatus,\r\n  setLaserBlink,\r\n  setLaserConfig,\r\n  setLaserOn,\r\n} from \"../js/api\";\r\nimport { useLocalStorage } from \"../js/helpers\";\r\nimport NumberInput from \"./NumberInput\";\r\nimport { faRedo } from \"@fortawesome/free-solid-svg-icons\";\r\nimport laserImg from \"../assets/laser.jpeg\";\r\n\r\nconst LaserConfig = () => {\r\n  const [connected, setConnected] = useState(false);\r\n  const [port, setPort] = useState();\r\n  const [manual, setManual] = useLocalStorage(\"laserAuto\", true);\r\n  const [loading, setLoading] = useState(false);\r\n  const [on, setOn] = useLocalStorage(\"laserOn\", true);\r\n  const [blink, setBlink] = useLocalStorage(\"laserBlink\", true);\r\n  const [rectWidth, setRectWidth] = useLocalStorage(\"laserRWidth\", 0);\r\n  const [rectHeight, setRectHeight] = useLocalStorage(\"laserRHeight\", 0);\r\n  const [targetX, setTargetX] = useLocalStorage(\"laserTargetX\", 0);\r\n  const [targetY, setTargetY] = useLocalStorage(\"laserTargetY\", 0);\r\n  const [targetZ, setTargetZ] = useLocalStorage(\"laserTargetZ\", -2);\r\n  const [targetA, setTargetA] = useLocalStorage(\"laserTargetA\", 20);\r\n  const [minZ, setMinZ] = useState(0);\r\n  const [maxZ, setMaxZ] = useState(0);\r\n  const [maxX, setMaxX] = useState(0);\r\n\r\n  const handleSave = () => {\r\n    const payload = {\r\n      h: rectHeight,\r\n      w: rectWidth,\r\n      x: targetX,\r\n      y: targetY,\r\n      z: targetZ,\r\n      a: targetA,\r\n      manual,\r\n    };\r\n    setLaserConfig(payload).then((res) => console.log(res));\r\n  };\r\n\r\n  const handleRange = (height, angle) => {\r\n    const deg_to_rad = (degrees) => {\r\n      return degrees * (Math.PI / 180);\r\n    };\r\n    setMaxZ(height / Math.tan(deg_to_rad(angle - 10)));\r\n    setMinZ(height / Math.tan(deg_to_rad(angle + 10)));\r\n    setMaxX(height / (Math.cos(deg_to_rad(angle)) + 1));\r\n  };\r\n\r\n  const handleOn = () => {\r\n    setOn(!on);\r\n    setLaserOn({ on: !on });\r\n  };\r\n\r\n  const handleBlink = () => {\r\n    setBlink(!blink);\r\n    setLaserBlink({ blink: !blink });\r\n  };\r\n\r\n  const handleLaserStatus = () => {\r\n    setLoading(true);\r\n    getLaserStatus().then((res) => {\r\n      setConnected(res.connected);\r\n      setPort(res.port);\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleRange(-targetY, targetA);\r\n  }, [targetY, targetA]);\r\n\r\n  useEffect(() => {\r\n    handleLaserStatus();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"columns\">\r\n        <div className=\"column\">\r\n          <div>\r\n            <h1\r\n              className={`has-text-centered title is-size-4 ${\r\n                connected ? \"has-text-success\" : \"has-text-danger\"\r\n              }`}\r\n            >\r\n              {connected ? \"Laser connected at: \" : \"Laser disconnected\"}\r\n              <span>{connected && port}</span>\r\n            </h1>\r\n            <div className=\"is-flex is-flex-centered\">\r\n              <button\r\n                className={`button is-outlined ${loading && \"is-loading\"}`}\r\n                onClick={handleLaserStatus}\r\n              >\r\n                <FontAwesomeIcon icon={faRedo} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Rectangle width (ft)\"\r\n              value={rectWidth}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setRectWidth}\r\n            />\r\n            <NumberInput\r\n              label=\"Rectangle height (ft)\"\r\n              value={rectHeight}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setRectHeight}\r\n            />\r\n          </div>\r\n          <hr />\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Target X (ft)\"\r\n              value={targetX}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTargetX}\r\n            />\r\n            <NumberInput\r\n              label=\"Target Y (ft)\"\r\n              value={targetY}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTargetY}\r\n            />\r\n            <NumberInput\r\n              label=\"Target Z (ft)\"\r\n              value={targetZ}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTargetZ}\r\n            />\r\n            <NumberInput\r\n              label=\"Tilt Angle (deg)\"\r\n              value={targetA}\r\n              placeholder=\"E.g: 20\"\r\n              changeHandler={setTargetA}\r\n            />\r\n          </div>\r\n          <div className=\"is-flex is-flex-centered\">\r\n            <button\r\n              onClick={handleOn}\r\n              className={`button is-outlined m-4 ${\r\n                on ? \"is-success\" : \"is-danger\"\r\n              }`}\r\n            >\r\n              {on ? \"Laser on\" : \"Laser off\"}\r\n            </button>\r\n            <button\r\n              onClick={handleBlink}\r\n              className={`button is-outlined m-4 ${\r\n                blink ? \"is-success\" : \"is-danger\"\r\n              }`}\r\n            >\r\n              {blink ? \"Blink on\" : \"Blink off\"}\r\n            </button>\r\n            <button\r\n              onClick={() => setManual(!manual)}\r\n              className={`button is-outlined m-4 ${\r\n                manual ? \"is-danger\" : \"is-success\"\r\n              }`}\r\n            >\r\n              {manual ? \"Manual mode\" : \"Automatic mode\"}\r\n            </button>\r\n          </div>\r\n          <hr />\r\n          <div className=\"is-flex is-flex-centered\">\r\n            <button\r\n              onClick={handleSave}\r\n              className=\"button is-outlined is-success m-4\"\r\n            >\r\n              Save\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"column is-flex-centered is-flex-direction-column is-flex\">\r\n          <img src={laserImg} alt=\"laser instructions\" className=\"zoom_img\" />\r\n          <br />\r\n          <h3 className=\"has-text-success\">Canvas range (ft)</h3>\r\n          <p>Zmax: {maxZ.toFixed(2)}</p>\r\n          <p>Zmin: {minZ.toFixed(2)}</p>\r\n          <p>Xmax: {maxX.toFixed(2)}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LaserConfig;\r\n","import { useEffect, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { getGPSStatus } from \"../js/api\";\r\nimport { faRedo } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { getTime } from \"../js/helpers\";\r\n\r\nconst GPSStatus = () => {\r\n  const [connected, setConnected] = useState(false);\r\n  const [port, setPort] = useState();\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleGPSStatus = () => {\r\n    setLoading(true);\r\n    getGPSStatus().then((res) => {\r\n      console.log(res);\r\n      setConnected(res.connected);\r\n      setPort(res.port);\r\n      setLogs(res.logs);\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleGPSStatus();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"columns\">\r\n        <div className=\"column\">\r\n          <div>\r\n            <h1\r\n              className={`has-text-centered title is-size-4 ${\r\n                connected ? \"has-text-success\" : \"has-text-danger\"\r\n              }`}\r\n            >\r\n              {connected ? \"GPS connected at: \" : \"GPS disconnected\"}\r\n              <span>{connected && port}</span>\r\n            </h1>\r\n            <div className=\"is-flex is-flex-centered\">\r\n              <button\r\n                className={`button is-outlined ${loading && \"is-loading\"}`}\r\n                onClick={handleGPSStatus}\r\n              >\r\n                <FontAwesomeIcon icon={faRedo} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <table className=\"table is-fullwidth is-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th> Timestamp </th>\r\n                <th> String </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {logs.map((log, index) => (\r\n                <tr key={index}>\r\n                  <td> {getTime(log[0])} </td>\r\n                  <td> {log[1]} </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GPSStatus;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { useLocalStorage } from \"../js/helpers\";\r\nimport NumberInput from \"./NumberInput\";\r\n\r\nconst CamStatus = () => {\r\n  const [camConfig, setCamConfig] = useLocalStorage(\"camConfig\", {});\r\n  const [devices, setDevices] = useState([]);\r\n  const [crop, setCrop] = useState(camConfig.crop);\r\n  const [camera, setCamera] = useState(camConfig.camera);\r\n  const [camWidth, setCamWidth] = useState(camConfig.camWidth);\r\n  const [camLength, setCamLength] = useState(camConfig.camLength);\r\n  const [antennaX, setAntennaX] = useState(camConfig.antennaX);\r\n  const [antennaY, setAntennaY] = useState(camConfig.antennaY);\r\n  const vidReference = useRef();\r\n  const [videoHight, setVideoHight] = useState(camConfig.videoHight);\r\n  const [videoWidth, setVideoWidth] = useState(camConfig.videoWidth);\r\n  let kX = crop / camWidth;\r\n  let kY = videoHight / camLength;\r\n\r\n  const handleSave = () => {\r\n    let kX = crop / camWidth;\r\n    let kY = videoHight / camLength;\r\n    setCamConfig({\r\n      crop,\r\n      videoHight,\r\n      videoWidth,\r\n      camWidth,\r\n      camLength,\r\n      antennaX,\r\n      antennaY,\r\n      kX,\r\n      kY,\r\n      camera,\r\n    });\r\n  };\r\n\r\n  const handleCam = (device) => {\r\n    const constrains = {\r\n      video: {\r\n        deviceId: device.deviceId,\r\n        width: videoWidth,\r\n        height: videoHight,\r\n      },\r\n    };\r\n    navigator.mediaDevices.getUserMedia(constrains).then((s) => {\r\n      vidReference.current.srcObject = s;\r\n    });\r\n    setCamera(device);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getMediaDevices = () => {\r\n      return new Promise(async (resolve, reject) => {\r\n        if (navigator.mediaDevices) {\r\n          let devices = null;\r\n          let audioAccess;\r\n          let videoAccess;\r\n\r\n          try {\r\n            audioAccess = await navigator.mediaDevices.getUserMedia({\r\n              audio: true,\r\n            });\r\n          } catch (error) {\r\n            console.error(\r\n              \"The browser has no access to the microphone of the device.\"\r\n            );\r\n          }\r\n          try {\r\n            videoAccess = await navigator.mediaDevices.getUserMedia({\r\n              video: true,\r\n            });\r\n          } catch (error) {\r\n            console.error(\r\n              \"The browser has no access to the camera of the device.\"\r\n            );\r\n          }\r\n          try {\r\n            devices = await navigator.mediaDevices.enumerateDevices();\r\n            devices = devices.filter((device) => device.kind === \"videoinput\");\r\n          } catch (error) {\r\n            console.error(\r\n              \"There are no media devices available in this device.\"\r\n            );\r\n          }\r\n          resolve({\r\n            devices,\r\n          });\r\n        } else {\r\n          reject({ error: \"The media devices could not be checked\" });\r\n        }\r\n      });\r\n    };\r\n    getMediaDevices().then((res) => setDevices(res.devices));\r\n    if (camera !== undefined) {\r\n      const constrains = {\r\n        video: {\r\n          deviceId: camera.deviceId,\r\n          width: videoWidth,\r\n          height: videoHight,\r\n        },\r\n      };\r\n      navigator.mediaDevices.getUserMedia(constrains).then((s) => {\r\n        vidReference.current.srcObject = s;\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"columns\">\r\n        <div className=\"column\">\r\n          <h1 className=\"has-text-centered title is-size-4\">Video devices</h1>\r\n          <div className=\"is-flex is-flex-centered\">\r\n            {devices.map((device) => (\r\n              <button\r\n                className=\"button is-outlined m-4\"\r\n                onClick={() => handleCam(device)}\r\n              >\r\n                {device.label}\r\n              </button>\r\n            ))}\r\n          </div>\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Video Width (px)\"\r\n              value={videoWidth}\r\n              placeholder=\"E.g: 800\"\r\n              changeHandler={setVideoWidth}\r\n            />\r\n            <NumberInput\r\n              label=\"VideoHight (px)\"\r\n              value={videoHight}\r\n              placeholder=\"E.g: 600\"\r\n              changeHandler={setVideoHight}\r\n            />\r\n          </div>\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Crop from right (px)\"\r\n              value={crop}\r\n              placeholder=\"E.g: 100\"\r\n              changeHandler={setCrop}\r\n            />\r\n            <NumberInput\r\n              label=\"Camera Width (ft)\"\r\n              value={camWidth}\r\n              placeholder=\"E.g: 20\"\r\n              changeHandler={setCamWidth}\r\n            />\r\n            <NumberInput\r\n              label=\"Camera Length (ft)\"\r\n              value={camLength}\r\n              placeholder=\"E.g: 40\"\r\n              changeHandler={setCamLength}\r\n            />\r\n            <NumberInput\r\n              label=\"Antenna X position(ft)\"\r\n              value={antennaX}\r\n              placeholder=\"E.g: 40\"\r\n              changeHandler={setAntennaX}\r\n            />\r\n            <NumberInput\r\n              label=\"Antenna Y position (ft)\"\r\n              value={antennaY}\r\n              placeholder=\"E.g: 40\"\r\n              changeHandler={setAntennaY}\r\n            />\r\n            <div className=\"is-flex is-flex-centered\">\r\n              <button\r\n                onClick={handleSave}\r\n                className=\"button is-outlined is-success ml-4 mt-4\"\r\n              >\r\n                Save\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div className=\"is-flex is-flex-centered is-flex-direction-column\">\r\n            <div className=\"is-flex is-flex-centered is-flex-direction-vertical\">\r\n              <p className=\"m-4\" style={{ transform: \"rotate(-90deg)\" }}>\r\n                {camLength} ft\r\n              </p>\r\n              <div\r\n                style={{\r\n                  width: `${crop}px`,\r\n                  height: `${videoHight}px`,\r\n                }}\r\n              >\r\n                <video\r\n                  autoPlay\r\n                  ref={vidReference}\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    clip: `rect(0, ${crop}px, ${videoHight}px, 0)`,\r\n                  }}\r\n                />\r\n                <div\r\n                  className=\"is-flex is-flex-centered m-0 p-0\"\r\n                  style={{\r\n                    width: \"10px\",\r\n                    height: \"10px\",\r\n                    position: \"absolute\",\r\n                    transform: `translateX(${\r\n                      antennaX * kX - 5\r\n                    }px ) translateY(${antennaY * kY - 5}px)`,\r\n                    color: \"black\",\r\n                    borderStyle: \"solid\",\r\n                    borderColor: \"lime\",\r\n                    borderRadius: \"50%\",\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n            <p className=\"m-1\">{camWidth} ft</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CamStatus;\r\n","import { Switch, Redirect, Route } from \"react-router-dom\";\r\nimport { StoreProvider, createStore } from \"easy-peasy\";\r\nimport model from \"../js/model\";\r\n\r\nimport Config from \"./Config\";\r\nimport Home from \"./Home\";\r\nimport Tabs from \"./Tabs\";\r\nimport NavDebug from \"./NavDebug\";\r\nimport LaserConfig from \"./LaserConfig\";\r\nimport GPSStatus from \"./GPSStatus\";\r\nimport CamStatus from \"./CamStatus\";\r\n\r\nconst store = createStore(model);\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className=\"container is-fullwidth\">\r\n      <Tabs />\r\n      <StoreProvider store={store}>\r\n        <Switch>\r\n          <Redirect exact from=\"/\" to=\"/map\" />\r\n          <Route path=\"/config\" component={Config} />\r\n          <Route path=\"/laser\" component={LaserConfig} />\r\n          <Route path=\"/gps\" component={GPSStatus} />\r\n          <Route path=\"/cam\" component={CamStatus} />\r\n          <Route path=\"/debug\" component={NavDebug} />\r\n          <Route path=\"/map\" component={Home} />\r\n        </Switch>\r\n      </StoreProvider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nimport './css/index.css';\r\nimport './css/style.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}