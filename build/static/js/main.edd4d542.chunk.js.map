{"version":3,"sources":["js/model.js","js/api.js","components/FileInput.jsx","components/NumberInput.jsx","js/helpers.js","assets/epsg_codes.pdf","assets/marooka-size.png","assets/marooka-side.png","components/Config.jsx","assets/audio/distance/1.mp3","assets/audio/distance/2.mp3","assets/audio/distance/3.mp3","assets/audio/distance/4.mp3","assets/audio/distance/5.mp3","assets/audio/distance/6.mp3","assets/audio/distance/7.mp3","assets/audio/distance/8.mp3","assets/audio/distance/9.mp3","assets/audio/distance/10.mp3","assets/audio/colors/black.mp3","assets/audio/colors/blue.mp3","assets/audio/colors/brown.mp3","assets/audio/colors/darkblue.mp3","assets/audio/colors/lightblue.mp3","assets/audio/colors/lightgreen.mp3","assets/audio/colors/orange.mp3","assets/audio/colors/pink.mp3","assets/audio/colors/purple.mp3","assets/audio/colors/red.mp3","assets/audio/colors/white.mp3","assets/audio/colors/yellow.mp3","assets/audio/colors/green.mp3","assets/audio/colors/purplewhite.mp3","assets/audio/colors/brownwhite.mp3","assets/audio/other/left_bay.mp3","assets/audio/other/right_bay.mp3","assets/audio/other/next_pile.mp3","assets/audio/beep/1beep.mp3","assets/audio/beep/2beep.mp3","assets/audio/beep/4beep.mp3","assets/audio/beep/8beep.mp3","assets/audio/beep/ibeep.mp3","js/audio.js","assets/marooka-top.bmp","components/UserMap.jsx","components/NextPile.jsx","components/PileSummary.jsx","components/Home.jsx","components/Tab.jsx","components/Tabs.jsx","components/NavDebug.jsx","assets/laser.jpeg","components/LaserConfig.jsx","components/GPSStatus.jsx","components/App.jsx","index.js"],"names":["nextPiles","distance","pile_id","setNextPiles","action","state","clearPile","index","tempPiles","waypoints","setWaypoints","placeWaypoint","id","map","waypoint","placed","unplaceWaypoint","selectedColor","setSelectedColor","color","center","heading","lat","lng","truck","distY","distX","setCenter","beep","setBeep","host","window","location","hostname","socket","io","connect","setLatLng","a","console","log","url","axios","post","response","data","setHeading","setConfig","config","setRefWaypoint","getLaserStatus","get","getGPSStatus","setLaserConfig","payload","setLaserOn","setLaserBlink","getWaypoints","uploadFile","file","epsg","formData","FormData","append","headers","FileInput","useState","path","setPath","name","setName","fileStatus","setFileStatus","history","useHistory","useEffect","document","querySelector","addEventListener","e","localPath","target","files","localName","className","type","accept","icon","faUpload","onClick","then","res","setTimeout","push","catch","message","rows","NumberInput","label","value","placeholder","changeHandler","size","step","onChange","useLocalStorage","key","initialValue","item","localStorage","getItem","JSON","parse","error","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","sortByColor","byColor","forEach","trim","sortByColorPlaced","colors","black","blue","brown","darkblue","green","lightblue","lightgreen","orange","pink","purple","red","white","yellow","colorsFill","groupByNeighbor","arr","th","last","result","sort","b","i","getMiddles","Config","localconfig","setLocalConfig","truckLen","setTruckLen","truckWid","setTruckWid","truckHei","setTruckHei","antennaX","setAntennaX","antennaY","setAntennaY","bay1","setBay1","bay2","setBay2","laserX","setLaserX","laserY","setLaserY","laserZ","setLaserZ","laserScale","setLaserScale","reference","setReference","setEpsg","feedback","setFeedback","style","margin","href","epsgCodes","faFileAlt","faSearch","src","marooka","marookaSide","otherSounds","Audio","one","two","three","four","five","six","seven","eight","nine","ten","leftBay","rightBay","nextPile","colorSounds","purplewhite","brownwhite","beepSounds","far","beep1","close","beep2","closer","beep4","closest","beep8","beepi","playOther","sound","play","playColor","mapboxgl","workerClass","require","default","INITIAL_VIEW_STATE","longitude","latitude","zoom","maxZoom","pitch","bearing","UserMap","useStoreState","useStoreActions","actions","viewState","setViewState","autoCenter","setAutoCenter","guides","setGuides","setTruck","verticalLine","setVerticalLine","bays","setBays","socketListener","on","msg","parsedMsg","parseFloat","from","to","selected","lats","x","middles","lngs","minLng","Math","min","maxLng","max","lines","getGuides","length","off","getNextPiles","nearestPiles","distanceBay1","distanceBay2","closestBay1","closestBay2","closestDistanceBay1","closestDistanceBay2","point","getNearestPiles","timeOffset","leftColor","filter","w","rightColor","Object","keys","includes","initialViewState","controller","getTooltip","object","mapboxApiAccessToken","y","height","width","clear","lineWidthMaxPixels","lineWidthMinPixels","getRadius","d","getPosition","getColor","getFillColor","getLineColor","filled","stroked","pickable","opacity","bounds","image","coordinates","contour","wireframe","extruded","getPolygon","getLineWidth","getElevation","widthUnits","getWidth","getSourcePosition","getTargetPosition","toFixed","disabled","NextPile","progressValue","setProgressValue","progressColor","setProgressColor","undefined","abs","range","playBeep","faFlag","PileSummary","pileColors","setPileColors","pilesPlaced","setPilesPlaced","faFlagCheckered","faLocationArrow","transform","rotate","Home","Tab","active","useLocation","pathname","toLowerCase","Tabs","faMapMarked","faTools","faBug","faSun","faSatelliteDish","GoogleApiWrapper","apiKey","google","course","setCourse","markerLatLng","setMarkerLatLng","mapProps","clickEvent","latLng","initialCenter","position","radius","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","onInput","sliderValue","LaserConfig","connected","setConnected","port","setPort","manual","setManual","loading","setLoading","setOn","blink","setBlink","rectWidth","setRectWidth","rectHeight","setRectHeight","targetX","setTargetX","targetY","setTargetY","targetZ","setTargetZ","targetA","setTargetA","minZ","setMinZ","maxZ","setMaxZ","maxX","setMaxX","handleLaserStatus","angle","deg_to_rad","degrees","PI","tan","cos","handleRange","faRedo","h","z","laserImg","alt","GPSStatus","logs","setLogs","handleGPSStatus","timestamp","Date","toLocaleString","split","store","createStore","model","App","exact","component","NavDebug","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.edd4d542.chunk.js","sourcesContent":["import { action } from \"easy-peasy\";\r\n\r\nexport default {\r\n  nextPiles: [\r\n    { distance: null, pile_id: null },\r\n    { distance: null, pile_id: null },\r\n  ],\r\n  setNextPiles: action((state, nextPiles) => {\r\n    state.nextPiles = [...nextPiles];\r\n  }),\r\n\r\n  clearPile: action((state, index) => {\r\n    let tempPiles = [...state.nextPiles];\r\n    tempPiles[index] = {};\r\n    state.nextPiles = tempPiles;\r\n  }),\r\n\r\n  waypoints: [],\r\n  setWaypoints: action((state, waypoints) => {\r\n    state.waypoints = [...waypoints];\r\n  }),\r\n  placeWaypoint: action((state, id) => {\r\n    state.waypoints = state.waypoints.map((waypoint) => {\r\n      return waypoint.pile_id == id ? { ...waypoint, placed: true } : waypoint;\r\n    });\r\n  }),\r\n  unplaceWaypoint: action((state, id) => {\r\n    state.waypoints = state.waypoints.map((waypoint) => {\r\n      return waypoint.pile_id == id ? { ...waypoint, placed: false } : waypoint;\r\n    });\r\n  }),\r\n\r\n  selectedColor: \"\",\r\n  setSelectedColor: action((state, color) => {\r\n    state.selectedColor = color;\r\n  }),\r\n\r\n  center: {\r\n    heading: 0,\r\n    lat: 0,\r\n    lng: 0,\r\n    truck: [\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n      [0, 0],\r\n    ],\r\n    distY: [0, 0],\r\n    distX: [0, 0],\r\n  },\r\n  setCenter: action((state, center) => {\r\n    state.center = center;\r\n  }),\r\n  beep: false,\r\n  setBeep: action((state, beep) => {\r\n    state.beep = beep;\r\n  }),\r\n};\r\n","import axios from \"axios\";\r\nimport io from \"socket.io-client\";\r\n\r\n// const host = \"raspberrypi.local:9999\";\r\nconst host = `http://${window.location.hostname}:9999`;\r\n\r\nexport const socket = io.connect(`${host}`);\r\n\r\nexport const setLatLng = async (location) => {\r\n  console.log(\"... setting lat lng\");\r\n  const url = `${host}/api/location`;\r\n  const response = await axios.post(url, location);\r\n  return response.data;\r\n};\r\n\r\nexport const setHeading = async (heading) => {\r\n  console.log(\"... setting heading\");\r\n  const url = `${host}/api/heading`;\r\n  const response = await axios.post(url, heading);\r\n  return response.data;\r\n};\r\n\r\nexport const setConfig = async (config) => {\r\n  console.log(\"... setting config\");\r\n  const url = `${host}/api/config`;\r\n  const response = await axios.post(url, config);\r\n  return response.data;\r\n};\r\n\r\nexport const setRefBay = async (bay) => {\r\n  console.log(\"... setting reference bay\");\r\n  const url = `${host}/api/bay`;\r\n  const response = await axios.post(url, bay);\r\n  return response.data;\r\n};\r\n\r\nexport const setRefWaypoint = async (waypoint) => {\r\n  console.log(\"... setting waypoint\");\r\n  const url = `${host}/api/waypoint`;\r\n  const response = await axios.post(url, waypoint);\r\n  return response.data;\r\n};\r\n\r\nexport const getLocation = async () => {\r\n  console.log(\"... getting location and heading\");\r\n  const url = `${host}/api/status`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nexport const getSerialPorts = async () => {\r\n  console.log(\"... getting serial ports\");\r\n  const url = `${host}/api/serial_ports`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nexport const getLaserStatus = async () => {\r\n  console.log(\"... getting laser serial\");\r\n  const url = `${host}/api/laser/serial`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nexport const getGPSStatus = async () => {\r\n  console.log(\"... getting laser serial\");\r\n  const url = `${host}/api/gps/serial`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nexport const setLaserConfig = async (payload) => {\r\n  console.log(\"... setting laser config\");\r\n  const url = `${host}/api/laser/config`;\r\n  const response = await axios.post(url, payload);\r\n  return response.data;\r\n};\r\n\r\nexport const setLaserOn = async (state) => {\r\n  console.log(\"... setting laser on\");\r\n  const url = `${host}/api/laser/on`;\r\n  const response = await axios.post(url, state);\r\n  return response.data;\r\n};\r\n\r\nexport const setLaserBlink = async (state) => {\r\n  console.log(\"... setting laser blink\");\r\n  const url = `${host}/api/laser/blink`;\r\n  const response = await axios.post(url, state);\r\n  return response.data;\r\n};\r\n\r\nexport const getWaypoints = async () => {\r\n  console.log(\"... getting waypoints\");\r\n  const url = `${host}/api/waypoints`;\r\n  const response = await axios.get(url);\r\n  return response.data;\r\n};\r\n\r\nexport const uploadFile = async (file, epsg) => {\r\n  console.log(\"... uploading file\");\r\n  const url = `${host}/api/file`;\r\n  let formData = new FormData();\r\n  formData.append(\"file\", file);\r\n  formData.append(\"code\", epsg);\r\n  const response = await axios.post(url, formData, {\r\n    headers: {\r\n      \"Content-Type\": \"multipart/form-data\",\r\n    },\r\n  });\r\n  return response.data;\r\n};\r\n","import { faUpload } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { uploadFile } from '../js/api';\r\n\r\nconst FileInput = () => {\r\n  const [path, setPath] = useState('');\r\n  const [name, setName] = useState('Nothing selected yet');\r\n  const [fileStatus, setFileStatus] = useState({})\r\n  const history = useHistory()\r\n\r\n  useEffect(()=>{\r\n    const handleFiles = e => {\r\n      let localPath = e.target.files[0];\r\n      let localName = e.target.files[0].name\r\n      setPath(localPath)\r\n      setName(localName)\r\n    }\r\n\r\n    const inputElement = document.querySelector(\".file-input\");\r\n    inputElement.addEventListener(\"change\", handleFiles, false);\r\n  },[])\r\n\r\n  const handleFiles = (file) => {\r\n    uploadFile(file)\r\n      .then(res => {\r\n        setFileStatus(res)\r\n        setTimeout(() => {\r\n          history.push('/map')\r\n        }, 1000);\r\n      })\r\n      .catch(() => setFileStatus({ message: false }))\r\n  }\r\n\r\n  return (\r\n    <div className=\"columns\">\r\n      <div className=\"column file has-name\">\r\n        <label className=\"file-label\">\r\n          <input className=\"file-input\" type=\"file\" accept=\".csv, .xlsx\"/>\r\n          <span className=\"file-cta\">\r\n            <span className=\"file-icon\">\r\n            <FontAwesomeIcon icon={faUpload} />\r\n            </span>\r\n            <span className=\"file-label\">\r\n              Choose a file ...\r\n            </span>\r\n          </span>\r\n          <span className=\"file-name\">\r\n            {name}\r\n          </span>\r\n        </label>\r\n      </div>\r\n      <div className=\"column\">\r\n        { path ? \r\n          <div className=\"is-flex is-justify-content-center\">\r\n            <button \r\n              className=\"button is-outlined is-success\" \r\n              onClick={() => handleFiles(path)}>Upload\r\n            </button>\r\n          </div> :\r\n          ''\r\n        }\r\n      </div>\r\n      <div className=\"column\">\r\n        { fileStatus.message ?\r\n          <div className=\"is-flex is-align-content-center is-flex-direction-column\">\r\n            <p className={fileStatus.message ? 'has-text-success' : 'has-text-fail'}>\r\n              {fileStatus.message ? 'Success' : 'Fail'}\r\n            </p>\r\n            <p>\r\n              Waypoints: {fileStatus.rows}\r\n            </p>\r\n          </div> : \r\n          ''\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default FileInput;\r\n","const NumberInput = ({\r\n  label,\r\n  value,\r\n  placeholder,\r\n  changeHandler,\r\n  size = \"is-normal\",\r\n}) => {\r\n  return (\r\n    <div className=\"field column\">\r\n      <label className=\"label\">{label}</label>\r\n      <p className=\"control\">\r\n        <input\r\n          className={`input ${size}`}\r\n          type=\"number\"\r\n          step={0.1}\r\n          placeholder={placeholder}\r\n          onChange={(e) => changeHandler(e.target.value)}\r\n          value={value}\r\n        />\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NumberInput;\r\n","import { useState } from \"react\";\r\n\r\nexport const useLocalStorage = (key, initialValue) => {\r\n  // State to store our value\r\n  // Pass initial state function to useState so logic is only executed once\r\n  const [storedValue, setStoredValue] = useState(() => {\r\n    try {\r\n      // Get from local storage by key\r\n      const item = window.localStorage.getItem(key);\r\n      // Parse stored json or if none return initialValue\r\n      return item ? JSON.parse(item) : initialValue;\r\n    } catch (error) {\r\n      // If error also return initialValue\r\n      console.log(error);\r\n      return initialValue;\r\n    }\r\n  });\r\n  // Return a wrapped version of useState's setter function that ...\r\n  // ... persists the new value to localStorage.\r\n  const setValue = (value) => {\r\n    try {\r\n      // Allow value to be a function so we have same API as useState\r\n      const valueToStore =\r\n        value instanceof Function ? value(storedValue) : value;\r\n      // Save state\r\n      setStoredValue(valueToStore);\r\n      // Save to local storage\r\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n    } catch (error) {\r\n      // A more advanced implementation would handle the error case\r\n      console.log(error);\r\n    }\r\n  };\r\n  return [storedValue, setValue];\r\n};\r\n\r\nexport const sortByColor = (waypoints) => {\r\n  const byColor = {};\r\n  waypoints.forEach((waypoint) => {\r\n    if (byColor[waypoint.color?.trim()]) byColor[waypoint.color?.trim()] += 1;\r\n    else byColor[waypoint.color?.trim()] = 1;\r\n  });\r\n  return byColor;\r\n};\r\n\r\nexport const sortByColorPlaced = (waypoints) => {\r\n  const byColor = {};\r\n  waypoints.forEach((waypoint) => {\r\n    if (waypoint.placed) {\r\n      if (byColor[waypoint.color?.trim()]) byColor[waypoint.color?.trim()] += 1;\r\n      else byColor[waypoint.color?.trim()] = 1;\r\n    }\r\n  });\r\n  return byColor;\r\n};\r\n\r\nexport const colors = {\r\n  black: [0, 0, 0],\r\n  blue: [0, 0, 255],\r\n  brown: [165, 42, 42],\r\n  darkblue: [0, 0, 139],\r\n  green: [0, 255, 0],\r\n  lightblue: [135, 206, 235],\r\n  lightgreen: [144, 238, 144],\r\n  orange: [255, 165, 0],\r\n  pink: [255, 105, 180],\r\n  purple: [128, 0, 128],\r\n  red: [255, 0, 0],\r\n  white: [255, 255, 255],\r\n  yellow: [255, 255, 0],\r\n};\r\n\r\nexport const colorsFill = {\r\n  black: [0, 0, 0, 128],\r\n  blue: [0, 0, 255, 128],\r\n  brown: [165, 42, 42, 128],\r\n  darkblue: [0, 0, 139, 128],\r\n  green: [0, 255, 0, 128],\r\n  lightblue: [135, 206, 235, 128],\r\n  lightgreen: [144, 238, 144, 128],\r\n  orange: [255, 165, 0, 128],\r\n  pink: [255, 105, 180, 128],\r\n  purple: [128, 0, 128, 128],\r\n  red: [255, 0, 0, 128],\r\n  white: [255, 255, 255, 128],\r\n  yellow: [255, 255, 0, 128],\r\n};\r\n\r\nexport const getTime = (timestamp) => {\r\n  const stamp = new Date(timestamp * 1000);\r\n  return stamp.toLocaleString().split(\", \")[1];\r\n};\r\n\r\nexport const getGuides = (waypoints) => {\r\n  let lats = waypoints.map((x) => x.lng);\r\n  lats = groupByNeighbor(lats, 0.000005);\r\n  const middles = getMiddles(lats);\r\n  const lngs = waypoints.map((x) => x.lat);\r\n  const minLng = Math.min(...lngs) - 0.0001;\r\n  const maxLng = Math.max(...lngs) + 0.0001;\r\n  const lines = [];\r\n  middles.forEach((e) => {\r\n    lines.push({ from: [e, minLng], to: [e, maxLng] });\r\n  });\r\n  return lines;\r\n};\r\n\r\nconst groupByNeighbor = (arr, th) => {\r\n  let result = [];\r\n  let last;\r\n\r\n  arr.sort((a, b) => a - b);\r\n  arr.forEach((e, i) => {\r\n    if (i == 0) {\r\n      last = e;\r\n      result.push(e);\r\n    } else {\r\n      if (e > th + last) {\r\n        last = e;\r\n        result.push(e);\r\n      }\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nconst getMiddles = (arr) => {\r\n  const result = [];\r\n\r\n  arr.forEach((e, i) => {\r\n    if (i > 0) result.push((e + arr[i - 1]) / 2.0);\r\n  });\r\n\r\n  return result;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/epsg_codes.c38b8103.pdf\";","export default __webpack_public_path__ + \"static/media/marooka-size.51b49781.png\";","export default __webpack_public_path__ + \"static/media/marooka-side.6ce15895.png\";","import FileInput from \"./FileInput\";\r\nimport NumberInput from \"./NumberInput\";\r\nimport { useState } from \"react\";\r\nimport { setConfig } from \"../js/api\";\r\nimport { useLocalStorage } from \"../js/helpers\";\r\nimport epsgCodes from \"../assets/epsg_codes.pdf\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFileAlt, faSearch } from \"@fortawesome/free-solid-svg-icons\";\r\nimport marooka from \"../assets/marooka-size.png\";\r\nimport marookaSide from \"../assets/marooka-side.png\";\r\n\r\nconst Config = () => {\r\n  const [localconfig, setLocalConfig] = useLocalStorage(\"config\", {});\r\n  const [truckLen, setTruckLen] = useState(localconfig.truckLen);\r\n  const [truckWid, setTruckWid] = useState(localconfig.truckWid);\r\n  const [truckHei, setTruckHei] = useState(localconfig.truckHei);\r\n  const [antennaX, setAntennaX] = useState(localconfig.antennaX);\r\n  const [antennaY, setAntennaY] = useState(localconfig.antennaY);\r\n  const [bay1, setBay1] = useState(localconfig.bay1);\r\n  const [bay2, setBay2] = useState(localconfig.bay2);\r\n  const [laserX, setLaserX] = useState(localconfig.laserX);\r\n  const [laserY, setLaserY] = useState(localconfig.laserY);\r\n  const [laserZ, setLaserZ] = useState(localconfig.laserZ);\r\n  const [laserScale, setLaserScale] = useState(localconfig.laserScale);\r\n  const [reference, setReference] = useState(localconfig.reference);\r\n  const [epsg, setEpsg] = useState(localconfig.epsg);\r\n  const [feedback, setFeedback] = useState(\"\");\r\n\r\n  const uploadConfig = () => {\r\n    const payload = {\r\n      truckLen,\r\n      truckWid,\r\n      truckHei,\r\n      antennaX,\r\n      antennaY,\r\n      bay1,\r\n      bay2,\r\n      epsg,\r\n      laserX,\r\n      laserY,\r\n      laserZ,\r\n      laserScale,\r\n      reference,\r\n    };\r\n    setLocalConfig(payload);\r\n    setConfig(payload)\r\n      .then(() => setFeedback(\"Success\"))\r\n      .catch(() => setFeedback(\"Fail\"));\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"columns\">\r\n        <div className=\"column\">\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Truck length\"\r\n              value={truckLen}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTruckLen}\r\n            />\r\n            <NumberInput\r\n              label=\"Truck width\"\r\n              value={truckWid}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTruckWid}\r\n            />\r\n            <NumberInput\r\n              label=\"Truck height\"\r\n              value={truckHei}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTruckHei}\r\n            />\r\n          </div>\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Antenna from left\"\r\n              value={antennaX}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setAntennaX}\r\n            />\r\n            <NumberInput\r\n              label=\"Antenna from truck head\"\r\n              value={antennaY}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setAntennaY}\r\n            />\r\n          </div>\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Bay 1 from truck head\"\r\n              value={bay1}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setBay1}\r\n            />\r\n            <NumberInput\r\n              label=\"Bay 2 from truck head\"\r\n              value={bay2}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setBay2}\r\n            />\r\n          </div>\r\n          <hr style={{ margin: \".25em\" }} />\r\n          <div className=\"\">\r\n            <h2 className=\"has-text-centered\">Laser distances (ft)</h2>\r\n            <div className=\"columns\">\r\n              <NumberInput\r\n                label=\"From left\"\r\n                value={laserX}\r\n                placeholder=\"E.g: 5\"\r\n                changeHandler={setLaserX}\r\n              />\r\n              <NumberInput\r\n                label=\"From head\"\r\n                value={laserY}\r\n                placeholder=\"E.g: 5\"\r\n                changeHandler={setLaserY}\r\n              />\r\n              <NumberInput\r\n                label=\"From ground\"\r\n                value={laserZ}\r\n                placeholder=\"E.g: 5\"\r\n                changeHandler={setLaserZ}\r\n              />\r\n              <div className=\"field column\">\r\n                <label className=\"label\">Reference</label>\r\n                <div className=\"control\">\r\n                  <div className=\"select\">\r\n                    <select onChange={(e) => setReference(e.target.value)}>\r\n                      <option value=\"bay1\">Bay 1</option>\r\n                      <option value=\"bay2\">Bay 2</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <NumberInput\r\n                label=\"Scale\"\r\n                value={laserScale}\r\n                placeholder=\"E.g: 1\"\r\n                changeHandler={setLaserScale}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"EPSG code\"\r\n              value={epsg}\r\n              placeholder=\"E.g: 6588\"\r\n              changeHandler={setEpsg}\r\n            />\r\n            <div className=\"column is-flex-direction-column is-flex is-flex-centered\">\r\n              <p className=\"heading has-text-link\">EPSG Reference</p>\r\n              <a\r\n                href={epsgCodes}\r\n                target=\"blank\"\r\n                className=\"has-text-white title is-2\"\r\n              >\r\n                <FontAwesomeIcon icon={faFileAlt} />\r\n              </a>\r\n            </div>\r\n            <div className=\"column is-flex-direction-column is-flex is-flex-centered\">\r\n              <p className=\"heading has-text-link\">EPSG Browser</p>\r\n              <a\r\n                href=\"https://epsg.io/\"\r\n                target=\"blank\"\r\n                className=\"has-text-white title is-2\"\r\n              >\r\n                <FontAwesomeIcon icon={faSearch} />\r\n              </a>\r\n            </div>\r\n            <div className=\"column is-flex is-justify-content-center is-align-content-center\">\r\n              <button className=\"button ml-2\" onClick={uploadConfig}>\r\n                Save\r\n              </button>\r\n              <p\r\n                className={`success ml-2 ${\r\n                  feedback == \"Success\" ? \"has-text-success\" : \"has-text-danger\"\r\n                }`}\r\n              >\r\n                {feedback}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <hr style={{ margin: \".5em\" }} />\r\n          <FileInput />\r\n        </div>\r\n\r\n        <div className=\"column is-centered has-text-centered\">\r\n          <img src={marooka} />\r\n          <img src={marookaSide} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Config;\r\n","export default __webpack_public_path__ + \"static/media/1.2999e734.mp3\";","export default __webpack_public_path__ + \"static/media/2.c90484f3.mp3\";","export default __webpack_public_path__ + \"static/media/3.451a053d.mp3\";","export default __webpack_public_path__ + \"static/media/4.3d33a969.mp3\";","export default __webpack_public_path__ + \"static/media/5.0b9156e3.mp3\";","export default __webpack_public_path__ + \"static/media/6.52edbbb5.mp3\";","export default __webpack_public_path__ + \"static/media/7.b473eb3a.mp3\";","export default __webpack_public_path__ + \"static/media/8.55fb2017.mp3\";","export default __webpack_public_path__ + \"static/media/9.308dc1bf.mp3\";","export default __webpack_public_path__ + \"static/media/10.1fbcf1e7.mp3\";","export default __webpack_public_path__ + \"static/media/black.67345e6d.mp3\";","export default __webpack_public_path__ + \"static/media/blue.603a17d2.mp3\";","export default __webpack_public_path__ + \"static/media/brown.aa74bbbb.mp3\";","export default __webpack_public_path__ + \"static/media/darkblue.587d78fd.mp3\";","export default __webpack_public_path__ + \"static/media/lightblue.9a9ee83a.mp3\";","export default __webpack_public_path__ + \"static/media/lightgreen.d7c408fe.mp3\";","export default __webpack_public_path__ + \"static/media/orange.42e333b5.mp3\";","export default __webpack_public_path__ + \"static/media/pink.f914d206.mp3\";","export default __webpack_public_path__ + \"static/media/purple.8e39b00d.mp3\";","export default __webpack_public_path__ + \"static/media/red.d598f0dc.mp3\";","export default __webpack_public_path__ + \"static/media/white.a09c2726.mp3\";","export default __webpack_public_path__ + \"static/media/yellow.1d5be675.mp3\";","export default __webpack_public_path__ + \"static/media/green.8c2c03a6.mp3\";","export default __webpack_public_path__ + \"static/media/purplewhite.08127fb1.mp3\";","export default __webpack_public_path__ + \"static/media/brownwhite.f5c411c7.mp3\";","export default __webpack_public_path__ + \"static/media/left_bay.ba74ee7d.mp3\";","export default __webpack_public_path__ + \"static/media/right_bay.0fce9298.mp3\";","export default __webpack_public_path__ + \"static/media/next_pile.aa5d59d6.mp3\";","export default __webpack_public_path__ + \"static/media/1beep.02416d27.mp3\";","export default __webpack_public_path__ + \"static/media/2beep.44a9a09a.mp3\";","export default __webpack_public_path__ + \"static/media/4beep.511984ec.mp3\";","export default __webpack_public_path__ + \"static/media/8beep.4d330e41.mp3\";","export default __webpack_public_path__ + \"static/media/ibeep.98e6c448.mp3\";","import one from \"../assets/audio/distance/1.mp3\";\r\nimport two from \"../assets/audio/distance/2.mp3\";\r\nimport three from \"../assets/audio/distance/3.mp3\";\r\nimport four from \"../assets/audio/distance/4.mp3\";\r\nimport five from \"../assets/audio/distance/5.mp3\";\r\nimport six from \"../assets/audio/distance/6.mp3\";\r\nimport seven from \"../assets/audio/distance/7.mp3\";\r\nimport eight from \"../assets/audio/distance/8.mp3\";\r\nimport nine from \"../assets/audio/distance/9.mp3\";\r\nimport ten from \"../assets/audio/distance/10.mp3\";\r\n\r\nimport black from \"../assets/audio/colors/black.mp3\";\r\nimport blue from \"../assets/audio/colors/blue.mp3\";\r\nimport brown from \"../assets/audio/colors/brown.mp3\";\r\nimport darkblue from \"../assets/audio/colors/darkblue.mp3\";\r\nimport lightblue from \"../assets/audio/colors/lightblue.mp3\";\r\nimport lightgreen from \"../assets/audio/colors/lightgreen.mp3\";\r\nimport orange from \"../assets/audio/colors/orange.mp3\";\r\nimport pink from \"../assets/audio/colors/pink.mp3\";\r\nimport purple from \"../assets/audio/colors/purple.mp3\";\r\nimport red from \"../assets/audio/colors/red.mp3\";\r\nimport white from \"../assets/audio/colors/white.mp3\";\r\nimport yellow from \"../assets/audio/colors/yellow.mp3\";\r\nimport green from \"../assets/audio/colors/green.mp3\";\r\nimport purplewhite from \"../assets/audio/colors/purplewhite.mp3\";\r\nimport brownwhite from \"../assets/audio/colors/brownwhite.mp3\";\r\n\r\nimport leftBay from \"../assets/audio/other/left_bay.mp3\";\r\nimport rightBay from \"../assets/audio/other/right_bay.mp3\";\r\nimport nextPile from \"../assets/audio/other/next_pile.mp3\";\r\n\r\nimport beep1 from \"../assets/audio/beep/1beep.mp3\";\r\nimport beep2 from \"../assets/audio/beep/2beep.mp3\";\r\nimport beep4 from \"../assets/audio/beep/4beep.mp3\";\r\nimport beep8 from \"../assets/audio/beep/8beep.mp3\";\r\nimport beepi from \"../assets/audio/beep/ibeep.mp3\";\r\n\r\nconst distanceSounds = [\r\n  new Audio(one),\r\n  new Audio(two),\r\n  new Audio(three),\r\n  new Audio(four),\r\n  new Audio(five),\r\n  new Audio(six),\r\n  new Audio(seven),\r\n  new Audio(eight),\r\n  new Audio(nine),\r\n  new Audio(ten),\r\n];\r\n\r\nconst otherSounds = {\r\n  leftBay: new Audio(leftBay),\r\n  rightBay: new Audio(rightBay),\r\n  nextPile: new Audio(nextPile),\r\n};\r\n\r\nconst colorSounds = {\r\n  black: new Audio(black),\r\n  blue: new Audio(blue),\r\n  brown: new Audio(brown),\r\n  darkblue: new Audio(darkblue),\r\n  lightblue: new Audio(lightblue),\r\n  lightgreen: new Audio(lightgreen),\r\n  orange: new Audio(orange),\r\n  pink: new Audio(pink),\r\n  purple: new Audio(purple),\r\n  red: new Audio(red),\r\n  white: new Audio(white),\r\n  yellow: new Audio(yellow),\r\n  green: new Audio(green),\r\n  purplewhite: new Audio(purplewhite),\r\n  brownwhite: new Audio(brownwhite),\r\n};\r\n\r\nconst beepSounds = {\r\n  far: new Audio(beep1),\r\n  close: new Audio(beep2),\r\n  closer: new Audio(beep4),\r\n  closest: new Audio(beep8),\r\n  target: new Audio(beepi),\r\n};\r\n\r\nexport const playDistance = (distance) => {\r\n  const dist = parseInt(distance);\r\n  if (dist > 0 && dist < 11) {\r\n    distanceSounds[dist - 1].play();\r\n  }\r\n};\r\n\r\nexport const playOther = (sound) => {\r\n  if (otherSounds[sound]) otherSounds[sound].play();\r\n};\r\n\r\nexport const playColor = (color) => {\r\n  if (colorSounds[color]) colorSounds[color].play();\r\n};\r\n\r\nexport const playBeep = (distance) => {\r\n  console.log(\"PLay sound\", distance);\r\n  const range = {\r\n    far: 25,\r\n    close: 17,\r\n    closer: 10,\r\n    target: 3,\r\n  };\r\n  if (distance >= range.far) {\r\n    beepSounds.far.play();\r\n  }\r\n  if (distance < range.far && distance >= range.close) {\r\n    beepSounds.close.play();\r\n  }\r\n  if (distance < range.close && distance >= range.closer) {\r\n    beepSounds.closer.play();\r\n  }\r\n  if (distance < range.closer && distance >= range.target) {\r\n    beepSounds.closest.play();\r\n  }\r\n  if (distance < range.target) {\r\n    beepSounds.target.play();\r\n  }\r\n};\r\n","export default __webpack_public_path__ + \"static/media/marooka-top.0316a837.bmp\";","import { useStoreActions, useStoreState } from \"easy-peasy\";\r\nimport DeckGL from \"@deck.gl/react\";\r\nimport { MapView } from \"@deck.gl/core\";\r\nimport {\r\n  BitmapLayer,\r\n  PolygonLayer,\r\n  ScatterplotLayer,\r\n  LineLayer,\r\n} from \"@deck.gl/layers\";\r\nimport { StaticMap } from \"react-map-gl\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getWaypoints, setRefWaypoint, socket } from \"../js/api\";\r\nimport { useLocalStorage, colors, colorsFill, getGuides } from \"../js/helpers\";\r\nimport { playColor, playOther } from \"../js/audio\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport marooka from \"../assets/marooka-top.bmp\";\r\n\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nmapboxgl.workerClass =\r\n  // eslint-disable-next-line import/no-webpack-loader-syntax\r\n  require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\r\n\r\nconst MAPBOX_ACCESS_TOKEN =\r\n  \"pk.eyJ1Ijoia20xMTVmcmFuY28iLCJhIjoiY2t0eXQ3cHBhMGI3aTMxcG14dnN0OHJveSJ9.LWxkBiVPF9UfGWMI4sWakQ\";\r\n\r\nconst INITIAL_VIEW_STATE = {\r\n  longitude: -122.123801,\r\n  latitude: 37.893394,\r\n  zoom: 21,\r\n  maxZoom: 21,\r\n  pitch: 60,\r\n  bearing: 0,\r\n};\r\n\r\nconst UserMap = () => {\r\n  const center = useStoreState((state) => state.center);\r\n  const setCenter = useStoreActions((actions) => actions.setCenter);\r\n  const beep = useStoreState((state) => state.beep);\r\n  const setBeep = useStoreActions((actions) => actions.setBeep);\r\n\r\n  const [viewState, setViewState] = useState(INITIAL_VIEW_STATE);\r\n  const [autoCenter, setAutoCenter] = useState(true);\r\n  const [guides, setGuides] = useState();\r\n  const [truck, setTruck] = useState([\r\n    { lat: 0, lng: 0 },\r\n    { lat: 0, lng: 0 },\r\n    { lat: 0, lng: 0 },\r\n    { lat: 0, lng: 0 },\r\n  ]);\r\n  const [verticalLine, setVerticalLine] = useState({});\r\n  const [bays, setBays] = useState([\r\n    { lat: 0, lng: 0 },\r\n    { lat: 0, lng: 0 },\r\n  ]);\r\n  const nextPiles = useStoreState((state) => state.nextPiles);\r\n  const setNextPiles = useStoreActions((actions) => actions.setNextPiles);\r\n  const waypoints = useStoreState((state) => state.waypoints);\r\n  const setWaypoints = useStoreActions((actions) => actions.setWaypoints);\r\n  const placeWaypoint = useStoreActions((actions) => actions.placeWaypoint);\r\n  const unplaceWaypoint = useStoreActions((actions) => actions.unplaceWaypoint);\r\n  const [initialCenter, setInitialCenter] = useLocalStorage(\"debugCenter\", {\r\n    lat: 0,\r\n    lng: 0,\r\n  });\r\n  const selectedColor = useStoreState((state) => state.selectedColor);\r\n\r\n  const socketListener = () => {\r\n    socket.on(\"message\", (msg) => {\r\n      const parsedMsg = JSON.parse(msg);\r\n      setCenter(parsedMsg);\r\n      setViewState({\r\n        ...viewState,\r\n        longitude: parseFloat(parsedMsg.lng),\r\n        latitude: parseFloat(parsedMsg.lat),\r\n        bearing: parseFloat(parsedMsg.heading),\r\n      });\r\n\r\n      setTruck([\r\n        { lat: parsedMsg.truck[0][0], lng: parsedMsg.truck[0][1] },\r\n        { lat: parsedMsg.truck[1][0], lng: parsedMsg.truck[1][1] },\r\n        { lat: parsedMsg.truck[2][0], lng: parsedMsg.truck[2][1] },\r\n        { lat: parsedMsg.truck[3][0], lng: parsedMsg.truck[3][1] },\r\n        { lat: parsedMsg.truck[0][0], lng: parsedMsg.truck[0][1] },\r\n      ]);\r\n\r\n      setBays([\r\n        { lat: parsedMsg.bays[0][0], lng: parsedMsg.bays[0][1] },\r\n        { lat: parsedMsg.bays[1][0], lng: parsedMsg.bays[1][1] },\r\n      ]);\r\n\r\n      setVerticalLine([\r\n        {\r\n          from: [parsedMsg.truck[4][1], parsedMsg.truck[4][0]],\r\n          to: [parsedMsg.truck[5][1], parsedMsg.truck[5][0]],\r\n        },\r\n      ]);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getWaypoints().then((res) => {\r\n      setWaypoints(\r\n        res.waypoints.map((waypoint) => ({ ...waypoint, selected: true }))\r\n      );\r\n      setGuides(getGuides(res.waypoints));\r\n      if (res.waypoints.length > 0) {\r\n        setCenter({ ...center, ...res.waypoints[0] });\r\n        setViewState({\r\n          ...viewState,\r\n          latitude: res.waypoints[0].lat,\r\n          longitude: res.waypoints[0].lng,\r\n        });\r\n      }\r\n    });\r\n\r\n    socketListener();\r\n\r\n    return () => {\r\n      socket.off(\"message\");\r\n    };\r\n  }, []);\r\n\r\n  const getNearestPiles = (waypoints, bays) => {\r\n    let distanceBay1;\r\n    let distanceBay2;\r\n    let closestBay1;\r\n    let closestBay2;\r\n    let closestDistanceBay1 = 10000;\r\n    let closestDistanceBay2 = 10000;\r\n\r\n    waypoints.forEach((point) => {\r\n      if (\r\n        !point.placed &&\r\n        (selectedColor == point.color || selectedColor == \"\")\r\n      ) {\r\n        distanceBay1 =\r\n          (point.lat - bays[0].lat) ** 2 + (point.lng - bays[0].lng) ** 2;\r\n        distanceBay2 =\r\n          (point.lat - bays[1].lat) ** 2 + (point.lng - bays[1].lng) ** 2;\r\n        if (distanceBay1 < closestDistanceBay1) {\r\n          closestDistanceBay1 = distanceBay1;\r\n          closestBay1 = point;\r\n        }\r\n        if (distanceBay2 < closestDistanceBay2) {\r\n          closestDistanceBay2 = distanceBay2;\r\n          closestBay2 = point;\r\n        }\r\n      }\r\n    });\r\n\r\n    // The code below avoids repeating the same waypoint as next pile\r\n    if (closestBay1 == closestBay2) {\r\n      if (closestDistanceBay1 < closestDistanceBay2) {\r\n        closestBay2 = { lat: 0, lng: 0 };\r\n      } else {\r\n        closestBay1 = { lat: 0, lng: 0 };\r\n      }\r\n    }\r\n\r\n    return [closestBay1, closestBay2];\r\n  };\r\n\r\n  const getNextPiles = (waypoints, bays) => {\r\n    if (waypoints.length > 0) {\r\n      const nearestPiles = getNearestPiles(waypoints, bays);\r\n      setNextPiles(nearestPiles);\r\n      setRefWaypoint(nearestPiles);\r\n      console.log(\"... getting colors\");\r\n      let timeOffset = 0;\r\n      try {\r\n        let leftColor = waypoints\r\n          .filter((w) => w.pile_id == nearestPiles[0].pile_id)[0]\r\n          .color.trim();\r\n        playOther(\"leftBay\");\r\n        setTimeout(() => playColor(leftColor), 1000);\r\n        timeOffset = 2000;\r\n      } catch {\r\n        console.log(\"error left color\");\r\n      }\r\n      try {\r\n        let rightColor = waypoints\r\n          .filter((w) => w.pile_id == nearestPiles[1].pile_id)[0]\r\n          .color.trim();\r\n        setTimeout(() => playOther(\"rightBay\"), 0 + timeOffset);\r\n        setTimeout(() => playColor(rightColor), 1000 + timeOffset);\r\n      } catch {\r\n        console.log(\"error right color\");\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(center).includes(\"distance\")) {\r\n      let tempPiles = [...nextPiles];\r\n      tempPiles[0].distance = center.distance[0];\r\n      tempPiles[1].distance = center.distance[1];\r\n      setNextPiles(tempPiles);\r\n    }\r\n  }, [center]);\r\n\r\n  useEffect(() => {\r\n    if (autoCenter) {\r\n      socket.off(\"message\");\r\n      socketListener();\r\n    } else {\r\n      socket.off(\"message\");\r\n    }\r\n  }, [autoCenter]);\r\n\r\n  useEffect(() => {\r\n    setWaypoints(\r\n      waypoints.map((waypoint) => ({\r\n        ...waypoint,\r\n        selected: waypoint.color == selectedColor || selectedColor == \"\",\r\n      }))\r\n    );\r\n  }, [selectedColor]);\r\n\r\n  const handlePileClick = (d) => {\r\n    const pile_id = d.object.pile_id;\r\n    const placed = d.object.placed;\r\n    if (placed) unplaceWaypoint(pile_id);\r\n    else placeWaypoint(pile_id);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container map\">\r\n        <DeckGL\r\n          initialViewState={viewState}\r\n          controller={true}\r\n          getTooltip={({ object }) =>\r\n            object &&\r\n            `Code: ${object.pile_id}\\nColor: ${object.color}\\n${\r\n              object.placed ? \"Placed\" : \"Not Placed\"\r\n            }`\r\n          }\r\n        >\r\n          <StaticMap mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN} />\r\n          <MapView\r\n            x={\"80%\"}\r\n            y={\"80%\"}\r\n            height={\"15%\"}\r\n            width={\"15%\"}\r\n            clear={true}\r\n            controller\r\n          />\r\n          <ScatterplotLayer\r\n            lineWidthMaxPixels={3}\r\n            lineWidthMinPixels={2}\r\n            getRadius={(d) => (d.selected ? (d.placed ? 0.3 : 1) : 0.01)}\r\n            data={waypoints}\r\n            getPosition={(d) => [d.lng, d.lat]}\r\n            getColor={(d) => colors[d.color]}\r\n            getFillColor={(d) => colorsFill[d.color]}\r\n            getLineColor={(d) => colors[d.color]}\r\n            filled={true}\r\n            stroked={true}\r\n            pickable={true}\r\n            opacity={0.8}\r\n            onClick={handlePileClick}\r\n          />\r\n\r\n          <BitmapLayer\r\n            bounds={[\r\n              [truck[3].lng, truck[3].lat, 0],\r\n              [truck[0].lng, truck[0].lat, 0],\r\n              [truck[1].lng, truck[1].lat, 0],\r\n              [truck[2].lng, truck[2].lat, 0],\r\n            ]}\r\n            image={marooka}\r\n          />\r\n\r\n          <ScatterplotLayer\r\n            lineWidthMaxPixels={2}\r\n            lineWidthMinPixels={1}\r\n            getRadius={0.3}\r\n            data={[\r\n              // gps center\r\n              {\r\n                coordinates: [parseFloat(center.lng), parseFloat(center.lat)],\r\n                color: colors.black,\r\n                height: 10,\r\n              },\r\n              // laser positions\r\n              // {\r\n              //   coordinates: [center.truck[12][1], center.truck[12][0]],\r\n              //   color: colors.green,\r\n              //   height: 10,\r\n              // },\r\n              // {\r\n              //   coordinates: [center.truck[13][1], center.truck[13][0]],\r\n              //   color: colors.green,\r\n              //   height: 10,\r\n              // },\r\n              // galvo laser\r\n              {\r\n                coordinates: [center.truck[14][1], center.truck[14][0]],\r\n                color: colors.green,\r\n                height: 10,\r\n              },\r\n              // Bays positions\r\n              {\r\n                coordinates: [bays[0].lng, bays[0].lat],\r\n                color: colors.red,\r\n                height: 0,\r\n              },\r\n              {\r\n                coordinates: [bays[1].lng, bays[1].lat],\r\n                color: colors.red,\r\n                height: 0,\r\n              },\r\n            ]}\r\n            getPosition={(d) => d.coordinates}\r\n            getColor={(d) => d.color}\r\n            filled={false}\r\n            stroked\r\n          />\r\n\r\n          <PolygonLayer\r\n            data={[\r\n              {\r\n                contour: [\r\n                  [truck[0].lng, truck[0].lat],\r\n                  [truck[1].lng, truck[1].lat],\r\n                  [truck[2].lng, truck[2].lat],\r\n                  [truck[3].lng, truck[3].lat],\r\n                ],\r\n              },\r\n            ]}\r\n            stroked\r\n            filled\r\n            wireframe\r\n            extruded\r\n            lineWidthMinPixels={1}\r\n            getPolygon={(d) => d.contour}\r\n            getFillColor={colorsFill.lightgreen}\r\n            getLineColor={colors.lightgreen}\r\n            getLineWidth={0.1}\r\n            getElevation={0.5}\r\n          />\r\n          <LineLayer\r\n            data={verticalLine}\r\n            widthUnits=\"meters\"\r\n            getWidth={0.3}\r\n            getSourcePosition={(d) => d.from}\r\n            getTargetPosition={(d) => d.to}\r\n            getColor={[20, 140, 0]}\r\n          />\r\n          <LineLayer\r\n            data={guides}\r\n            widthUnits=\"meters\"\r\n            getWidth={0.1}\r\n            getSourcePosition={(d) => d.from}\r\n            getTargetPosition={(d) => d.to}\r\n            getColor={[20, 140, 0, 100]}\r\n          />\r\n        </DeckGL>\r\n      </div>\r\n      <div className=\"columns mt-3 has-text-link \">\r\n        <div className=\"column is-flex is-flex-centered m-0 p-0\">\r\n          <p className=\"heading has-text-centered m-0 p-0 f-3\">\r\n            Lat: {parseFloat(center.lat).toFixed(7)}\r\n          </p>\r\n        </div>\r\n        <div className=\"column is-flex is-flex-centered m-0 p-0\">\r\n          <p className=\"heading has-text-centered m-0 p-0 f-3\">\r\n            Lng: {parseFloat(center.lng).toFixed(7)}\r\n          </p>\r\n        </div>\r\n        <div className=\"column is-flex is-flex-centered m-0 p-0\">\r\n          <p className=\"heading has-text-centered m-0 p-0 f-3\">\r\n            Hdg: {parseFloat(center.heading).toFixed(1)}\r\n          </p>\r\n        </div>\r\n        <div className=\"column is-flex is-flex-centered m-0 p-0\">\r\n          <button\r\n            className={`button is-outlined ml-2 mr-2 ${\r\n              autoCenter ? \"is-success\" : \"is-warning\"\r\n            }`}\r\n            onClick={() => setAutoCenter(!autoCenter)}\r\n          >\r\n            {autoCenter ? \"Auto center enabled\" : \"Auto center not enabled\"}\r\n          </button>\r\n          <button\r\n            className={`button is-outlined is-success ml-2 mr-2`}\r\n            onClick={() => getNextPiles(waypoints, bays)}\r\n            disabled={bays[0].lat == bays[1].lat && bays[0].lng == bays[1].lng}\r\n          >\r\n            Get nearest piles\r\n          </button>\r\n          <button\r\n            className={`button is-outlined ${\r\n              beep ? \"is-success\" : \"is-danger\"\r\n            }`}\r\n            onClick={() => setBeep(!beep)}\r\n          >\r\n            Beep\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserMap;\r\n","import { faFlag } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useStoreActions, useStoreState } from \"easy-peasy\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { playBeep, playColor, playOther } from \"../js/audio\";\r\n\r\nconst NextPile = ({ index }) => {\r\n  const nextPiles = useStoreState((state) => state.nextPiles);\r\n  const center = useStoreState((state) => state.center);\r\n  const beep = useStoreState((state) => state.beep);\r\n  const placeWaypoint = useStoreActions((actions) => actions.placeWaypoint);\r\n  const clearPile = useStoreActions((actions) => actions.clearPile);\r\n  const [progressValue, setProgressValue] = useState(0);\r\n  const [progressColor, setProgressColor] = useState(\"red\");\r\n  const waypoint = nextPiles[index];\r\n\r\n  const handlePilePlacement = () => {\r\n    placeWaypoint(waypoint.pile_id);\r\n    clearPile(index);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (center.distY !== undefined) {\r\n      let distance = Math.abs(center.distY[index]);\r\n      if (distance > 25) {\r\n        setProgressColor(\"is-danger\");\r\n        setProgressValue(1);\r\n      }\r\n      if (distance < 15) {\r\n        setProgressColor(\"is-warning\");\r\n        setProgressValue(2);\r\n      }\r\n      if (distance < 6) {\r\n        setProgressColor(\"is-success\");\r\n        setProgressValue(3);\r\n      }\r\n      if (beep) playBeep(distance);\r\n    }\r\n  }, [waypoint.distance]);\r\n\r\n  return (\r\n    <div className=\"column\">\r\n      {waypoint.pile_id && (\r\n        <>\r\n          <div className=\"is-flex has-text-centered is-flex-direction-column is-align-content-center mb-4\">\r\n            <p className=\"heading title is-5\">Id: {waypoint.pile_id}</p>\r\n            <p className=\"heading f-4\">Lat {waypoint.lat?.toFixed(8)}</p>\r\n            <p className=\"heading f-4\">Lng {waypoint.lng?.toFixed(8)}</p>\r\n            <p className=\"heading f-4\">N {waypoint.x}</p>\r\n            <p className=\"heading f-4\">E {waypoint.y}</p>\r\n          </div>\r\n          <div\r\n            className=\"flag-icon color_red\"\r\n            onClick={() => {\r\n              index == 0 ? playOther(\"leftBay\") : playOther(\"rightBay\");\r\n              setTimeout(() => {\r\n                playColor(waypoint.color?.trim());\r\n              }, 1000);\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faFlag} color={waypoint.color} />\r\n          </div>\r\n          <p className=\"heading has-text-centered\">{waypoint.color}</p>\r\n          <p className=\"title is-3 has-text-centered mt-3 mb-4\">\r\n            {center.distY !== undefined &&\r\n              Math.abs(center.distY[index]).toFixed(1)}{\" \"}\r\n            ft\r\n          </p>\r\n          <progress\r\n            className={`progress rotate ${progressColor}`}\r\n            max=\"3\"\r\n            value={progressValue}\r\n          />\r\n          <div className=\"is-flex is-flex-centered\">\r\n            <button\r\n              onClick={handlePilePlacement}\r\n              className=\"button is-outlined is-success\"\r\n            >\r\n              Place\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NextPile;\r\n","import { faFlag, faFlagCheckered, faLocationArrow } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useStoreActions, useStoreState } from \"easy-peasy\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { sortByColor, sortByColorPlaced } from \"../js/helpers\";\r\n\r\nconst PileSummary = () => {\r\n  const waypoints = useStoreState( state => state.waypoints)\r\n  const center = useStoreState( state => state.center)\r\n  const selectedColor = useStoreState( state => state.selectedColor)\r\n  const setSelectedColor = useStoreActions( actions => actions.setSelectedColor)\r\n  const [pileColors, setPileColors] = useState(sortByColor(waypoints))\r\n  const [pilesPlaced, setPilesPlaced] = useState(sortByColorPlaced(waypoints))\r\n  \r\n  useEffect(() => {\r\n    setPileColors(sortByColor(waypoints))\r\n    setPilesPlaced(sortByColorPlaced(waypoints))\r\n  },[waypoints])\r\n\r\n  return (\r\n    <>\r\n      <hr className=\"m-0 p-0 mb-4\"/>\r\n      <div className=\"columns\">\r\n        <div className=\"column is-flex is-flex-direction-column is-flex-centered\">\r\n          <FontAwesomeIcon\r\n            onClick={() => setSelectedColor('')} \r\n            icon={faFlagCheckered} className=\"is-size-3\" color={selectedColor}/>\r\n          <p className=\"heading has-text-centered has-text-link is-size-5 m-0 p-0\">\r\n            Placed\r\n          </p>\r\n          <p className=\"heading has-text-centered has-text-success is-size-5 m-0 p-0\">\r\n           {waypoints.filter(x => x.placed).length} / {waypoints.length}\r\n          </p>\r\n        </div>\r\n        <div className=\"column is-four-fifths\">\r\n          <div className=\"columns\">\r\n          {Object.keys(pileColors).map((color) => (\r\n            <div className=\"column has-text-centered m-0 p-0\" aria-label={color}>\r\n              <p className=\"is-size-7 m-0 p-0\">{pilesPlaced[color] ? pilesPlaced[color] : 0} / {pileColors[color]}</p>\r\n              <FontAwesomeIcon\r\n                icon={faFlag} onClick={() => setSelectedColor(color)}\r\n                color={color} className=\"is-size-3\"/>\r\n              <p>{(100*(pilesPlaced[color] ? pilesPlaced[color] : 0) / pileColors[color]).toFixed()} %</p>\r\n            </div>\r\n          ))}\r\n          </div>\r\n          <hr className=\"m-0 p-0\"/>\r\n          <p className=\"has-text-centered\" style={{color: selectedColor}}>\r\n            {selectedColor == '' ? 'No layer selected' : selectedColor}\r\n          </p>\r\n        </div>\r\n        <div className=\"column is-centered has-text-centered\">\r\n          <FontAwesomeIcon \r\n            icon={faLocationArrow}\r\n            transform={{rotate: center.heading - 45}} \r\n            className=\"has-text-white is-size-1\" />\r\n          <p className=\"is-size-4\">{center.heading}</p>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PileSummary;","import UserMap from \"./UserMap\";\r\nimport NextPile from \"./NextPile\";\r\nimport { useStoreState } from \"easy-peasy\";\r\nimport { useEffect } from \"react\";\r\nimport PileSummary from \"./PileSummary\";\r\n// import { playColor, playDistance } from \"../js/audio\";\r\n\r\nconst Home = () => {\r\n  // const nextPiles = useStoreState(state => state.nextPiles)\r\n  \r\n  // useEffect(()=>{\r\n  //   if(nextPiles[0].distance) {\r\n  //     let minDistance = Math.min(nextPiles[0].distance, nextPiles[1].distance)\r\n  //     playDistance(minDistance)\r\n  //   }\r\n  // },[nextPiles])\r\n\r\n  return (\r\n    <div className=\"container is-fullwidth\">\r\n      <div className=\"columns p-0 m-0\">\r\n        <NextPile index={0} />\r\n        <div className=\"column is-three-fifths p-0 m-0\">\r\n          <UserMap />\r\n        </div>\r\n        <NextPile index={1} />\r\n      </div>\r\n      <PileSummary /> \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;","import { useLocation } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Tab = ({ name, icon }) => {\r\n  const location = useLocation();\r\n  const active = location.pathname.includes(name.toLowerCase())\r\n\r\n  return (\r\n    <li className={ active ? \"is-active\" : \"\"}>\r\n      <Link to={`/${name.toLowerCase()}`} className=\"mr-4 ml-4\" >\r\n        <span className=\"icon is-small\">\r\n          <FontAwesomeIcon icon={icon} />\r\n        </span>\r\n        <span>{name}</span>\r\n      </Link>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Tab;\r\n","import {\r\n  faTools,\r\n  faMapMarked,\r\n  faBug,\r\n  faSun,\r\n  faSatelliteDish,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport Tab from \"./Tab\";\r\n\r\nconst Tabs = () => {\r\n  return (\r\n    <div className=\"tabs is-centered m-0\">\r\n      <ul>\r\n        <Tab name=\"Map\" icon={faMapMarked} />\r\n        <Tab name=\"Config\" icon={faTools} />\r\n        <Tab name=\"Debug\" icon={faBug} />\r\n        <Tab name=\"Laser\" icon={faSun} />\r\n        <Tab name=\"GPS\" icon={faSatelliteDish} />\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tabs;\r\n","// This component will send \"POST\" to set theoric current coordinates //\r\n// and heading info to change the main map behavior\r\nimport { Map, Marker, GoogleApiWrapper, Circle } from \"google-maps-react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getWaypoints, setHeading, setLatLng } from \"../js/api\";\r\nimport { useLocalStorage } from \"../js/helpers\";\r\n\r\nconst NavDebug = ({ google }) => {\r\n  const [course, setCourse] = useState(0);\r\n  const [markerLatLng, setMarkerLatLng] = useLocalStorage(\"debugCenter\", {\r\n    lat: 0,\r\n    lng: 0,\r\n  });\r\n  const [waypoints, setWaypoints] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getWaypoints().then((res) => {\r\n      setWaypoints(res.waypoints);\r\n      if (res.waypoints.length > 0) {\r\n        setMarkerLatLng({ ...res.waypoints[0] });\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const getMapCordinates = (mapProps, map, clickEvent) => {\r\n    let location = {\r\n      lat: clickEvent.latLng.lat().toFixed(5),\r\n      lng: clickEvent.latLng.lng().toFixed(5),\r\n    };\r\n    setMarkerLatLng(location);\r\n    setLatLng(location);\r\n    console.log(location);\r\n  };\r\n\r\n  const setCourseValue = (e) => {\r\n    const sliderValue = parseFloat(e.target.value).toFixed(1);\r\n    setHeading({ heading: sliderValue });\r\n    setCourse(sliderValue);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container map\">\r\n        <Map\r\n          google={google}\r\n          zoom={14}\r\n          onClick={getMapCordinates}\r\n          initialCenter={markerLatLng}\r\n        >\r\n          <Marker name={\"target\"} position={markerLatLng} />\r\n          {waypoints.map((waypoint) => (\r\n            <Circle\r\n              center={waypoint}\r\n              radius={0.5}\r\n              strokeColor={waypoint.color}\r\n              strokeOpacity={0.5}\r\n              strokeWeight={2}\r\n              fillColor={waypoint.color}\r\n              fillOpacity={0.5}\r\n            />\r\n          ))}\r\n        </Map>\r\n      </div>\r\n      <div className=\"container mt-4 pt-4\">\r\n        <div className=\"columns\">\r\n          <div className=\"column\">\r\n            <p className=\"ml-4\">\r\n              Coordinates: {markerLatLng.lat}, {markerLatLng.lng}\r\n            </p>\r\n            <p className=\"ml-4\">Heading: {course} </p>\r\n          </div>\r\n          <div className=\"column\">\r\n            <p className=\"ml-4\">Set heading:</p>\r\n            <input\r\n              className=\"slider m-4\"\r\n              step={1}\r\n              min={0}\r\n              max={360}\r\n              value={course}\r\n              type=\"range\"\r\n              onInput={setCourseValue}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GoogleApiWrapper({\r\n  apiKey: \"AIzaSyBsgd5A9q-23gHy8tL6e5O0lct6JoD97xo\",\r\n})(NavDebug);\r\n","export default __webpack_public_path__ + \"static/media/laser.bacfbcc3.jpeg\";","import { useEffect, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  getLaserStatus,\r\n  setLaserBlink,\r\n  setLaserConfig,\r\n  setLaserOn,\r\n} from \"../js/api\";\r\nimport { useLocalStorage } from \"../js/helpers\";\r\nimport NumberInput from \"./NumberInput\";\r\nimport { faRedo } from \"@fortawesome/free-solid-svg-icons\";\r\nimport laserImg from \"../assets/laser.jpeg\";\r\n\r\nconst LaserConfig = () => {\r\n  const [connected, setConnected] = useState(false);\r\n  const [port, setPort] = useState();\r\n  const [manual, setManual] = useLocalStorage(\"laserAuto\", true);\r\n  const [loading, setLoading] = useState(false);\r\n  const [on, setOn] = useLocalStorage(\"laserOn\", true);\r\n  const [blink, setBlink] = useLocalStorage(\"laserBlink\", true);\r\n  const [rectWidth, setRectWidth] = useLocalStorage(\"laserRWidth\", 0);\r\n  const [rectHeight, setRectHeight] = useLocalStorage(\"laserRHeight\", 0);\r\n  const [targetX, setTargetX] = useLocalStorage(\"laserTargetX\", 0);\r\n  const [targetY, setTargetY] = useLocalStorage(\"laserTargetY\", 0);\r\n  const [targetZ, setTargetZ] = useLocalStorage(\"laserTargetZ\", -2);\r\n  const [targetA, setTargetA] = useLocalStorage(\"laserTargetA\", 20);\r\n  const [minZ, setMinZ] = useState(0);\r\n  const [maxZ, setMaxZ] = useState(0);\r\n  const [maxX, setMaxX] = useState(0);\r\n\r\n  const handleSave = () => {\r\n    const payload = {\r\n      h: rectHeight,\r\n      w: rectWidth,\r\n      x: targetX,\r\n      y: targetY,\r\n      z: targetZ,\r\n      a: targetA,\r\n      manual,\r\n    };\r\n    setLaserConfig(payload).then((res) => console.log(res));\r\n  };\r\n\r\n  const handleRange = (height, angle) => {\r\n    const deg_to_rad = (degrees) => {\r\n      return degrees * (Math.PI / 180);\r\n    };\r\n    setMaxZ(height / Math.tan(deg_to_rad(angle - 10)));\r\n    setMinZ(height / Math.tan(deg_to_rad(angle + 10)));\r\n    setMaxX(height / (Math.cos(deg_to_rad(angle)) + 1));\r\n  };\r\n\r\n  const handleOn = () => {\r\n    setOn(!on);\r\n    setLaserOn({ on: !on });\r\n  };\r\n\r\n  const handleBlink = () => {\r\n    setBlink(!blink);\r\n    setLaserBlink({ blink: !blink });\r\n  };\r\n\r\n  const handleLaserStatus = () => {\r\n    setLoading(true);\r\n    getLaserStatus().then((res) => {\r\n      setConnected(res.connected);\r\n      setPort(res.port);\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleRange(-targetY, targetA);\r\n  }, [targetY, targetA]);\r\n\r\n  useEffect(() => {\r\n    handleLaserStatus();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"columns\">\r\n        <div className=\"column\">\r\n          <div>\r\n            <h1\r\n              className={`has-text-centered title is-size-4 ${\r\n                connected ? \"has-text-success\" : \"has-text-danger\"\r\n              }`}\r\n            >\r\n              {connected ? \"Laser connected at: \" : \"Laser disconnected\"}\r\n              <span>{connected && port}</span>\r\n            </h1>\r\n            <div className=\"is-flex is-flex-centered\">\r\n              <button\r\n                className={`button is-outlined ${loading && \"is-loading\"}`}\r\n                onClick={handleLaserStatus}\r\n              >\r\n                <FontAwesomeIcon icon={faRedo} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Rectangle width (ft)\"\r\n              value={rectWidth}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setRectWidth}\r\n            />\r\n            <NumberInput\r\n              label=\"Rectangle height (ft)\"\r\n              value={rectHeight}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setRectHeight}\r\n            />\r\n          </div>\r\n          <hr />\r\n          <div className=\"columns\">\r\n            <NumberInput\r\n              label=\"Target X (ft)\"\r\n              value={targetX}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTargetX}\r\n            />\r\n            <NumberInput\r\n              label=\"Target Y (ft)\"\r\n              value={targetY}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTargetY}\r\n            />\r\n            <NumberInput\r\n              label=\"Target Z (ft)\"\r\n              value={targetZ}\r\n              placeholder=\"E.g: 5\"\r\n              changeHandler={setTargetZ}\r\n            />\r\n            <NumberInput\r\n              label=\"Tilt Angle (deg)\"\r\n              value={targetA}\r\n              placeholder=\"E.g: 20\"\r\n              changeHandler={setTargetA}\r\n            />\r\n          </div>\r\n          <div className=\"is-flex is-flex-centered\">\r\n            <button\r\n              onClick={handleOn}\r\n              className={`button is-outlined m-4 ${\r\n                on ? \"is-success\" : \"is-danger\"\r\n              }`}\r\n            >\r\n              {on ? \"Laser on\" : \"Laser off\"}\r\n            </button>\r\n            <button\r\n              onClick={handleBlink}\r\n              className={`button is-outlined m-4 ${\r\n                blink ? \"is-success\" : \"is-danger\"\r\n              }`}\r\n            >\r\n              {blink ? \"Blink on\" : \"Blink off\"}\r\n            </button>\r\n            <button\r\n              onClick={() => setManual(!manual)}\r\n              className={`button is-outlined m-4 ${\r\n                manual ? \"is-danger\" : \"is-success\"\r\n              }`}\r\n            >\r\n              {manual ? \"Manual mode\" : \"Automatic mode\"}\r\n            </button>\r\n          </div>\r\n          <hr />\r\n          <div className=\"is-flex is-flex-centered\">\r\n            <button\r\n              onClick={handleSave}\r\n              className=\"button is-outlined is-success m-4\"\r\n            >\r\n              Save\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"column is-flex-centered is-flex-direction-column is-flex\">\r\n          <img src={laserImg} alt=\"laser instructions\" className=\"zoom_img\" />\r\n          <br />\r\n          <h3 className=\"has-text-success\">Canvas range (ft)</h3>\r\n          <p>Zmax: {maxZ.toFixed(2)}</p>\r\n          <p>Zmin: {minZ.toFixed(2)}</p>\r\n          <p>Xmax: {maxX.toFixed(2)}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LaserConfig;\r\n","import { useEffect, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { getGPSStatus } from \"../js/api\";\r\nimport { faRedo } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { getTime } from \"../js/helpers\";\r\n\r\nconst GPSStatus = () => {\r\n  const [connected, setConnected] = useState(false);\r\n  const [port, setPort] = useState();\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleGPSStatus = () => {\r\n    setLoading(true);\r\n    getGPSStatus().then((res) => {\r\n      console.log(res);\r\n      setConnected(res.connected);\r\n      setPort(res.port);\r\n      setLogs(res.logs);\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleGPSStatus();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"columns\">\r\n        <div className=\"column\">\r\n          <div>\r\n            <h1\r\n              className={`has-text-centered title is-size-4 ${\r\n                connected ? \"has-text-success\" : \"has-text-danger\"\r\n              }`}\r\n            >\r\n              {connected ? \"GPS connected at: \" : \"GPS disconnected\"}\r\n              <span>{connected && port}</span>\r\n            </h1>\r\n            <div className=\"is-flex is-flex-centered\">\r\n              <button\r\n                className={`button is-outlined ${loading && \"is-loading\"}`}\r\n                onClick={handleGPSStatus}\r\n              >\r\n                <FontAwesomeIcon icon={faRedo} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <table className=\"table is-fullwidth is-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th> Timestamp </th>\r\n                <th> String </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {logs.map((log, index) => (\r\n                <tr key={index}>\r\n                  <td> {getTime(log[0])} </td>\r\n                  <td> {log[1]} </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GPSStatus;\r\n","import { Switch, Redirect, Route } from \"react-router-dom\";\r\nimport { StoreProvider, createStore } from \"easy-peasy\";\r\nimport model from \"../js/model\";\r\n\r\nimport Config from \"./Config\";\r\nimport Home from \"./Home\";\r\nimport Tabs from \"./Tabs\";\r\nimport NavDebug from \"./NavDebug\";\r\nimport LaserConfig from \"./LaserConfig\";\r\nimport GPSStatus from \"./GPSStatus\";\r\n\r\nconst store = createStore(model);\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className=\"container is-fullwidth\">\r\n      <Tabs />\r\n      <StoreProvider store={store}>\r\n        <Switch>\r\n          <Redirect exact from=\"/\" to=\"/map\" />\r\n          <Route path=\"/config\" component={Config} />\r\n          <Route path=\"/laser\" component={LaserConfig} />\r\n          <Route path=\"/gps\" component={GPSStatus} />\r\n          <Route path=\"/debug\" component={NavDebug} />\r\n          <Route path=\"/map\" component={Home} />\r\n        </Switch>\r\n      </StoreProvider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nimport './css/index.css';\r\nimport './css/style.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}